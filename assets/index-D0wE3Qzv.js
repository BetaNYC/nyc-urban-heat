var $x=Object.defineProperty;var Yx=(t,e,n)=>e in t?$x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var zg=(t,e,n)=>(Yx(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function y0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _0={exports:{}},Qu={},v0={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Na=Symbol.for("react.element"),Zx=Symbol.for("react.portal"),Kx=Symbol.for("react.fragment"),Hx=Symbol.for("react.strict_mode"),qx=Symbol.for("react.profiler"),Jx=Symbol.for("react.provider"),Qx=Symbol.for("react.context"),ew=Symbol.for("react.forward_ref"),tw=Symbol.for("react.suspense"),nw=Symbol.for("react.memo"),iw=Symbol.for("react.lazy"),Ng=Symbol.iterator;function rw(t){return t===null||typeof t!="object"?null:(t=Ng&&t[Ng]||t["@@iterator"],typeof t=="function"?t:null)}var x0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w0=Object.assign,E0={};function uo(t,e,n){this.props=t,this.context=e,this.refs=E0,this.updater=n||x0}uo.prototype.isReactComponent={};uo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};uo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function C0(){}C0.prototype=uo.prototype;function Tf(t,e,n){this.props=t,this.context=e,this.refs=E0,this.updater=n||x0}var Rf=Tf.prototype=new C0;Rf.constructor=Tf;w0(Rf,uo.prototype);Rf.isPureReactComponent=!0;var Gg=Array.isArray,S0=Object.prototype.hasOwnProperty,If={current:null},T0={key:!0,ref:!0,__self:!0,__source:!0};function R0(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)S0.call(e,i)&&!T0.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Na,type:t,key:s,ref:o,props:r,_owner:If.current}}function sw(t,e){return{$$typeof:Na,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Na}function ow(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jg=/\/+/g;function Yc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ow(""+t.key):e.toString(36)}function Wl(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Na:case Zx:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Yc(o,0):i,Gg(r)?(n="",t!=null&&(n=t.replace(jg,"$&/")+"/"),Wl(r,e,n,"",function(u){return u})):r!=null&&(kf(r)&&(r=sw(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(jg,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Gg(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Yc(s,a);o+=Wl(s,e,n,l,r)}else if(l=rw(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Yc(s,a++),o+=Wl(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function rl(t,e,n){if(t==null)return t;var i=[],r=0;return Wl(t,i,"","",function(s){return e.call(n,s,r++)}),i}function aw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zt={current:null},Vl={transition:null},lw={ReactCurrentDispatcher:zt,ReactCurrentBatchConfig:Vl,ReactCurrentOwner:If};function I0(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:rl,forEach:function(t,e,n){rl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rl(t,function(){e++}),e},toArray:function(t){return rl(t,function(e){return e})||[]},only:function(t){if(!kf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=uo;le.Fragment=Kx;le.Profiler=qx;le.PureComponent=Tf;le.StrictMode=Hx;le.Suspense=tw;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lw;le.act=I0;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=w0({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=If.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)S0.call(e,l)&&!T0.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:Na,type:t.type,key:r,ref:s,props:i,_owner:o}};le.createContext=function(t){return t={$$typeof:Qx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Jx,_context:t},t.Consumer=t};le.createElement=R0;le.createFactory=function(t){var e=R0.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:ew,render:t}};le.isValidElement=kf;le.lazy=function(t){return{$$typeof:iw,_payload:{_status:-1,_result:t},_init:aw}};le.memo=function(t,e){return{$$typeof:nw,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Vl.transition;Vl.transition={};try{t()}finally{Vl.transition=e}};le.unstable_act=I0;le.useCallback=function(t,e){return zt.current.useCallback(t,e)};le.useContext=function(t){return zt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return zt.current.useDeferredValue(t)};le.useEffect=function(t,e){return zt.current.useEffect(t,e)};le.useId=function(){return zt.current.useId()};le.useImperativeHandle=function(t,e,n){return zt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return zt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return zt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return zt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return zt.current.useReducer(t,e,n)};le.useRef=function(t){return zt.current.useRef(t)};le.useState=function(t){return zt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return zt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return zt.current.useTransition()};le.version="18.3.1";v0.exports=le;var Ke=v0.exports;const uw=y0(Ke);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cw=Ke,hw=Symbol.for("react.element"),dw=Symbol.for("react.fragment"),fw=Object.prototype.hasOwnProperty,pw=cw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gw={key:!0,ref:!0,__self:!0,__source:!0};function k0(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)fw.call(e,i)&&!gw.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:hw,type:t,key:s,ref:o,props:r,_owner:pw.current}}Qu.Fragment=dw;Qu.jsx=k0;Qu.jsxs=k0;_0.exports=Qu;var Q=_0.exports,Jh={},M0={exports:{}},sn={},F0={exports:{}},P0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,j){var T=F.length;F.push(j);e:for(;0<T;){var X=T-1>>>1,B=F[X];if(0<r(B,j))F[X]=j,F[T]=B,T=X;else break e}}function n(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var j=F[0],T=F.pop();if(T!==j){F[0]=T;e:for(var X=0,B=F.length,ae=B>>>1;X<ae;){var b=2*(X+1)-1,me=F[b],ue=b+1,we=F[ue];if(0>r(me,T))ue<B&&0>r(we,me)?(F[X]=we,F[ue]=T,X=ue):(F[X]=me,F[b]=T,X=b);else if(ue<B&&0>r(we,T))F[X]=we,F[ue]=T,X=ue;else break e}}return j}function r(F,j){var T=F.sortIndex-j.sortIndex;return T!==0?T:F.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var j=n(u);j!==null;){if(j.callback===null)i(u);else if(j.startTime<=F)i(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(u)}}function x(F){if(y=!1,_(F),!p)if(n(l)!==null)p=!0,P(w);else{var j=n(u);j!==null&&U(x,j.startTime-F)}}function w(F,j){p=!1,y&&(y=!1,m(C),C=-1),f=!0;var T=d;try{for(_(j),h=n(l);h!==null&&(!(h.expirationTime>j)||F&&!D());){var X=h.callback;if(typeof X=="function"){h.callback=null,d=h.priorityLevel;var B=X(h.expirationTime<=j);j=t.unstable_now(),typeof B=="function"?h.callback=B:h===n(l)&&i(l),_(j)}else i(l);h=n(l)}if(h!==null)var ae=!0;else{var b=n(u);b!==null&&U(x,b.startTime-j),ae=!1}return ae}finally{h=null,d=T,f=!1}}var S=!1,E=null,C=-1,R=5,L=-1;function D(){return!(t.unstable_now()-L<R)}function I(){if(E!==null){var F=t.unstable_now();L=F;var j=!0;try{j=E(!0,F)}finally{j?W():(S=!1,E=null)}}else S=!1}var W;if(typeof g=="function")W=function(){g(I)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,k=A.port2;A.port1.onmessage=I,W=function(){k.postMessage(null)}}else W=function(){v(I,0)};function P(F){E=F,S||(S=!0,W())}function U(F,j){C=v(function(){F(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,P(w))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var T=d;d=j;try{return F()}finally{d=T}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,j){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var T=d;d=F;try{return j()}finally{d=T}},t.unstable_scheduleCallback=function(F,j,T){var X=t.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?X+T:X):T=X,F){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=T+B,F={id:c++,callback:j,priorityLevel:F,startTime:T,expirationTime:B,sortIndex:-1},T>X?(F.sortIndex=T,e(u,F),n(l)===null&&F===n(u)&&(y?(m(C),C=-1):y=!0,U(x,T-X))):(F.sortIndex=B,e(l,F),p||f||(p=!0,P(w))),F},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(F){var j=d;return function(){var T=d;d=j;try{return F.apply(this,arguments)}finally{d=T}}}})(P0);F0.exports=P0;var mw=F0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yw=Ke,nn=mw;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var L0=new Set,na={};function qr(t,e){Ys(t,e),Ys(t+"Capture",e)}function Ys(t,e){for(na[t]=e,t=0;t<e.length;t++)L0.add(e[t])}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qh=Object.prototype.hasOwnProperty,_w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wg={},Vg={};function vw(t){return Qh.call(Vg,t)?!0:Qh.call(Wg,t)?!1:_w.test(t)?Vg[t]=!0:(Wg[t]=!0,!1)}function xw(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ww(t,e,n,i){if(e===null||typeof e>"u"||xw(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_t[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_t[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_t[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_t[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_t[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_t[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_t[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_t[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_t[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mf=/[\-:]([a-z])/g;function Ff(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mf,Ff);_t[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mf,Ff);_t[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mf,Ff);_t[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_t[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});_t.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_t[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pf(t,e,n,i){var r=_t.hasOwnProperty(e)?_t[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ww(e,n,r,i)&&(n=null),i||r===null?vw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Pi=yw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sl=Symbol.for("react.element"),_s=Symbol.for("react.portal"),vs=Symbol.for("react.fragment"),Lf=Symbol.for("react.strict_mode"),ed=Symbol.for("react.profiler"),A0=Symbol.for("react.provider"),b0=Symbol.for("react.context"),Af=Symbol.for("react.forward_ref"),td=Symbol.for("react.suspense"),nd=Symbol.for("react.suspense_list"),bf=Symbol.for("react.memo"),Ui=Symbol.for("react.lazy"),O0=Symbol.for("react.offscreen"),Ug=Symbol.iterator;function wo(t){return t===null||typeof t!="object"?null:(t=Ug&&t[Ug]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Zc;function Oo(t){if(Zc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zc=e&&e[1]||""}return`
`+Zc+t}var Kc=!1;function Hc(t,e){if(!t||Kc)return"";Kc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Kc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Oo(t):""}function Ew(t){switch(t.tag){case 5:return Oo(t.type);case 16:return Oo("Lazy");case 13:return Oo("Suspense");case 19:return Oo("SuspenseList");case 0:case 2:case 15:return t=Hc(t.type,!1),t;case 11:return t=Hc(t.type.render,!1),t;case 1:return t=Hc(t.type,!0),t;default:return""}}function id(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vs:return"Fragment";case _s:return"Portal";case ed:return"Profiler";case Lf:return"StrictMode";case td:return"Suspense";case nd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case b0:return(t.displayName||"Context")+".Consumer";case A0:return(t._context.displayName||"Context")+".Provider";case Af:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bf:return e=t.displayName||null,e!==null?e:id(t.type)||"Memo";case Ui:e=t._payload,t=t._init;try{return id(t(e))}catch{}}return null}function Cw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return id(e);case 8:return e===Lf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function D0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Sw(t){var e=D0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ol(t){t._valueTracker||(t._valueTracker=Sw(t))}function z0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=D0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ru(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rd(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function N0(t,e){e=e.checked,e!=null&&Pf(t,"checked",e,!1)}function sd(t,e){N0(t,e);var n=hr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?od(t,e.type,n):e.hasOwnProperty("defaultValue")&&od(t,e.type,hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Bg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function od(t,e,n){(e!=="number"||ru(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Do=Array.isArray;function bs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+hr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function ad(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $g(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(Do(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hr(n)}}function G0(t,e){var n=hr(e.value),i=hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Yg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function j0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ld(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?j0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var al,W0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(al=al||document.createElement("div"),al.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=al.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ia(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tw=["Webkit","ms","Moz","O"];Object.keys(Vo).forEach(function(t){Tw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vo[e]=Vo[t]})});function V0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vo.hasOwnProperty(t)&&Vo[t]?(""+e).trim():e+"px"}function U0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=V0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Rw=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ud(t,e){if(e){if(Rw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function cd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hd=null;function Of(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dd=null,Os=null,Ds=null;function Zg(t){if(t=Wa(t)){if(typeof dd!="function")throw Error(O(280));var e=t.stateNode;e&&(e=rc(e),dd(t.stateNode,t.type,e))}}function X0(t){Os?Ds?Ds.push(t):Ds=[t]:Os=t}function B0(){if(Os){var t=Os,e=Ds;if(Ds=Os=null,Zg(t),e)for(t=0;t<e.length;t++)Zg(e[t])}}function $0(t,e){return t(e)}function Y0(){}var qc=!1;function Z0(t,e,n){if(qc)return t(e,n);qc=!0;try{return $0(t,e,n)}finally{qc=!1,(Os!==null||Ds!==null)&&(Y0(),B0())}}function ra(t,e){var n=t.stateNode;if(n===null)return null;var i=rc(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var fd=!1;if(Si)try{var Eo={};Object.defineProperty(Eo,"passive",{get:function(){fd=!0}}),window.addEventListener("test",Eo,Eo),window.removeEventListener("test",Eo,Eo)}catch{fd=!1}function Iw(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Uo=!1,su=null,ou=!1,pd=null,kw={onError:function(t){Uo=!0,su=t}};function Mw(t,e,n,i,r,s,o,a,l){Uo=!1,su=null,Iw.apply(kw,arguments)}function Fw(t,e,n,i,r,s,o,a,l){if(Mw.apply(this,arguments),Uo){if(Uo){var u=su;Uo=!1,su=null}else throw Error(O(198));ou||(ou=!0,pd=u)}}function Jr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function K0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kg(t){if(Jr(t)!==t)throw Error(O(188))}function Pw(t){var e=t.alternate;if(!e){if(e=Jr(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Kg(r),t;if(s===i)return Kg(r),e;s=s.sibling}throw Error(O(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==i)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function H0(t){return t=Pw(t),t!==null?q0(t):null}function q0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=q0(t);if(e!==null)return e;t=t.sibling}return null}var J0=nn.unstable_scheduleCallback,Hg=nn.unstable_cancelCallback,Lw=nn.unstable_shouldYield,Aw=nn.unstable_requestPaint,Ze=nn.unstable_now,bw=nn.unstable_getCurrentPriorityLevel,Df=nn.unstable_ImmediatePriority,Q0=nn.unstable_UserBlockingPriority,au=nn.unstable_NormalPriority,Ow=nn.unstable_LowPriority,e_=nn.unstable_IdlePriority,ec=null,Zn=null;function Dw(t){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(ec,t,void 0,(t.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:Gw,zw=Math.log,Nw=Math.LN2;function Gw(t){return t>>>=0,t===0?32:31-(zw(t)/Nw|0)|0}var ll=64,ul=4194304;function zo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=zo(a):(s&=o,s!==0&&(i=zo(s)))}else o=n&~r,o!==0?i=zo(o):s!==0&&(i=zo(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ln(e),r=1<<n,i|=t[n],e&=~r;return i}function jw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ww(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ln(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=jw(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function gd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function t_(){var t=ll;return ll<<=1,!(ll&4194240)&&(ll=64),t}function Jc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ga(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ln(e),t[e]=n}function Vw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ln(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function zf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ln(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Te=0;function n_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var i_,Nf,r_,s_,o_,md=!1,cl=[],er=null,tr=null,nr=null,sa=new Map,oa=new Map,$i=[],Uw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qg(t,e){switch(t){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":sa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oa.delete(e.pointerId)}}function Co(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Wa(e),e!==null&&Nf(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Xw(t,e,n,i,r){switch(e){case"focusin":return er=Co(er,t,e,n,i,r),!0;case"dragenter":return tr=Co(tr,t,e,n,i,r),!0;case"mouseover":return nr=Co(nr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return sa.set(s,Co(sa.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,oa.set(s,Co(oa.get(s)||null,t,e,n,i,r)),!0}return!1}function a_(t){var e=Pr(t.target);if(e!==null){var n=Jr(e);if(n!==null){if(e=n.tag,e===13){if(e=K0(n),e!==null){t.blockedOn=e,o_(t.priority,function(){r_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ul(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);hd=i,n.target.dispatchEvent(i),hd=null}else return e=Wa(n),e!==null&&Nf(e),t.blockedOn=n,!1;e.shift()}return!0}function Jg(t,e,n){Ul(t)&&n.delete(e)}function Bw(){md=!1,er!==null&&Ul(er)&&(er=null),tr!==null&&Ul(tr)&&(tr=null),nr!==null&&Ul(nr)&&(nr=null),sa.forEach(Jg),oa.forEach(Jg)}function So(t,e){t.blockedOn===e&&(t.blockedOn=null,md||(md=!0,nn.unstable_scheduleCallback(nn.unstable_NormalPriority,Bw)))}function aa(t){function e(r){return So(r,t)}if(0<cl.length){So(cl[0],t);for(var n=1;n<cl.length;n++){var i=cl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(er!==null&&So(er,t),tr!==null&&So(tr,t),nr!==null&&So(nr,t),sa.forEach(e),oa.forEach(e),n=0;n<$i.length;n++)i=$i[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<$i.length&&(n=$i[0],n.blockedOn===null);)a_(n),n.blockedOn===null&&$i.shift()}var zs=Pi.ReactCurrentBatchConfig,uu=!0;function $w(t,e,n,i){var r=Te,s=zs.transition;zs.transition=null;try{Te=1,Gf(t,e,n,i)}finally{Te=r,zs.transition=s}}function Yw(t,e,n,i){var r=Te,s=zs.transition;zs.transition=null;try{Te=4,Gf(t,e,n,i)}finally{Te=r,zs.transition=s}}function Gf(t,e,n,i){if(uu){var r=yd(t,e,n,i);if(r===null)lh(t,e,i,cu,n),qg(t,i);else if(Xw(r,t,e,n,i))i.stopPropagation();else if(qg(t,i),e&4&&-1<Uw.indexOf(t)){for(;r!==null;){var s=Wa(r);if(s!==null&&i_(s),s=yd(t,e,n,i),s===null&&lh(t,e,i,cu,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else lh(t,e,i,null,n)}}var cu=null;function yd(t,e,n,i){if(cu=null,t=Of(i),t=Pr(t),t!==null)if(e=Jr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=K0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cu=t,null}function l_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bw()){case Df:return 1;case Q0:return 4;case au:case Ow:return 16;case e_:return 536870912;default:return 16}default:return 16}}var Ki=null,jf=null,Xl=null;function u_(){if(Xl)return Xl;var t,e=jf,n=e.length,i,r="value"in Ki?Ki.value:Ki.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Xl=r.slice(t,1<i?1-i:void 0)}function Bl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hl(){return!0}function Qg(){return!1}function on(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hl:Qg,this.isPropagationStopped=Qg,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),e}var co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wf=on(co),ja=Ge({},co,{view:0,detail:0}),Zw=on(ja),Qc,eh,To,tc=Ge({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==To&&(To&&t.type==="mousemove"?(Qc=t.screenX-To.screenX,eh=t.screenY-To.screenY):eh=Qc=0,To=t),Qc)},movementY:function(t){return"movementY"in t?t.movementY:eh}}),em=on(tc),Kw=Ge({},tc,{dataTransfer:0}),Hw=on(Kw),qw=Ge({},ja,{relatedTarget:0}),th=on(qw),Jw=Ge({},co,{animationName:0,elapsedTime:0,pseudoElement:0}),Qw=on(Jw),eE=Ge({},co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tE=on(eE),nE=Ge({},co,{data:0}),tm=on(nE),iE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sE[t])?!!e[t]:!1}function Vf(){return oE}var aE=Ge({},ja,{key:function(t){if(t.key){var e=iE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(t){return t.type==="keypress"?Bl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lE=on(aE),uE=Ge({},tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nm=on(uE),cE=Ge({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),hE=on(cE),dE=Ge({},co,{propertyName:0,elapsedTime:0,pseudoElement:0}),fE=on(dE),pE=Ge({},tc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gE=on(pE),mE=[9,13,27,32],Uf=Si&&"CompositionEvent"in window,Xo=null;Si&&"documentMode"in document&&(Xo=document.documentMode);var yE=Si&&"TextEvent"in window&&!Xo,c_=Si&&(!Uf||Xo&&8<Xo&&11>=Xo),im=" ",rm=!1;function h_(t,e){switch(t){case"keyup":return mE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xs=!1;function _E(t,e){switch(t){case"compositionend":return d_(e);case"keypress":return e.which!==32?null:(rm=!0,im);case"textInput":return t=e.data,t===im&&rm?null:t;default:return null}}function vE(t,e){if(xs)return t==="compositionend"||!Uf&&h_(t,e)?(t=u_(),Xl=jf=Ki=null,xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return c_&&e.locale!=="ko"?null:e.data;default:return null}}var xE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xE[t.type]:e==="textarea"}function f_(t,e,n,i){X0(i),e=hu(e,"onChange"),0<e.length&&(n=new Wf("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Bo=null,la=null;function wE(t){S_(t,0)}function nc(t){var e=Cs(t);if(z0(e))return t}function EE(t,e){if(t==="change")return e}var p_=!1;if(Si){var nh;if(Si){var ih="oninput"in document;if(!ih){var om=document.createElement("div");om.setAttribute("oninput","return;"),ih=typeof om.oninput=="function"}nh=ih}else nh=!1;p_=nh&&(!document.documentMode||9<document.documentMode)}function am(){Bo&&(Bo.detachEvent("onpropertychange",g_),la=Bo=null)}function g_(t){if(t.propertyName==="value"&&nc(la)){var e=[];f_(e,la,t,Of(t)),Z0(wE,e)}}function CE(t,e,n){t==="focusin"?(am(),Bo=e,la=n,Bo.attachEvent("onpropertychange",g_)):t==="focusout"&&am()}function SE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nc(la)}function TE(t,e){if(t==="click")return nc(e)}function RE(t,e){if(t==="input"||t==="change")return nc(e)}function IE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bn=typeof Object.is=="function"?Object.is:IE;function ua(t,e){if(bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Qh.call(e,r)||!bn(t[r],e[r]))return!1}return!0}function lm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function um(t,e){var n=lm(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lm(n)}}function m_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?m_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function y_(){for(var t=window,e=ru();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ru(t.document)}return e}function Xf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kE(t){var e=y_(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&m_(n.ownerDocument.documentElement,n)){if(i!==null&&Xf(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=um(n,s);var o=um(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ME=Si&&"documentMode"in document&&11>=document.documentMode,ws=null,_d=null,$o=null,vd=!1;function cm(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vd||ws==null||ws!==ru(i)||(i=ws,"selectionStart"in i&&Xf(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),$o&&ua($o,i)||($o=i,i=hu(_d,"onSelect"),0<i.length&&(e=new Wf("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ws)))}function dl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Es={animationend:dl("Animation","AnimationEnd"),animationiteration:dl("Animation","AnimationIteration"),animationstart:dl("Animation","AnimationStart"),transitionend:dl("Transition","TransitionEnd")},rh={},__={};Si&&(__=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function ic(t){if(rh[t])return rh[t];if(!Es[t])return t;var e=Es[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in __)return rh[t]=e[n];return t}var v_=ic("animationend"),x_=ic("animationiteration"),w_=ic("animationstart"),E_=ic("transitionend"),C_=new Map,hm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(t,e){C_.set(t,e),qr(e,[t])}for(var sh=0;sh<hm.length;sh++){var oh=hm[sh],FE=oh.toLowerCase(),PE=oh[0].toUpperCase()+oh.slice(1);mr(FE,"on"+PE)}mr(v_,"onAnimationEnd");mr(x_,"onAnimationIteration");mr(w_,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(E_,"onTransitionEnd");Ys("onMouseEnter",["mouseout","mouseover"]);Ys("onMouseLeave",["mouseout","mouseover"]);Ys("onPointerEnter",["pointerout","pointerover"]);Ys("onPointerLeave",["pointerout","pointerover"]);qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LE=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function dm(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Fw(i,e,void 0,t),t.currentTarget=null}function S_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;dm(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;dm(r,a,u),s=l}}}if(ou)throw t=pd,ou=!1,pd=null,t}function Me(t,e){var n=e[Sd];n===void 0&&(n=e[Sd]=new Set);var i=t+"__bubble";n.has(i)||(T_(e,t,2,!1),n.add(i))}function ah(t,e,n){var i=0;e&&(i|=4),T_(n,t,i,e)}var fl="_reactListening"+Math.random().toString(36).slice(2);function ca(t){if(!t[fl]){t[fl]=!0,L0.forEach(function(n){n!=="selectionchange"&&(LE.has(n)||ah(n,!1,t),ah(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fl]||(e[fl]=!0,ah("selectionchange",!1,e))}}function T_(t,e,n,i){switch(l_(e)){case 1:var r=$w;break;case 4:r=Yw;break;default:r=Gf}n=r.bind(null,e,n,t),r=void 0,!fd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function lh(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Pr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Z0(function(){var u=s,c=Of(n),h=[];e:{var d=C_.get(t);if(d!==void 0){var f=Wf,p=t;switch(t){case"keypress":if(Bl(n)===0)break e;case"keydown":case"keyup":f=lE;break;case"focusin":p="focus",f=th;break;case"focusout":p="blur",f=th;break;case"beforeblur":case"afterblur":f=th;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=em;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Hw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=hE;break;case v_:case x_:case w_:f=Qw;break;case E_:f=fE;break;case"scroll":f=Zw;break;case"wheel":f=gE;break;case"copy":case"cut":case"paste":f=tE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=nm}var y=(e&4)!==0,v=!y&&t==="scroll",m=y?d!==null?d+"Capture":null:d;y=[];for(var g=u,_;g!==null;){_=g;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,m!==null&&(x=ra(g,m),x!=null&&y.push(ha(g,x,_)))),v)break;g=g.return}0<y.length&&(d=new f(d,p,null,n,c),h.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==hd&&(p=n.relatedTarget||n.fromElement)&&(Pr(p)||p[Ti]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?Pr(p):null,p!==null&&(v=Jr(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(y=em,x="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=nm,x="onPointerLeave",m="onPointerEnter",g="pointer"),v=f==null?d:Cs(f),_=p==null?d:Cs(p),d=new y(x,g+"leave",f,n,c),d.target=v,d.relatedTarget=_,x=null,Pr(c)===u&&(y=new y(m,g+"enter",p,n,c),y.target=_,y.relatedTarget=v,x=y),v=x,f&&p)t:{for(y=f,m=p,g=0,_=y;_;_=rs(_))g++;for(_=0,x=m;x;x=rs(x))_++;for(;0<g-_;)y=rs(y),g--;for(;0<_-g;)m=rs(m),_--;for(;g--;){if(y===m||m!==null&&y===m.alternate)break t;y=rs(y),m=rs(m)}y=null}else y=null;f!==null&&fm(h,d,f,y,!1),p!==null&&v!==null&&fm(h,v,p,y,!0)}}e:{if(d=u?Cs(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var w=EE;else if(sm(d))if(p_)w=RE;else{w=SE;var S=CE}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=TE);if(w&&(w=w(t,u))){f_(h,w,n,c);break e}S&&S(t,d,u),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&od(d,"number",d.value)}switch(S=u?Cs(u):window,t){case"focusin":(sm(S)||S.contentEditable==="true")&&(ws=S,_d=u,$o=null);break;case"focusout":$o=_d=ws=null;break;case"mousedown":vd=!0;break;case"contextmenu":case"mouseup":case"dragend":vd=!1,cm(h,n,c);break;case"selectionchange":if(ME)break;case"keydown":case"keyup":cm(h,n,c)}var E;if(Uf)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else xs?h_(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(c_&&n.locale!=="ko"&&(xs||C!=="onCompositionStart"?C==="onCompositionEnd"&&xs&&(E=u_()):(Ki=c,jf="value"in Ki?Ki.value:Ki.textContent,xs=!0)),S=hu(u,C),0<S.length&&(C=new tm(C,t,null,n,c),h.push({event:C,listeners:S}),E?C.data=E:(E=d_(n),E!==null&&(C.data=E)))),(E=yE?_E(t,n):vE(t,n))&&(u=hu(u,"onBeforeInput"),0<u.length&&(c=new tm("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=E))}S_(h,e)})}function ha(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ra(t,n),s!=null&&i.unshift(ha(t,s,r)),s=ra(t,e),s!=null&&i.push(ha(t,s,r))),t=t.return}return i}function rs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fm(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=ra(n,s),l!=null&&o.unshift(ha(n,l,a))):r||(l=ra(n,s),l!=null&&o.push(ha(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var AE=/\r\n?/g,bE=/\u0000|\uFFFD/g;function pm(t){return(typeof t=="string"?t:""+t).replace(AE,`
`).replace(bE,"")}function pl(t,e,n){if(e=pm(e),pm(t)!==e&&n)throw Error(O(425))}function du(){}var xd=null,wd=null;function Ed(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cd=typeof setTimeout=="function"?setTimeout:void 0,OE=typeof clearTimeout=="function"?clearTimeout:void 0,gm=typeof Promise=="function"?Promise:void 0,DE=typeof queueMicrotask=="function"?queueMicrotask:typeof gm<"u"?function(t){return gm.resolve(null).then(t).catch(zE)}:Cd;function zE(t){setTimeout(function(){throw t})}function uh(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),aa(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);aa(e)}function ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ho=Math.random().toString(36).slice(2),Wn="__reactFiber$"+ho,da="__reactProps$"+ho,Ti="__reactContainer$"+ho,Sd="__reactEvents$"+ho,NE="__reactListeners$"+ho,GE="__reactHandles$"+ho;function Pr(t){var e=t[Wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ti]||n[Wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mm(t);t!==null;){if(n=t[Wn])return n;t=mm(t)}return e}t=n,n=t.parentNode}return null}function Wa(t){return t=t[Wn]||t[Ti],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function rc(t){return t[da]||null}var Td=[],Ss=-1;function yr(t){return{current:t}}function Fe(t){0>Ss||(t.current=Td[Ss],Td[Ss]=null,Ss--)}function Ie(t,e){Ss++,Td[Ss]=t.current,t.current=e}var dr={},kt=yr(dr),Bt=yr(!1),Xr=dr;function Zs(t,e){var n=t.type.contextTypes;if(!n)return dr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function $t(t){return t=t.childContextTypes,t!=null}function fu(){Fe(Bt),Fe(kt)}function ym(t,e,n){if(kt.current!==dr)throw Error(O(168));Ie(kt,e),Ie(Bt,n)}function R_(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(O(108,Cw(t)||"Unknown",r));return Ge({},n,i)}function pu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dr,Xr=kt.current,Ie(kt,t),Ie(Bt,Bt.current),!0}function _m(t,e,n){var i=t.stateNode;if(!i)throw Error(O(169));n?(t=R_(t,e,Xr),i.__reactInternalMemoizedMergedChildContext=t,Fe(Bt),Fe(kt),Ie(kt,t)):Fe(Bt),Ie(Bt,n)}var pi=null,sc=!1,ch=!1;function I_(t){pi===null?pi=[t]:pi.push(t)}function jE(t){sc=!0,I_(t)}function _r(){if(!ch&&pi!==null){ch=!0;var t=0,e=Te;try{var n=pi;for(Te=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}pi=null,sc=!1}catch(r){throw pi!==null&&(pi=pi.slice(t+1)),J0(Df,_r),r}finally{Te=e,ch=!1}}return null}var Ts=[],Rs=0,gu=null,mu=0,hn=[],dn=0,Br=null,yi=1,_i="";function kr(t,e){Ts[Rs++]=mu,Ts[Rs++]=gu,gu=t,mu=e}function k_(t,e,n){hn[dn++]=yi,hn[dn++]=_i,hn[dn++]=Br,Br=t;var i=yi;t=_i;var r=32-Ln(i)-1;i&=~(1<<r),n+=1;var s=32-Ln(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,yi=1<<32-Ln(e)+r|n<<r|i,_i=s+t}else yi=1<<s|n<<r|i,_i=t}function Bf(t){t.return!==null&&(kr(t,1),k_(t,1,0))}function $f(t){for(;t===gu;)gu=Ts[--Rs],Ts[Rs]=null,mu=Ts[--Rs],Ts[Rs]=null;for(;t===Br;)Br=hn[--dn],hn[dn]=null,_i=hn[--dn],hn[dn]=null,yi=hn[--dn],hn[dn]=null}var tn=null,Qt=null,be=!1,Pn=null;function M_(t,e){var n=pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tn=t,Qt=ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tn=t,Qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Br!==null?{id:yi,overflow:_i}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tn=t,Qt=null,!0):!1;default:return!1}}function Rd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Id(t){if(be){var e=Qt;if(e){var n=e;if(!vm(t,e)){if(Rd(t))throw Error(O(418));e=ir(n.nextSibling);var i=tn;e&&vm(t,e)?M_(i,n):(t.flags=t.flags&-4097|2,be=!1,tn=t)}}else{if(Rd(t))throw Error(O(418));t.flags=t.flags&-4097|2,be=!1,tn=t}}}function xm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function gl(t){if(t!==tn)return!1;if(!be)return xm(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ed(t.type,t.memoizedProps)),e&&(e=Qt)){if(Rd(t))throw F_(),Error(O(418));for(;e;)M_(t,e),e=ir(e.nextSibling)}if(xm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qt=ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qt=null}}else Qt=tn?ir(t.stateNode.nextSibling):null;return!0}function F_(){for(var t=Qt;t;)t=ir(t.nextSibling)}function Ks(){Qt=tn=null,be=!1}function Yf(t){Pn===null?Pn=[t]:Pn.push(t)}var WE=Pi.ReactCurrentBatchConfig;function Ro(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var i=n.stateNode}if(!i)throw Error(O(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function ml(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wm(t){var e=t._init;return e(t._payload)}function P_(t){function e(m,g){if(t){var _=m.deletions;_===null?(m.deletions=[g],m.flags|=16):_.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function i(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function r(m,g){return m=ar(m,g),m.index=0,m.sibling=null,m}function s(m,g,_){return m.index=_,t?(_=m.alternate,_!==null?(_=_.index,_<g?(m.flags|=2,g):_):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,g,_,x){return g===null||g.tag!==6?(g=yh(_,m.mode,x),g.return=m,g):(g=r(g,_),g.return=m,g)}function l(m,g,_,x){var w=_.type;return w===vs?c(m,g,_.props.children,x,_.key):g!==null&&(g.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ui&&wm(w)===g.type)?(x=r(g,_.props),x.ref=Ro(m,g,_),x.return=m,x):(x=Jl(_.type,_.key,_.props,null,m.mode,x),x.ref=Ro(m,g,_),x.return=m,x)}function u(m,g,_,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=_h(_,m.mode,x),g.return=m,g):(g=r(g,_.children||[]),g.return=m,g)}function c(m,g,_,x,w){return g===null||g.tag!==7?(g=jr(_,m.mode,x,w),g.return=m,g):(g=r(g,_),g.return=m,g)}function h(m,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=yh(""+g,m.mode,_),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case sl:return _=Jl(g.type,g.key,g.props,null,m.mode,_),_.ref=Ro(m,null,g),_.return=m,_;case _s:return g=_h(g,m.mode,_),g.return=m,g;case Ui:var x=g._init;return h(m,x(g._payload),_)}if(Do(g)||wo(g))return g=jr(g,m.mode,_,null),g.return=m,g;ml(m,g)}return null}function d(m,g,_,x){var w=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return w!==null?null:a(m,g,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case sl:return _.key===w?l(m,g,_,x):null;case _s:return _.key===w?u(m,g,_,x):null;case Ui:return w=_._init,d(m,g,w(_._payload),x)}if(Do(_)||wo(_))return w!==null?null:c(m,g,_,x,null);ml(m,_)}return null}function f(m,g,_,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(_)||null,a(g,m,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case sl:return m=m.get(x.key===null?_:x.key)||null,l(g,m,x,w);case _s:return m=m.get(x.key===null?_:x.key)||null,u(g,m,x,w);case Ui:var S=x._init;return f(m,g,_,S(x._payload),w)}if(Do(x)||wo(x))return m=m.get(_)||null,c(g,m,x,w,null);ml(g,x)}return null}function p(m,g,_,x){for(var w=null,S=null,E=g,C=g=0,R=null;E!==null&&C<_.length;C++){E.index>C?(R=E,E=null):R=E.sibling;var L=d(m,E,_[C],x);if(L===null){E===null&&(E=R);break}t&&E&&L.alternate===null&&e(m,E),g=s(L,g,C),S===null?w=L:S.sibling=L,S=L,E=R}if(C===_.length)return n(m,E),be&&kr(m,C),w;if(E===null){for(;C<_.length;C++)E=h(m,_[C],x),E!==null&&(g=s(E,g,C),S===null?w=E:S.sibling=E,S=E);return be&&kr(m,C),w}for(E=i(m,E);C<_.length;C++)R=f(E,m,C,_[C],x),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?C:R.key),g=s(R,g,C),S===null?w=R:S.sibling=R,S=R);return t&&E.forEach(function(D){return e(m,D)}),be&&kr(m,C),w}function y(m,g,_,x){var w=wo(_);if(typeof w!="function")throw Error(O(150));if(_=w.call(_),_==null)throw Error(O(151));for(var S=w=null,E=g,C=g=0,R=null,L=_.next();E!==null&&!L.done;C++,L=_.next()){E.index>C?(R=E,E=null):R=E.sibling;var D=d(m,E,L.value,x);if(D===null){E===null&&(E=R);break}t&&E&&D.alternate===null&&e(m,E),g=s(D,g,C),S===null?w=D:S.sibling=D,S=D,E=R}if(L.done)return n(m,E),be&&kr(m,C),w;if(E===null){for(;!L.done;C++,L=_.next())L=h(m,L.value,x),L!==null&&(g=s(L,g,C),S===null?w=L:S.sibling=L,S=L);return be&&kr(m,C),w}for(E=i(m,E);!L.done;C++,L=_.next())L=f(E,m,C,L.value,x),L!==null&&(t&&L.alternate!==null&&E.delete(L.key===null?C:L.key),g=s(L,g,C),S===null?w=L:S.sibling=L,S=L);return t&&E.forEach(function(I){return e(m,I)}),be&&kr(m,C),w}function v(m,g,_,x){if(typeof _=="object"&&_!==null&&_.type===vs&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case sl:e:{for(var w=_.key,S=g;S!==null;){if(S.key===w){if(w=_.type,w===vs){if(S.tag===7){n(m,S.sibling),g=r(S,_.props.children),g.return=m,m=g;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ui&&wm(w)===S.type){n(m,S.sibling),g=r(S,_.props),g.ref=Ro(m,S,_),g.return=m,m=g;break e}n(m,S);break}else e(m,S);S=S.sibling}_.type===vs?(g=jr(_.props.children,m.mode,x,_.key),g.return=m,m=g):(x=Jl(_.type,_.key,_.props,null,m.mode,x),x.ref=Ro(m,g,_),x.return=m,m=x)}return o(m);case _s:e:{for(S=_.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){n(m,g.sibling),g=r(g,_.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=_h(_,m.mode,x),g.return=m,m=g}return o(m);case Ui:return S=_._init,v(m,g,S(_._payload),x)}if(Do(_))return p(m,g,_,x);if(wo(_))return y(m,g,_,x);ml(m,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(n(m,g.sibling),g=r(g,_),g.return=m,m=g):(n(m,g),g=yh(_,m.mode,x),g.return=m,m=g),o(m)):n(m,g)}return v}var Hs=P_(!0),L_=P_(!1),yu=yr(null),_u=null,Is=null,Zf=null;function Kf(){Zf=Is=_u=null}function Hf(t){var e=yu.current;Fe(yu),t._currentValue=e}function kd(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ns(t,e){_u=t,Zf=Is=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xt=!0),t.firstContext=null)}function _n(t){var e=t._currentValue;if(Zf!==t)if(t={context:t,memoizedValue:e,next:null},Is===null){if(_u===null)throw Error(O(308));Is=t,_u.dependencies={lanes:0,firstContext:t}}else Is=Is.next=t;return e}var Lr=null;function qf(t){Lr===null?Lr=[t]:Lr.push(t)}function A_(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,qf(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ri(t,i)}function Ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xi=!1;function Jf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function rr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ge&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ri(t,n)}return r=i.interleaved,r===null?(e.next=e,qf(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ri(t,n)}function $l(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,zf(t,n)}}function Em(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vu(t,e,n,i){var r=t.updateQueue;Xi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((i&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,y=a;switch(d=e,f=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=Ge({},h,d);break e;case 2:Xi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(c===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Yr|=o,t.lanes=o,t.memoizedState=h}}function Cm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(O(191,r));r.call(i)}}}var Va={},Kn=yr(Va),fa=yr(Va),pa=yr(Va);function Ar(t){if(t===Va)throw Error(O(174));return t}function Qf(t,e){switch(Ie(pa,e),Ie(fa,t),Ie(Kn,Va),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ld(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ld(e,t)}Fe(Kn),Ie(Kn,e)}function qs(){Fe(Kn),Fe(fa),Fe(pa)}function O_(t){Ar(pa.current);var e=Ar(Kn.current),n=ld(e,t.type);e!==n&&(Ie(fa,t),Ie(Kn,n))}function ep(t){fa.current===t&&(Fe(Kn),Fe(fa))}var ze=yr(0);function xu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hh=[];function tp(){for(var t=0;t<hh.length;t++)hh[t]._workInProgressVersionPrimary=null;hh.length=0}var Yl=Pi.ReactCurrentDispatcher,dh=Pi.ReactCurrentBatchConfig,$r=0,Ne=null,et=null,rt=null,wu=!1,Yo=!1,ga=0,VE=0;function wt(){throw Error(O(321))}function np(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bn(t[n],e[n]))return!1;return!0}function ip(t,e,n,i,r,s){if($r=s,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yl.current=t===null||t.memoizedState===null?$E:YE,t=n(i,r),Yo){s=0;do{if(Yo=!1,ga=0,25<=s)throw Error(O(301));s+=1,rt=et=null,e.updateQueue=null,Yl.current=ZE,t=n(i,r)}while(Yo)}if(Yl.current=Eu,e=et!==null&&et.next!==null,$r=0,rt=et=Ne=null,wu=!1,e)throw Error(O(300));return t}function rp(){var t=ga!==0;return ga=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Ne.memoizedState=rt=t:rt=rt.next=t,rt}function vn(){if(et===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=rt===null?Ne.memoizedState:rt.next;if(e!==null)rt=e,et=t;else{if(t===null)throw Error(O(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},rt===null?Ne.memoizedState=rt=t:rt=rt.next=t}return rt}function ma(t,e){return typeof e=="function"?e(t):e}function fh(t){var e=vn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var i=et,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if(($r&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,Ne.lanes|=c,Yr|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,bn(i,e.memoizedState)||(Xt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Ne.lanes|=s,Yr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ph(t){var e=vn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);bn(s,e.memoizedState)||(Xt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function D_(){}function z_(t,e){var n=Ne,i=vn(),r=e(),s=!bn(i.memoizedState,r);if(s&&(i.memoizedState=r,Xt=!0),i=i.queue,sp(j_.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,ya(9,G_.bind(null,n,i,r,e),void 0,null),at===null)throw Error(O(349));$r&30||N_(n,e,r)}return r}function N_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function G_(t,e,n,i){e.value=n,e.getSnapshot=i,W_(e)&&V_(t)}function j_(t,e,n){return n(function(){W_(e)&&V_(t)})}function W_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bn(t,n)}catch{return!0}}function V_(t){var e=Ri(t,1);e!==null&&An(e,t,1,-1)}function Sm(t){var e=Gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:t},e.queue=t,t=t.dispatch=BE.bind(null,Ne,t),[e.memoizedState,t]}function ya(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function U_(){return vn().memoizedState}function Zl(t,e,n,i){var r=Gn();Ne.flags|=t,r.memoizedState=ya(1|e,n,void 0,i===void 0?null:i)}function oc(t,e,n,i){var r=vn();i=i===void 0?null:i;var s=void 0;if(et!==null){var o=et.memoizedState;if(s=o.destroy,i!==null&&np(i,o.deps)){r.memoizedState=ya(e,n,s,i);return}}Ne.flags|=t,r.memoizedState=ya(1|e,n,s,i)}function Tm(t,e){return Zl(8390656,8,t,e)}function sp(t,e){return oc(2048,8,t,e)}function X_(t,e){return oc(4,2,t,e)}function B_(t,e){return oc(4,4,t,e)}function $_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Y_(t,e,n){return n=n!=null?n.concat([t]):null,oc(4,4,$_.bind(null,e,t),n)}function op(){}function Z_(t,e){var n=vn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&np(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function K_(t,e){var n=vn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&np(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function H_(t,e,n){return $r&21?(bn(n,e)||(n=t_(),Ne.lanes|=n,Yr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=n)}function UE(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var i=dh.transition;dh.transition={};try{t(!1),e()}finally{Te=n,dh.transition=i}}function q_(){return vn().memoizedState}function XE(t,e,n){var i=or(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},J_(t))Q_(e,n);else if(n=A_(t,e,n,i),n!==null){var r=Dt();An(n,t,i,r),e1(n,e,i)}}function BE(t,e,n){var i=or(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(J_(t))Q_(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,bn(a,o)){var l=e.interleaved;l===null?(r.next=r,qf(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=A_(t,e,r,i),n!==null&&(r=Dt(),An(n,t,i,r),e1(n,e,i))}}function J_(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Q_(t,e){Yo=wu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function e1(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,zf(t,n)}}var Eu={readContext:_n,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},$E={readContext:_n,useCallback:function(t,e){return Gn().memoizedState=[t,e===void 0?null:e],t},useContext:_n,useEffect:Tm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zl(4194308,4,$_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zl(4,2,t,e)},useMemo:function(t,e){var n=Gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Gn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=XE.bind(null,Ne,t),[i.memoizedState,t]},useRef:function(t){var e=Gn();return t={current:t},e.memoizedState=t},useState:Sm,useDebugValue:op,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=Sm(!1),e=t[0];return t=UE.bind(null,t[1]),Gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ne,r=Gn();if(be){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),at===null)throw Error(O(349));$r&30||N_(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Tm(j_.bind(null,i,s,t),[t]),i.flags|=2048,ya(9,G_.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Gn(),e=at.identifierPrefix;if(be){var n=_i,i=yi;n=(i&~(1<<32-Ln(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ga++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=VE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},YE={readContext:_n,useCallback:Z_,useContext:_n,useEffect:sp,useImperativeHandle:Y_,useInsertionEffect:X_,useLayoutEffect:B_,useMemo:K_,useReducer:fh,useRef:U_,useState:function(){return fh(ma)},useDebugValue:op,useDeferredValue:function(t){var e=vn();return H_(e,et.memoizedState,t)},useTransition:function(){var t=fh(ma)[0],e=vn().memoizedState;return[t,e]},useMutableSource:D_,useSyncExternalStore:z_,useId:q_,unstable_isNewReconciler:!1},ZE={readContext:_n,useCallback:Z_,useContext:_n,useEffect:sp,useImperativeHandle:Y_,useInsertionEffect:X_,useLayoutEffect:B_,useMemo:K_,useReducer:ph,useRef:U_,useState:function(){return ph(ma)},useDebugValue:op,useDeferredValue:function(t){var e=vn();return et===null?e.memoizedState=t:H_(e,et.memoizedState,t)},useTransition:function(){var t=ph(ma)[0],e=vn().memoizedState;return[t,e]},useMutableSource:D_,useSyncExternalStore:z_,useId:q_,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Md(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ac={isMounted:function(t){return(t=t._reactInternals)?Jr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Dt(),r=or(t),s=xi(i,r);s.payload=e,n!=null&&(s.callback=n),e=rr(t,s,r),e!==null&&(An(e,t,r,i),$l(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Dt(),r=or(t),s=xi(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=rr(t,s,r),e!==null&&(An(e,t,r,i),$l(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dt(),i=or(t),r=xi(n,i);r.tag=2,e!=null&&(r.callback=e),e=rr(t,r,i),e!==null&&(An(e,t,i,n),$l(e,t,i))}};function Rm(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ua(n,i)||!ua(r,s):!0}function t1(t,e,n){var i=!1,r=dr,s=e.contextType;return typeof s=="object"&&s!==null?s=_n(s):(r=$t(e)?Xr:kt.current,i=e.contextTypes,s=(i=i!=null)?Zs(t,r):dr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ac,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Im(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ac.enqueueReplaceState(e,e.state,null)}function Fd(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Jf(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=_n(s):(s=$t(e)?Xr:kt.current,r.context=Zs(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Md(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ac.enqueueReplaceState(r,r.state,null),vu(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Js(t,e){try{var n="",i=e;do n+=Ew(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function gh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var KE=typeof WeakMap=="function"?WeakMap:Map;function n1(t,e,n){n=xi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Su||(Su=!0,Wd=i),Pd(t,e)},n}function i1(t,e,n){n=xi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Pd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Pd(t,e),typeof i!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function km(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new KE;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=uC.bind(null,t,e,n),e.then(t,t))}function Mm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fm(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xi(-1,1),e.tag=2,rr(n,e,1))),n.lanes|=1),t)}var HE=Pi.ReactCurrentOwner,Xt=!1;function bt(t,e,n,i){e.child=t===null?L_(e,null,n,i):Hs(e,t.child,n,i)}function Pm(t,e,n,i,r){n=n.render;var s=e.ref;return Ns(e,r),i=ip(t,e,n,i,s,r),n=rp(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ii(t,e,r)):(be&&n&&Bf(e),e.flags|=1,bt(t,e,i,r),e.child)}function Lm(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!pp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,r1(t,e,s,i,r)):(t=Jl(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ua,n(o,i)&&t.ref===e.ref)return Ii(t,e,r)}return e.flags|=1,t=ar(s,i),t.ref=e.ref,t.return=e,e.child=t}function r1(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(ua(s,i)&&t.ref===e.ref)if(Xt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Xt=!0);else return e.lanes=t.lanes,Ii(t,e,r)}return Ld(t,e,n,i,r)}function s1(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Ms,Kt),Kt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(Ms,Kt),Kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ie(Ms,Kt),Kt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ie(Ms,Kt),Kt|=i;return bt(t,e,r,n),e.child}function o1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ld(t,e,n,i,r){var s=$t(n)?Xr:kt.current;return s=Zs(e,s),Ns(e,r),n=ip(t,e,n,i,s,r),i=rp(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ii(t,e,r)):(be&&i&&Bf(e),e.flags|=1,bt(t,e,n,r),e.child)}function Am(t,e,n,i,r){if($t(n)){var s=!0;pu(e)}else s=!1;if(Ns(e,r),e.stateNode===null)Kl(t,e),t1(e,n,i),Fd(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=_n(u):(u=$t(n)?Xr:kt.current,u=Zs(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&Im(e,o,i,u),Xi=!1;var d=e.memoizedState;o.state=d,vu(e,i,o,r),l=e.memoizedState,a!==i||d!==l||Bt.current||Xi?(typeof c=="function"&&(Md(e,n,c,i),l=e.memoizedState),(a=Xi||Rm(e,n,a,i,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,b_(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Mn(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=_n(l):(l=$t(n)?Xr:kt.current,l=Zs(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&Im(e,o,i,l),Xi=!1,d=e.memoizedState,o.state=d,vu(e,i,o,r);var p=e.memoizedState;a!==h||d!==p||Bt.current||Xi?(typeof f=="function"&&(Md(e,n,f,i),p=e.memoizedState),(u=Xi||Rm(e,n,u,i,d,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Ad(t,e,n,i,s,r)}function Ad(t,e,n,i,r,s){o1(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&_m(e,n,!1),Ii(t,e,s);i=e.stateNode,HE.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Hs(e,t.child,null,s),e.child=Hs(e,null,a,s)):bt(t,e,a,s),e.memoizedState=i.state,r&&_m(e,n,!0),e.child}function a1(t){var e=t.stateNode;e.pendingContext?ym(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ym(t,e.context,!1),Qf(t,e.containerInfo)}function bm(t,e,n,i,r){return Ks(),Yf(r),e.flags|=256,bt(t,e,n,i),e.child}var bd={dehydrated:null,treeContext:null,retryLane:0};function Od(t){return{baseLanes:t,cachePool:null,transitions:null}}function l1(t,e,n){var i=e.pendingProps,r=ze.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ie(ze,r&1),t===null)return Id(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=cc(o,i,0,null),t=jr(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Od(n),e.memoizedState=bd,t):ap(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return qE(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ar(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=ar(a,s):(s=jr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Od(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=bd,i}return s=t.child,t=s.sibling,i=ar(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function ap(t,e){return e=cc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yl(t,e,n,i){return i!==null&&Yf(i),Hs(e,t.child,null,n),t=ap(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qE(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=gh(Error(O(422))),yl(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=cc({mode:"visible",children:i.children},r,0,null),s=jr(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Hs(e,t.child,null,o),e.child.memoizedState=Od(o),e.memoizedState=bd,s);if(!(e.mode&1))return yl(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(O(419)),i=gh(s,i,void 0),yl(t,e,o,i)}if(a=(o&t.childLanes)!==0,Xt||a){if(i=at,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ri(t,r),An(i,t,r,-1))}return fp(),i=gh(Error(O(421))),yl(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=cC.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Qt=ir(r.nextSibling),tn=e,be=!0,Pn=null,t!==null&&(hn[dn++]=yi,hn[dn++]=_i,hn[dn++]=Br,yi=t.id,_i=t.overflow,Br=e),e=ap(e,i.children),e.flags|=4096,e)}function Om(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),kd(t.return,e,n)}function mh(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function u1(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(bt(t,e,i.children,n),i=ze.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Om(t,n,e);else if(t.tag===19)Om(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ie(ze,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&xu(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),mh(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&xu(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}mh(e,!0,n,null,s);break;case"together":mh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function JE(t,e,n){switch(e.tag){case 3:a1(e),Ks();break;case 5:O_(e);break;case 1:$t(e.type)&&pu(e);break;case 4:Qf(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ie(yu,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ie(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?l1(t,e,n):(Ie(ze,ze.current&1),t=Ii(t,e,n),t!==null?t.sibling:null);Ie(ze,ze.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return u1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ie(ze,ze.current),i)break;return null;case 22:case 23:return e.lanes=0,s1(t,e,n)}return Ii(t,e,n)}var c1,Dd,h1,d1;c1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dd=function(){};h1=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Ar(Kn.current);var s=null;switch(n){case"input":r=rd(t,r),i=rd(t,i),s=[];break;case"select":r=Ge({},r,{value:void 0}),i=Ge({},i,{value:void 0}),s=[];break;case"textarea":r=ad(t,r),i=ad(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=du)}ud(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(na.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(na.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Me("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};d1=function(t,e,n,i){n!==i&&(e.flags|=4)};function Io(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function QE(t,e,n){var i=e.pendingProps;switch($f(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return $t(e.type)&&fu(),Et(e),null;case 3:return i=e.stateNode,qs(),Fe(Bt),Fe(kt),tp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(gl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pn!==null&&(Xd(Pn),Pn=null))),Dd(t,e),Et(e),null;case 5:ep(e);var r=Ar(pa.current);if(n=e.type,t!==null&&e.stateNode!=null)h1(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(O(166));return Et(e),null}if(t=Ar(Kn.current),gl(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Wn]=e,i[da]=s,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(r=0;r<No.length;r++)Me(No[r],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":Xg(i,s),Me("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Me("invalid",i);break;case"textarea":$g(i,s),Me("invalid",i)}ud(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&pl(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&pl(i.textContent,a,t),r=["children",""+a]):na.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",i)}switch(n){case"input":ol(i),Bg(i,s,!0);break;case"textarea":ol(i),Yg(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=du)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=j0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Wn]=e,t[da]=i,c1(t,e,!1,!1),e.stateNode=t;e:{switch(o=cd(n,i),n){case"dialog":Me("cancel",t),Me("close",t),r=i;break;case"iframe":case"object":case"embed":Me("load",t),r=i;break;case"video":case"audio":for(r=0;r<No.length;r++)Me(No[r],t);r=i;break;case"source":Me("error",t),r=i;break;case"img":case"image":case"link":Me("error",t),Me("load",t),r=i;break;case"details":Me("toggle",t),r=i;break;case"input":Xg(t,i),r=rd(t,i),Me("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ge({},i,{value:void 0}),Me("invalid",t);break;case"textarea":$g(t,i),r=ad(t,i),Me("invalid",t);break;default:r=i}ud(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?U0(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&W0(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ia(t,l):typeof l=="number"&&ia(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(na.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Me("scroll",t):l!=null&&Pf(t,s,l,o))}switch(n){case"input":ol(t),Bg(t,i,!1);break;case"textarea":ol(t),Yg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+hr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?bs(t,!!i.multiple,s,!1):i.defaultValue!=null&&bs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=du)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)d1(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(O(166));if(n=Ar(pa.current),Ar(Kn.current),gl(e)){if(i=e.stateNode,n=e.memoizedProps,i[Wn]=e,(s=i.nodeValue!==n)&&(t=tn,t!==null))switch(t.tag){case 3:pl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pl(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Wn]=e,e.stateNode=i}return Et(e),null;case 13:if(Fe(ze),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Qt!==null&&e.mode&1&&!(e.flags&128))F_(),Ks(),e.flags|=98560,s=!1;else if(s=gl(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(O(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[Wn]=e}else Ks(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),s=!1}else Pn!==null&&(Xd(Pn),Pn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?tt===0&&(tt=3):fp())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return qs(),Dd(t,e),t===null&&ca(e.stateNode.containerInfo),Et(e),null;case 10:return Hf(e.type._context),Et(e),null;case 17:return $t(e.type)&&fu(),Et(e),null;case 19:if(Fe(ze),s=e.memoizedState,s===null)return Et(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Io(s,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xu(t),o!==null){for(e.flags|=128,Io(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(ze,ze.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ze()>Qs&&(e.flags|=128,i=!0,Io(s,!1),e.lanes=4194304)}else{if(!i)if(t=xu(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Io(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!be)return Et(e),null}else 2*Ze()-s.renderingStartTime>Qs&&n!==1073741824&&(e.flags|=128,i=!0,Io(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ze(),e.sibling=null,n=ze.current,Ie(ze,i?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return dp(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Kt&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function eC(t,e){switch($f(e),e.tag){case 1:return $t(e.type)&&fu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qs(),Fe(Bt),Fe(kt),tp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ep(e),null;case 13:if(Fe(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));Ks()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(ze),null;case 4:return qs(),null;case 10:return Hf(e.type._context),null;case 22:case 23:return dp(),null;case 24:return null;default:return null}}var _l=!1,Tt=!1,tC=typeof WeakSet=="function"?WeakSet:Set,V=null;function ks(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Be(t,e,i)}else n.current=null}function zd(t,e,n){try{n()}catch(i){Be(t,e,i)}}var Dm=!1;function nC(t,e){if(xd=uu,t=y_(),Xf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++u===r&&(a=o),d===s&&++c===i&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(wd={focusedElem:t,selectionRange:n},uu=!1,V=e;V!==null;)if(e=V,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,V=t;else for(;V!==null;){e=V;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,v=p.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:Mn(e.type,y),v);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(x){Be(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,V=t;break}V=e.return}return p=Dm,Dm=!1,p}function Zo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&zd(e,n,s)}r=r.next}while(r!==i)}}function lc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Nd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function f1(t){var e=t.alternate;e!==null&&(t.alternate=null,f1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wn],delete e[da],delete e[Sd],delete e[NE],delete e[GE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function p1(t){return t.tag===5||t.tag===3||t.tag===4}function zm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||p1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gd(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=du));else if(i!==4&&(t=t.child,t!==null))for(Gd(t,e,n),t=t.sibling;t!==null;)Gd(t,e,n),t=t.sibling}function jd(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(jd(t,e,n),t=t.sibling;t!==null;)jd(t,e,n),t=t.sibling}var ft=null,Fn=!1;function bi(t,e,n){for(n=n.child;n!==null;)g1(t,e,n),n=n.sibling}function g1(t,e,n){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(ec,n)}catch{}switch(n.tag){case 5:Tt||ks(n,e);case 6:var i=ft,r=Fn;ft=null,bi(t,e,n),ft=i,Fn=r,ft!==null&&(Fn?(t=ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(Fn?(t=ft,n=n.stateNode,t.nodeType===8?uh(t.parentNode,n):t.nodeType===1&&uh(t,n),aa(t)):uh(ft,n.stateNode));break;case 4:i=ft,r=Fn,ft=n.stateNode.containerInfo,Fn=!0,bi(t,e,n),ft=i,Fn=r;break;case 0:case 11:case 14:case 15:if(!Tt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&zd(n,e,o),r=r.next}while(r!==i)}bi(t,e,n);break;case 1:if(!Tt&&(ks(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Be(n,e,a)}bi(t,e,n);break;case 21:bi(t,e,n);break;case 22:n.mode&1?(Tt=(i=Tt)||n.memoizedState!==null,bi(t,e,n),Tt=i):bi(t,e,n);break;default:bi(t,e,n)}}function Nm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tC),e.forEach(function(i){var r=hC.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function In(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ft=a.stateNode,Fn=!1;break e;case 3:ft=a.stateNode.containerInfo,Fn=!0;break e;case 4:ft=a.stateNode.containerInfo,Fn=!0;break e}a=a.return}if(ft===null)throw Error(O(160));g1(s,o,r),ft=null,Fn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Be(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)m1(e,t),e=e.sibling}function m1(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(In(e,t),Nn(t),i&4){try{Zo(3,t,t.return),lc(3,t)}catch(y){Be(t,t.return,y)}try{Zo(5,t,t.return)}catch(y){Be(t,t.return,y)}}break;case 1:In(e,t),Nn(t),i&512&&n!==null&&ks(n,n.return);break;case 5:if(In(e,t),Nn(t),i&512&&n!==null&&ks(n,n.return),t.flags&32){var r=t.stateNode;try{ia(r,"")}catch(y){Be(t,t.return,y)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&N0(r,s),cd(a,o);var u=cd(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?U0(r,h):c==="dangerouslySetInnerHTML"?W0(r,h):c==="children"?ia(r,h):Pf(r,c,h,u)}switch(a){case"input":sd(r,s);break;case"textarea":G0(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?bs(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?bs(r,!!s.multiple,s.defaultValue,!0):bs(r,!!s.multiple,s.multiple?[]:"",!1))}r[da]=s}catch(y){Be(t,t.return,y)}}break;case 6:if(In(e,t),Nn(t),i&4){if(t.stateNode===null)throw Error(O(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(y){Be(t,t.return,y)}}break;case 3:if(In(e,t),Nn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{aa(e.containerInfo)}catch(y){Be(t,t.return,y)}break;case 4:In(e,t),Nn(t);break;case 13:In(e,t),Nn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(cp=Ze())),i&4&&Nm(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Tt=(u=Tt)||c,In(e,t),Tt=u):In(e,t),Nn(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(V=t,c=t.child;c!==null;){for(h=V=c;V!==null;){switch(d=V,f=d.child,d.tag){case 0:case 11:case 14:case 15:Zo(4,d,d.return);break;case 1:ks(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){Be(i,n,y)}}break;case 5:ks(d,d.return);break;case 22:if(d.memoizedState!==null){jm(h);continue}}f!==null?(f.return=d,V=f):jm(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=V0("display",o))}catch(y){Be(t,t.return,y)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){Be(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:In(e,t),Nn(t),i&4&&Nm(t);break;case 21:break;default:In(e,t),Nn(t)}}function Nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(p1(n)){var i=n;break e}n=n.return}throw Error(O(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ia(r,""),i.flags&=-33);var s=zm(t);jd(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=zm(t);Gd(t,a,o);break;default:throw Error(O(161))}}catch(l){Be(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iC(t,e,n){V=t,y1(t)}function y1(t,e,n){for(var i=(t.mode&1)!==0;V!==null;){var r=V,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||_l;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Tt;a=_l;var u=Tt;if(_l=o,(Tt=l)&&!u)for(V=r;V!==null;)o=V,l=o.child,o.tag===22&&o.memoizedState!==null?Wm(r):l!==null?(l.return=o,V=l):Wm(r);for(;s!==null;)V=s,y1(s),s=s.sibling;V=r,_l=a,Tt=u}Gm(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,V=s):Gm(t)}}function Gm(t){for(;V!==null;){var e=V;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||lc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Tt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Mn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Cm(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cm(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&aa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Tt||e.flags&512&&Nd(e)}catch(d){Be(e,e.return,d)}}if(e===t){V=null;break}if(n=e.sibling,n!==null){n.return=e.return,V=n;break}V=e.return}}function jm(t){for(;V!==null;){var e=V;if(e===t){V=null;break}var n=e.sibling;if(n!==null){n.return=e.return,V=n;break}V=e.return}}function Wm(t){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lc(4,e)}catch(l){Be(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Be(e,r,l)}}var s=e.return;try{Nd(e)}catch(l){Be(e,s,l)}break;case 5:var o=e.return;try{Nd(e)}catch(l){Be(e,o,l)}}}catch(l){Be(e,e.return,l)}if(e===t){V=null;break}var a=e.sibling;if(a!==null){a.return=e.return,V=a;break}V=e.return}}var rC=Math.ceil,Cu=Pi.ReactCurrentDispatcher,lp=Pi.ReactCurrentOwner,mn=Pi.ReactCurrentBatchConfig,ge=0,at=null,Je=null,mt=0,Kt=0,Ms=yr(0),tt=0,_a=null,Yr=0,uc=0,up=0,Ko=null,Gt=null,cp=0,Qs=1/0,fi=null,Su=!1,Wd=null,sr=null,vl=!1,Hi=null,Tu=0,Ho=0,Vd=null,Hl=-1,ql=0;function Dt(){return ge&6?Ze():Hl!==-1?Hl:Hl=Ze()}function or(t){return t.mode&1?ge&2&&mt!==0?mt&-mt:WE.transition!==null?(ql===0&&(ql=t_()),ql):(t=Te,t!==0||(t=window.event,t=t===void 0?16:l_(t.type)),t):1}function An(t,e,n,i){if(50<Ho)throw Ho=0,Vd=null,Error(O(185));Ga(t,n,i),(!(ge&2)||t!==at)&&(t===at&&(!(ge&2)&&(uc|=n),tt===4&&Yi(t,mt)),Yt(t,i),n===1&&ge===0&&!(e.mode&1)&&(Qs=Ze()+500,sc&&_r()))}function Yt(t,e){var n=t.callbackNode;Ww(t,e);var i=lu(t,t===at?mt:0);if(i===0)n!==null&&Hg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Hg(n),e===1)t.tag===0?jE(Vm.bind(null,t)):I_(Vm.bind(null,t)),DE(function(){!(ge&6)&&_r()}),n=null;else{switch(n_(i)){case 1:n=Df;break;case 4:n=Q0;break;case 16:n=au;break;case 536870912:n=e_;break;default:n=au}n=T1(n,_1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _1(t,e){if(Hl=-1,ql=0,ge&6)throw Error(O(327));var n=t.callbackNode;if(Gs()&&t.callbackNode!==n)return null;var i=lu(t,t===at?mt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ru(t,i);else{e=i;var r=ge;ge|=2;var s=x1();(at!==t||mt!==e)&&(fi=null,Qs=Ze()+500,Gr(t,e));do try{aC();break}catch(a){v1(t,a)}while(!0);Kf(),Cu.current=s,ge=r,Je!==null?e=0:(at=null,mt=0,e=tt)}if(e!==0){if(e===2&&(r=gd(t),r!==0&&(i=r,e=Ud(t,r))),e===1)throw n=_a,Gr(t,0),Yi(t,i),Yt(t,Ze()),n;if(e===6)Yi(t,i);else{if(r=t.current.alternate,!(i&30)&&!sC(r)&&(e=Ru(t,i),e===2&&(s=gd(t),s!==0&&(i=s,e=Ud(t,s))),e===1))throw n=_a,Gr(t,0),Yi(t,i),Yt(t,Ze()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(O(345));case 2:Mr(t,Gt,fi);break;case 3:if(Yi(t,i),(i&130023424)===i&&(e=cp+500-Ze(),10<e)){if(lu(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Dt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Cd(Mr.bind(null,t,Gt,fi),e);break}Mr(t,Gt,fi);break;case 4:if(Yi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Ln(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ze()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*rC(i/1960))-i,10<i){t.timeoutHandle=Cd(Mr.bind(null,t,Gt,fi),i);break}Mr(t,Gt,fi);break;case 5:Mr(t,Gt,fi);break;default:throw Error(O(329))}}}return Yt(t,Ze()),t.callbackNode===n?_1.bind(null,t):null}function Ud(t,e){var n=Ko;return t.current.memoizedState.isDehydrated&&(Gr(t,e).flags|=256),t=Ru(t,e),t!==2&&(e=Gt,Gt=n,e!==null&&Xd(e)),t}function Xd(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function sC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!bn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yi(t,e){for(e&=~up,e&=~uc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ln(e),i=1<<n;t[n]=-1,e&=~i}}function Vm(t){if(ge&6)throw Error(O(327));Gs();var e=lu(t,0);if(!(e&1))return Yt(t,Ze()),null;var n=Ru(t,e);if(t.tag!==0&&n===2){var i=gd(t);i!==0&&(e=i,n=Ud(t,i))}if(n===1)throw n=_a,Gr(t,0),Yi(t,e),Yt(t,Ze()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mr(t,Gt,fi),Yt(t,Ze()),null}function hp(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(Qs=Ze()+500,sc&&_r())}}function Zr(t){Hi!==null&&Hi.tag===0&&!(ge&6)&&Gs();var e=ge;ge|=1;var n=mn.transition,i=Te;try{if(mn.transition=null,Te=1,t)return t()}finally{Te=i,mn.transition=n,ge=e,!(ge&6)&&_r()}}function dp(){Kt=Ms.current,Fe(Ms)}function Gr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,OE(n)),Je!==null)for(n=Je.return;n!==null;){var i=n;switch($f(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&fu();break;case 3:qs(),Fe(Bt),Fe(kt),tp();break;case 5:ep(i);break;case 4:qs();break;case 13:Fe(ze);break;case 19:Fe(ze);break;case 10:Hf(i.type._context);break;case 22:case 23:dp()}n=n.return}if(at=t,Je=t=ar(t.current,null),mt=Kt=e,tt=0,_a=null,up=uc=Yr=0,Gt=Ko=null,Lr!==null){for(e=0;e<Lr.length;e++)if(n=Lr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Lr=null}return t}function v1(t,e){do{var n=Je;try{if(Kf(),Yl.current=Eu,wu){for(var i=Ne.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}wu=!1}if($r=0,rt=et=Ne=null,Yo=!1,ga=0,lp.current=null,n===null||n.return===null){tt=1,_a=e,Je=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=mt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=Mm(o);if(f!==null){f.flags&=-257,Fm(f,o,a,s,e),f.mode&1&&km(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var y=new Set;y.add(l),e.updateQueue=y}else p.add(l);break e}else{if(!(e&1)){km(s,u,e),fp();break e}l=Error(O(426))}}else if(be&&a.mode&1){var v=Mm(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Fm(v,o,a,s,e),Yf(Js(l,a));break e}}s=l=Js(l,a),tt!==4&&(tt=2),Ko===null?Ko=[s]:Ko.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=n1(s,l,e);Em(s,m);break e;case 1:a=l;var g=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(sr===null||!sr.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=i1(s,a,e);Em(s,x);break e}}s=s.return}while(s!==null)}E1(n)}catch(w){e=w,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function x1(){var t=Cu.current;return Cu.current=Eu,t===null?Eu:t}function fp(){(tt===0||tt===3||tt===2)&&(tt=4),at===null||!(Yr&268435455)&&!(uc&268435455)||Yi(at,mt)}function Ru(t,e){var n=ge;ge|=2;var i=x1();(at!==t||mt!==e)&&(fi=null,Gr(t,e));do try{oC();break}catch(r){v1(t,r)}while(!0);if(Kf(),ge=n,Cu.current=i,Je!==null)throw Error(O(261));return at=null,mt=0,tt}function oC(){for(;Je!==null;)w1(Je)}function aC(){for(;Je!==null&&!Lw();)w1(Je)}function w1(t){var e=S1(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,e===null?E1(t):Je=e,lp.current=null}function E1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eC(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Je=null;return}}else if(n=QE(n,e,Kt),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);tt===0&&(tt=5)}function Mr(t,e,n){var i=Te,r=mn.transition;try{mn.transition=null,Te=1,lC(t,e,n,i)}finally{mn.transition=r,Te=i}return null}function lC(t,e,n,i){do Gs();while(Hi!==null);if(ge&6)throw Error(O(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Vw(t,s),t===at&&(Je=at=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vl||(vl=!0,T1(au,function(){return Gs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mn.transition,mn.transition=null;var o=Te;Te=1;var a=ge;ge|=4,lp.current=null,nC(t,n),m1(n,t),kE(wd),uu=!!xd,wd=xd=null,t.current=n,iC(n),Aw(),ge=a,Te=o,mn.transition=s}else t.current=n;if(vl&&(vl=!1,Hi=t,Tu=r),s=t.pendingLanes,s===0&&(sr=null),Dw(n.stateNode),Yt(t,Ze()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Su)throw Su=!1,t=Wd,Wd=null,t;return Tu&1&&t.tag!==0&&Gs(),s=t.pendingLanes,s&1?t===Vd?Ho++:(Ho=0,Vd=t):Ho=0,_r(),null}function Gs(){if(Hi!==null){var t=n_(Tu),e=mn.transition,n=Te;try{if(mn.transition=null,Te=16>t?16:t,Hi===null)var i=!1;else{if(t=Hi,Hi=null,Tu=0,ge&6)throw Error(O(331));var r=ge;for(ge|=4,V=t.current;V!==null;){var s=V,o=s.child;if(V.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(V=u;V!==null;){var c=V;switch(c.tag){case 0:case 11:case 15:Zo(8,c,s)}var h=c.child;if(h!==null)h.return=c,V=h;else for(;V!==null;){c=V;var d=c.sibling,f=c.return;if(f1(c),c===u){V=null;break}if(d!==null){d.return=f,V=d;break}V=f}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}V=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,V=o;else e:for(;V!==null;){if(s=V,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zo(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,V=m;break e}V=s.return}}var g=t.current;for(V=g;V!==null;){o=V;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,V=_;else e:for(o=g;V!==null;){if(a=V,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lc(9,a)}}catch(w){Be(a,a.return,w)}if(a===o){V=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,V=x;break e}V=a.return}}if(ge=r,_r(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(ec,t)}catch{}i=!0}return i}finally{Te=n,mn.transition=e}}return!1}function Um(t,e,n){e=Js(n,e),e=n1(t,e,1),t=rr(t,e,1),e=Dt(),t!==null&&(Ga(t,1,e),Yt(t,e))}function Be(t,e,n){if(t.tag===3)Um(t,t,n);else for(;e!==null;){if(e.tag===3){Um(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(sr===null||!sr.has(i))){t=Js(n,t),t=i1(e,t,1),e=rr(e,t,1),t=Dt(),e!==null&&(Ga(e,1,t),Yt(e,t));break}}e=e.return}}function uC(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&n,at===t&&(mt&n)===n&&(tt===4||tt===3&&(mt&130023424)===mt&&500>Ze()-cp?Gr(t,0):up|=n),Yt(t,e)}function C1(t,e){e===0&&(t.mode&1?(e=ul,ul<<=1,!(ul&130023424)&&(ul=4194304)):e=1);var n=Dt();t=Ri(t,e),t!==null&&(Ga(t,e,n),Yt(t,n))}function cC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),C1(t,n)}function hC(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(O(314))}i!==null&&i.delete(e),C1(t,n)}var S1;S1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bt.current)Xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xt=!1,JE(t,e,n);Xt=!!(t.flags&131072)}else Xt=!1,be&&e.flags&1048576&&k_(e,mu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Kl(t,e),t=e.pendingProps;var r=Zs(e,kt.current);Ns(e,n),r=ip(null,e,i,t,r,n);var s=rp();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(i)?(s=!0,pu(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Jf(e),r.updater=ac,e.stateNode=r,r._reactInternals=e,Fd(e,i,t,n),e=Ad(null,e,i,!0,s,n)):(e.tag=0,be&&s&&Bf(e),bt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Kl(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=fC(i),t=Mn(i,t),r){case 0:e=Ld(null,e,i,t,n);break e;case 1:e=Am(null,e,i,t,n);break e;case 11:e=Pm(null,e,i,t,n);break e;case 14:e=Lm(null,e,i,Mn(i.type,t),n);break e}throw Error(O(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Mn(i,r),Ld(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Mn(i,r),Am(t,e,i,r,n);case 3:e:{if(a1(e),t===null)throw Error(O(387));i=e.pendingProps,s=e.memoizedState,r=s.element,b_(t,e),vu(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Js(Error(O(423)),e),e=bm(t,e,i,n,r);break e}else if(i!==r){r=Js(Error(O(424)),e),e=bm(t,e,i,n,r);break e}else for(Qt=ir(e.stateNode.containerInfo.firstChild),tn=e,be=!0,Pn=null,n=L_(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ks(),i===r){e=Ii(t,e,n);break e}bt(t,e,i,n)}e=e.child}return e;case 5:return O_(e),t===null&&Id(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Ed(i,r)?o=null:s!==null&&Ed(i,s)&&(e.flags|=32),o1(t,e),bt(t,e,o,n),e.child;case 6:return t===null&&Id(e),null;case 13:return l1(t,e,n);case 4:return Qf(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Hs(e,null,i,n):bt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Mn(i,r),Pm(t,e,i,r,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ie(yu,i._currentValue),i._currentValue=o,s!==null)if(bn(s.value,o)){if(s.children===r.children&&!Bt.current){e=Ii(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=xi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),kd(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(O(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),kd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}bt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ns(e,n),r=_n(r),i=i(r),e.flags|=1,bt(t,e,i,n),e.child;case 14:return i=e.type,r=Mn(i,e.pendingProps),r=Mn(i.type,r),Lm(t,e,i,r,n);case 15:return r1(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Mn(i,r),Kl(t,e),e.tag=1,$t(i)?(t=!0,pu(e)):t=!1,Ns(e,n),t1(e,i,r),Fd(e,i,r,n),Ad(null,e,i,!0,t,n);case 19:return u1(t,e,n);case 22:return s1(t,e,n)}throw Error(O(156,e.tag))};function T1(t,e){return J0(t,e)}function dC(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,e,n,i){return new dC(t,e,n,i)}function pp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fC(t){if(typeof t=="function")return pp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Af)return 11;if(t===bf)return 14}return 2}function ar(t,e){var n=t.alternate;return n===null?(n=pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jl(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")pp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vs:return jr(n.children,r,s,e);case Lf:o=8,r|=8;break;case ed:return t=pn(12,n,e,r|2),t.elementType=ed,t.lanes=s,t;case td:return t=pn(13,n,e,r),t.elementType=td,t.lanes=s,t;case nd:return t=pn(19,n,e,r),t.elementType=nd,t.lanes=s,t;case O0:return cc(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case A0:o=10;break e;case b0:o=9;break e;case Af:o=11;break e;case bf:o=14;break e;case Ui:o=16,i=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=pn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function jr(t,e,n,i){return t=pn(7,t,i,e),t.lanes=n,t}function cc(t,e,n,i){return t=pn(22,t,i,e),t.elementType=O0,t.lanes=n,t.stateNode={isHidden:!1},t}function yh(t,e,n){return t=pn(6,t,null,e),t.lanes=n,t}function _h(t,e,n){return e=pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pC(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jc(0),this.expirationTimes=Jc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jc(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function gp(t,e,n,i,r,s,o,a,l){return t=new pC(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=pn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jf(s),t}function gC(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_s,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function R1(t){if(!t)return dr;t=t._reactInternals;e:{if(Jr(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if($t(n))return R_(t,n,e)}return e}function I1(t,e,n,i,r,s,o,a,l){return t=gp(n,i,!0,t,r,s,o,a,l),t.context=R1(null),n=t.current,i=Dt(),r=or(n),s=xi(i,r),s.callback=e??null,rr(n,s,r),t.current.lanes=r,Ga(t,r,i),Yt(t,i),t}function hc(t,e,n,i){var r=e.current,s=Dt(),o=or(r);return n=R1(n),e.context===null?e.context=n:e.pendingContext=n,e=xi(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=rr(r,e,o),t!==null&&(An(t,r,o,s),$l(t,r,o)),o}function Iu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mp(t,e){Xm(t,e),(t=t.alternate)&&Xm(t,e)}function mC(){return null}var k1=typeof reportError=="function"?reportError:function(t){console.error(t)};function yp(t){this._internalRoot=t}dc.prototype.render=yp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));hc(t,e,null,null)};dc.prototype.unmount=yp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zr(function(){hc(null,t,null,null)}),e[Ti]=null}};function dc(t){this._internalRoot=t}dc.prototype.unstable_scheduleHydration=function(t){if(t){var e=s_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$i.length&&e!==0&&e<$i[n].priority;n++);$i.splice(n,0,t),n===0&&a_(t)}};function _p(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bm(){}function yC(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Iu(o);s.call(u)}}var o=I1(e,i,t,0,null,!1,!1,"",Bm);return t._reactRootContainer=o,t[Ti]=o.current,ca(t.nodeType===8?t.parentNode:t),Zr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Iu(l);a.call(u)}}var l=gp(t,0,!1,null,null,!1,!1,"",Bm);return t._reactRootContainer=l,t[Ti]=l.current,ca(t.nodeType===8?t.parentNode:t),Zr(function(){hc(e,l,n,i)}),l}function pc(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Iu(o);a.call(l)}}hc(e,o,t,r)}else o=yC(n,e,t,r,i);return Iu(o)}i_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zo(e.pendingLanes);n!==0&&(zf(e,n|1),Yt(e,Ze()),!(ge&6)&&(Qs=Ze()+500,_r()))}break;case 13:Zr(function(){var i=Ri(t,1);if(i!==null){var r=Dt();An(i,t,1,r)}}),mp(t,1)}};Nf=function(t){if(t.tag===13){var e=Ri(t,134217728);if(e!==null){var n=Dt();An(e,t,134217728,n)}mp(t,134217728)}};r_=function(t){if(t.tag===13){var e=or(t),n=Ri(t,e);if(n!==null){var i=Dt();An(n,t,e,i)}mp(t,e)}};s_=function(){return Te};o_=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};dd=function(t,e,n){switch(e){case"input":if(sd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=rc(i);if(!r)throw Error(O(90));z0(i),sd(i,r)}}}break;case"textarea":G0(t,n);break;case"select":e=n.value,e!=null&&bs(t,!!n.multiple,e,!1)}};$0=hp;Y0=Zr;var _C={usingClientEntryPoint:!1,Events:[Wa,Cs,rc,X0,B0,hp]},ko={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vC={bundleType:ko.bundleType,version:ko.version,rendererPackageName:ko.rendererPackageName,rendererConfig:ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=H0(t),t===null?null:t.stateNode},findFiberByHostInstance:ko.findFiberByHostInstance||mC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xl.isDisabled&&xl.supportsFiber)try{ec=xl.inject(vC),Zn=xl}catch{}}sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_C;sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_p(e))throw Error(O(200));return gC(t,e,null,n)};sn.createRoot=function(t,e){if(!_p(t))throw Error(O(299));var n=!1,i="",r=k1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=gp(t,1,!1,null,null,n,!1,i,r),t[Ti]=e.current,ca(t.nodeType===8?t.parentNode:t),new yp(e)};sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=H0(e),t=t===null?null:t.stateNode,t};sn.flushSync=function(t){return Zr(t)};sn.hydrate=function(t,e,n){if(!fc(e))throw Error(O(200));return pc(null,t,e,!0,n)};sn.hydrateRoot=function(t,e,n){if(!_p(t))throw Error(O(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=k1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=I1(e,null,t,1,n??null,r,!1,s,o),t[Ti]=e.current,ca(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new dc(e)};sn.render=function(t,e,n){if(!fc(e))throw Error(O(200));return pc(null,t,e,!1,n)};sn.unmountComponentAtNode=function(t){if(!fc(t))throw Error(O(40));return t._reactRootContainer?(Zr(function(){pc(null,null,t,!1,function(){t._reactRootContainer=null,t[Ti]=null})}),!0):!1};sn.unstable_batchedUpdates=hp;sn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!fc(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return pc(t,e,n,!1,i)};sn.version="18.3.1-next-f1338f8080-20240426";function M1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(M1)}catch(t){console.error(t)}}M1(),M0.exports=sn;var xC=M0.exports,$m=xC;Jh.createRoot=$m.createRoot,Jh.hydrateRoot=$m.hydrateRoot;const wC="/nyc-urban-heat/icons/NYC%20Urban%20Heat%20Portal.svg",EC=()=>Q.jsxs("nav",{className:"flex justify-between items-center px-6 w-full h-[3.125rem] bg-[#333]",children:[Q.jsx("img",{src:wC,alt:"Urban Heat logo",className:""}),Q.jsxs("div",{className:"flex gap-[6rem]",children:[Q.jsx("button",{className:"font-bold text-[#7E7E7E] hover:text-[#FF7E6C]",children:"Map"}),Q.jsx("button",{className:"font-bold text-[#7E7E7E] hover:text-[#FF7E6C]",children:"Resources"}),Q.jsx("button",{className:"font-bold text-[#7E7E7E] hover:text-[#FF7E6C]",children:"About"}),Q.jsx("button",{className:"font-bold text-[#7E7E7E] hover:text-[#FF7E6C]",children:"Download"})]})]});class ti{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const eo={PROPERTYCHANGE:"propertychange"};class vp{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function CC(t,e,n){let i,r;n=n||Hn;let s=0,o=t.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+n(t[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function Hn(t,e){return t>e?1:t<e?-1:0}function xp(t,e,n){if(t[0]<=e)return 0;const i=t.length;if(e<=t[i-1])return i-1;if(typeof n=="function"){for(let r=1;r<i;++r){const s=t[r];if(s===e)return r;if(s<e)return n(e,t[r-1],s)>0?r-1:r}return i-1}if(n>0){for(let r=1;r<i;++r)if(t[r]<e)return r-1;return i-1}if(n<0){for(let r=1;r<i;++r)if(t[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return i-1}function SC(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function qn(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let r=0;r<i;r++)t[t.length]=n[r]}function vr(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function TC(t,e,n){const i=e||Hn;return t.every(function(r,s){if(s===0)return!0;const o=i(t[s-1],r);return!(o>0||o===0)})}function va(){return!0}function gc(){return!1}function to(){}function F1(t){let e=!1,n,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!vr(s,i))&&(e=!0,r=this,i=s,n=t.apply(this,arguments)),n}}function xa(t){function e(){let n;try{n=t()}catch(i){return Promise.reject(i)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function Ua(t){for(const e in t)delete t[e]}function fr(t){let e;for(e in t)return!1;return!e}class mc extends vp{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(n)||r.push(n)}dispatchEvent(e){const n=typeof e=="string",i=n?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=n?new ti(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let u=0,c=r.length;u<c;++u)if("handleEvent"in r[u]?l=r[u].handleEvent(s):l=r[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let u=a[i];for(delete a[i];u--;)this.removeEventListener(i,to);delete o[i]}return l}disposeInternal(){this.listeners_&&Ua(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(n);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=to,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}const q={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function pe(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){const o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function ku(t,e,n,i){return pe(t,e,n,i,!0)}function Pe(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Ua(t))}class Xa extends mc{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(q.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=pe(this,e[s],n);return r}return pe(this,e,n)}onceInternal(e,n){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=ku(this,e[s],n)}else i=ku(this,e,n);return n.ol_key=i,i}unInternal(e,n){const i=n.ol_key;if(i)RC(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],n);else this.removeEventListener(e,n)}}Xa.prototype.on;Xa.prototype.once;Xa.prototype.un;function RC(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)Pe(t[e]);else Pe(t)}function H(){throw new Error("Unimplemented abstract method.")}let IC=0;function ee(t){return t.ol_uid||(t.ol_uid=String(++IC))}class Ym extends ti{constructor(e,n,i){super(e),this.key=n,this.oldValue=i}}class ni extends Xa{constructor(e){super(),this.on,this.once,this.un,ee(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Ym(i,e,n)),i=eo.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Ym(i,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,i){const r=this.values_||(this.values_={});if(i)r[e]=n;else{const s=r[e];r[e]=n,s!==n&&this.notify(e,s)}}setProperties(e,n){for(const i in e)this.set(i,e[i],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],fr(this.values_)&&(this.values_=null),n||this.notify(e,i)}}}const jt={ADD:"add",REMOVE:"remove"},Zm={LENGTH:"length"};class wl extends ti{constructor(e,n,i){super(e),this.element=n,this.index=i}}class Xn extends ni{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,i=e.length;n<i;++n)this.push(e[n]);return this}forEach(e){const n=this.array_;for(let i=0,r=n.length;i<r;++i)e(n[i],i,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Zm.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new wl(jt.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){const n=this.array_;for(let i=0,r=n.length;i<r;++i)if(n[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new wl(jt.REMOVE,n,e)),n}setAt(e,n){const i=this.getLength();if(e>=i){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);const r=this.array_[e];this.array_[e]=n,this.dispatchEvent(new wl(jt.REMOVE,r,e)),this.dispatchEvent(new wl(jt.ADD,n,e))}updateLength_(){this.set(Zm.LENGTH,this.array_.length)}assertUnique_(e,n){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==n)throw new Error("Duplicate item added to a unique collection")}}const Se={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function ce(t,e){if(!t)throw new Error(e)}function Qe(t,e,n){return Math.min(Math.max(t,e),n)}function kC(t,e,n,i,r,s){const o=r-n,a=s-i;if(o!==0||a!==0){const l=((t-n)*o+(e-i)*a)/(o*o+a*a);l>1?(n=r,i=s):l>0&&(n+=o*l,i+=a*l)}return Wr(t,e,n,i)}function Wr(t,e,n,i){const r=n-t,s=i-e;return r*r+s*s}function MC(t){const e=t.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(t[i][i]);for(let a=i+1;a<e;a++){const l=Math.abs(t[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=t[r];t[r]=t[i],t[i]=o;for(let a=i+1;a<e;a++){const l=-t[a][i]/t[i][i];for(let u=i;u<e+1;u++)i==u?t[a][u]=0:t[a][u]+=l*t[i][u]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}function Ql(t){return t*Math.PI/180}function js(t,e){const n=t%e;return n*e<0?n+e:n}function Ht(t,e,n){return t+n*(e-t)}function wp(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function El(t,e){return Math.floor(wp(t,e))}function Cl(t,e){return Math.ceil(wp(t,e))}class P1 extends ni{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[Se.OPACITY]=e.opacity!==void 0?e.opacity:1,ce(typeof n[Se.OPACITY]=="number","Layer opacity must be a number"),n[Se.VISIBLE]=e.visible!==void 0?e.visible:!0,n[Se.Z_INDEX]=e.zIndex,n[Se.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[Se.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[Se.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[Se.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const n=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return n.opacity=Qe(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return H()}getLayerStatesArray(e){return H()}getExtent(){return this.get(Se.EXTENT)}getMaxResolution(){return this.get(Se.MAX_RESOLUTION)}getMinResolution(){return this.get(Se.MIN_RESOLUTION)}getMinZoom(){return this.get(Se.MIN_ZOOM)}getMaxZoom(){return this.get(Se.MAX_ZOOM)}getOpacity(){return this.get(Se.OPACITY)}getSourceState(){return H()}getVisible(){return this.get(Se.VISIBLE)}getZIndex(){return this.get(Se.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Se.EXTENT,e)}setMaxResolution(e){this.set(Se.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Se.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Se.MAX_ZOOM,e)}setMinZoom(e){this.set(Se.MIN_ZOOM,e)}setOpacity(e){ce(typeof e=="number","Layer opacity must be a number"),this.set(Se.OPACITY,e)}setVisible(e){this.set(Se.VISIBLE,e)}setZIndex(e){this.set(Se.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const gn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},$e={ANIMATING:0,INTERACTING:1},kn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},L1=42,Ep=256,yc={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Cp{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||yc[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Ba=6378137,Fs=Math.PI*Ba,FC=[-Fs,-Fs,Fs,Fs],PC=[-180,-85,180,85],Sl=Ba*Math.log(Math.tan(Math.PI/2));class ss extends Cp{constructor(e){super({code:e,units:"m",extent:FC,global:!0,worldExtent:PC,getPointResolution:function(n,i){return n/Math.cosh(i[1]/Ba)}})}}const Km=[new ss("EPSG:3857"),new ss("EPSG:102100"),new ss("EPSG:102113"),new ss("EPSG:900913"),new ss("http://www.opengis.net/def/crs/EPSG/0/3857"),new ss("http://www.opengis.net/gml/srs/epsg.xml#3857")];function LC(t,e,n){const i=t.length;n=n>1?n:2,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let r=0;r<i;r+=n){e[r]=Fs*t[r]/180;let s=Ba*Math.log(Math.tan(Math.PI*(+t[r+1]+90)/360));s>Sl?s=Sl:s<-Sl&&(s=-Sl),e[r+1]=s}return e}function AC(t,e,n){const i=t.length;n=n>1?n:2,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let r=0;r<i;r+=n)e[r]=180*t[r]/Fs,e[r+1]=360*Math.atan(Math.exp(t[r+1]/Ba))/Math.PI-90;return e}const bC=6378137,Hm=[-180,-90,180,90],OC=Math.PI*bC/180;class Sr extends Cp{constructor(e,n){super({code:e,units:"degrees",extent:Hm,axisOrientation:n,global:!0,metersPerUnit:OC,worldExtent:Hm})}}const qm=[new Sr("CRS:84"),new Sr("EPSG:4326","neu"),new Sr("urn:ogc:def:crs:OGC:1.3:CRS84"),new Sr("urn:ogc:def:crs:OGC:2:84"),new Sr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Sr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Sr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Bd={};function DC(t){return Bd[t]||Bd[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function zC(t,e){Bd[t]=e}let Ws={};function Mu(t,e,n){const i=t.getCode(),r=e.getCode();i in Ws||(Ws[i]={}),Ws[i][r]=n}function NC(t,e){let n;return t in Ws&&e in Ws[t]&&(n=Ws[t][e]),n}const it={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function $d(t){const e=xn();for(let n=0,i=t.length;n<i;++n)qo(e,t[n]);return e}function GC(t,e,n){const i=Math.min.apply(null,t),r=Math.min.apply(null,e),s=Math.max.apply(null,t),o=Math.max.apply(null,e);return ki(i,r,s,o,n)}function lr(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function A1(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Qr(t,e,n){let i,r;return e<t[0]?i=t[0]-e:t[2]<e?i=e-t[2]:i=0,n<t[1]?r=t[1]-n:t[3]<n?r=n-t[3]:r=0,i*i+r*r}function no(t,e){return Sp(t,e[0],e[1])}function br(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Sp(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function Yd(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],o=e[0],a=e[1];let l=it.UNKNOWN;return o<n?l=l|it.LEFT:o>r&&(l=l|it.RIGHT),a<i?l=l|it.BELOW:a>s&&(l=l|it.ABOVE),l===it.UNKNOWN&&(l=it.INTERSECTING),l}function xn(){return[1/0,1/0,-1/0,-1/0]}function ki(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function fo(t){return ki(1/0,1/0,-1/0,-1/0,t)}function b1(t,e){const n=t[0],i=t[1];return ki(n,i,n,i,e)}function Tp(t,e,n,i,r){const s=fo(r);return D1(s,t,e,n,i)}function io(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function O1(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function qo(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function D1(t,e,n,i,r){for(;n<i;n+=r)jC(t,e[n],e[n+1]);return t}function jC(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function z1(t,e){let n;return n=e(_c(t)),n||(n=e(vc(t)),n)||(n=e(xc(t)),n)||(n=e(Li(t)),n)?n:!1}function Zd(t){let e=0;return $a(t)||(e=Ce(t)*Rt(t)),e}function _c(t){return[t[0],t[1]]}function vc(t){return[t[2],t[1]]}function pr(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function WC(t,e){let n;if(e==="bottom-left")n=_c(t);else if(e==="bottom-right")n=vc(t);else if(e==="top-left")n=Li(t);else if(e==="top-right")n=xc(t);else throw new Error("Invalid corner");return n}function Kd(t,e,n,i,r){const[s,o,a,l,u,c,h,d]=Hd(t,e,n,i);return ki(Math.min(s,a,u,h),Math.min(o,l,c,d),Math.max(s,a,u,h),Math.max(o,l,c,d),r)}function Hd(t,e,n,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=r*o,u=r*a,c=s*o,h=s*a,d=t[0],f=t[1];return[d-l+h,f-u-c,d-l-h,f-u+c,d+l-h,f+u+c,d+l+h,f+u-c,d-l+h,f-u-c]}function Rt(t){return t[3]-t[1]}function Vr(t,e,n){const i=n||xn();return He(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):fo(i),i}function Li(t){return[t[0],t[3]]}function xc(t){return[t[2],t[3]]}function Ce(t){return t[2]-t[0]}function He(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function $a(t){return t[2]<t[0]||t[3]<t[1]}function VC(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function UC(t,e,n){let i=!1;const r=Yd(t,e),s=Yd(t,n);if(r===it.INTERSECTING||s===it.INTERSECTING)i=!0;else{const o=t[0],a=t[1],l=t[2],u=t[3],c=e[0],h=e[1],d=n[0],f=n[1],p=(f-h)/(d-c);let y,v;s&it.ABOVE&&!(r&it.ABOVE)&&(y=d-(f-u)/p,i=y>=o&&y<=l),!i&&s&it.RIGHT&&!(r&it.RIGHT)&&(v=f-(d-l)*p,i=v>=a&&v<=u),!i&&s&it.BELOW&&!(r&it.BELOW)&&(y=d-(f-a)/p,i=y>=o&&y<=l),!i&&s&it.LEFT&&!(r&it.LEFT)&&(v=f-(d-o)*p,i=v>=a&&v<=u)}return i}function N1(t,e,n,i){if($a(t))return fo(n);let r=[];r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]],e(r,r,2);const s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return GC(s,o,n)}function G1(t,e){const n=e.getExtent(),i=pr(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const r=Ce(n),o=Math.floor((i[0]-n[0])/r)*r;t[0]-=o,t[2]-=o}return t}function j1(t,e,n){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];G1(t,e);const r=Ce(i);if(Ce(t)>r&&!n)return[[i[0],t[1],i[2],t[3]]];if(t[0]<i[0])return[[t[0]+r,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-r,t[3]]]}return[t]}function XC(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function Fu(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function Rp(t,e){const n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,s=t[1]*n+t[0]*i;return t[0]=r,t[1]=s,t}function BC(t,e){return t[0]*=e,t[1]*=e,t}function Ip(t,e){if(e.canWrapX()){const n=Ce(e.getExtent()),i=$C(t,e,n);i&&(t[0]-=i*n)}return t}function $C(t,e,n){const i=e.getExtent();let r=0;return e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||Ce(i),r=Math.floor((t[0]-i[0])/n)),r}const YC=63710088e-1;function Jm(t,e,n){n=n||YC;const i=Ql(t[1]),r=Ql(e[1]),s=(r-i)/2,o=Ql(e[0]-t[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function W1(...t){console.warn(...t)}let qd=!0;function V1(t){qd=!1}function kp(t,e){if(e!==void 0){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];e=e}else e=t.slice();return e}function U1(t,e){if(e!==void 0&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function ZC(t){zC(t.getCode(),t),Mu(t,t,kp)}function KC(t){t.forEach(ZC)}function Re(t){return typeof t=="string"?DC(t):t||null}function Qm(t,e,n,i){t=Re(t);let r;const s=t.getPointResolutionFunc();if(s)r=s(e,n);else{const o=t.getUnits();if(o=="degrees"&&!i||i=="degrees")r=e;else{const a=po(t,Re("EPSG:4326"));if(a===U1&&o!=="degrees")r=e*t.getMetersPerUnit();else{let u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];u=a(u,u,2);const c=Jm(u.slice(0,2),u.slice(2,4)),h=Jm(u.slice(4,6),u.slice(6,8));r=(c+h)/2}const l=t.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function ey(t){KC(t),t.forEach(function(e){t.forEach(function(n){e!==n&&Mu(e,n,kp)})})}function HC(t,e,n,i){t.forEach(function(r){e.forEach(function(s){Mu(r,s,n),Mu(s,r,i)})})}function Mp(t,e){return t?typeof t=="string"?Re(t):t:Re(e)}function ty(t,e){return V1(),wc(t,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function Zi(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||po(t,e)===kp)&&n}function po(t,e){const n=t.getCode(),i=e.getCode();let r=NC(n,i);return r||(r=U1),r}function ro(t,e){const n=Re(t),i=Re(e);return po(n,i)}function wc(t,e,n){return ro(e,n)(t,void 0,t.length)}function X1(t,e,n,i){const r=ro(e,n);return N1(t,r,void 0)}let wn=null;function qC(t){wn=Re(t)}function wa(){return wn}function JC(){qC("EPSG:4326")}function Jd(t,e){return wn?wc(t,e,wn):t}function di(t,e){return wn?wc(t,wn,e):(qd&&!Fu(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(qd=!1,W1("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Pu(t,e){return wn?X1(t,e,wn):t}function Or(t,e){return wn?X1(t,wn,e):t}function QC(t,e){if(!wn)return t;const n=Re(e).getMetersPerUnit(),i=wn.getMetersPerUnit();return n&&i?t*n/i:t}function e2(){ey(Km),ey(qm),HC(qm,Km,LC,AC)}e2();function ny(t,e,n){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,u=e?0:s[1]*r,c=a?a[0]:0,h=a?a[1]:0;let d=t[0]+l/2+c,f=t[2]-l/2+c,p=t[1]+u/2+h,y=t[3]-u/2+h;d>f&&(d=(f+d)/2,f=d),p>y&&(p=(y+p)/2,y=p);let v=Qe(i[0],d,f),m=Qe(i[1],p,y);if(o&&n&&r){const g=30*r;v+=-g*Math.log(1+Math.max(0,d-i[0])/g)+g*Math.log(1+Math.max(0,i[0]-f)/g),m+=-g*Math.log(1+Math.max(0,p-i[1])/g)+g*Math.log(1+Math.max(0,i[1]-y)/g)}return[v,m]}}function t2(t){return t}function Fp(t,e,n,i){const r=Ce(e)/n[0],s=Rt(e)/n[1];return i?Math.min(t,Math.max(r,s)):Math.min(t,Math.min(r,s))}function Pp(t,e,n){let i=Math.min(t,e);const r=50;return i*=Math.log(1+r*Math.max(0,t/e-1))/r+1,n&&(i=Math.max(i,n),i/=Math.log(1+r*Math.max(0,n/t-1))/r+1),Qe(i,n/2,e*2)}function n2(t,e,n,i){return e=e!==void 0?e:!0,function(r,s,o,a){if(r!==void 0){const l=t[0],u=t[t.length-1],c=n?Fp(l,n,o,i):l;if(a)return e?Pp(r,c,u):Qe(r,u,c);const h=Math.min(c,r),d=Math.floor(xp(t,h,s));return t[d]>c&&d<t.length-1?t[d+1]:t[d]}}}function i2(t,e,n,i,r,s){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(o,a,l,u){if(o!==void 0){const c=r?Fp(e,r,l,s):e;if(u)return i?Pp(o,c,n):Qe(o,n,c);const h=1e-9,d=Math.ceil(Math.log(e/c)/Math.log(t)-h),f=-a*(.5-h)+.5,p=Math.min(c,o),y=Math.floor(Math.log(e/p)/Math.log(t)+f),v=Math.max(d,y),m=e/Math.pow(t,v);return Qe(m,n,c)}}}function iy(t,e,n,i,r){return n=n!==void 0?n:!0,function(s,o,a,l){if(s!==void 0){const u=i?Fp(t,i,a,r):t;return!n||!l?Qe(s,e,u):Pp(s,u,e)}}}function Lp(t){if(t!==void 0)return 0}function ry(t){if(t!==void 0)return t}function r2(t){const e=2*Math.PI/t;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n}}function s2(t){const e=Ql(5);return function(n,i){return i||n===void 0?n:Math.abs(n)<=e?0:n}}function B1(t){return Math.pow(t,3)}function go(t){return 1-B1(1-t)}function o2(t){return 3*t*t-2*t*t*t}function a2(t){return t}const $1=new Array(6);function yn(){return[1,0,0,1,0,0]}function sy(t){return bp(t,1,0,0,1,0,0)}function Ap(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=e[0],u=e[1],c=e[2],h=e[3],d=e[4],f=e[5];return t[0]=n*l+r*u,t[1]=i*l+s*u,t[2]=n*c+r*h,t[3]=i*c+s*h,t[4]=n*d+r*f+o,t[5]=i*d+s*f+a,t}function bp(t,e,n,i,r,s,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t}function l2(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function st(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function vh(t,e,n){return Ap(t,bp($1,e,0,0,n,0,0))}function u2(t,e,n){return Ap(t,bp($1,1,0,0,1,e,n))}function Mi(t,e,n,i,r,s,o,a){const l=Math.sin(s),u=Math.cos(s);return t[0]=i*u,t[1]=r*l,t[2]=-i*l,t[3]=r*u,t[4]=o*i*u-a*i*l+e,t[5]=o*r*l+a*r*u+n,t}function Y1(t,e){const n=c2(e);ce(n!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return t[0]=o/n,t[1]=-r/n,t[2]=-s/n,t[3]=i/n,t[4]=(s*l-o*a)/n,t[5]=-(i*l-r*a)/n,t}function c2(t){return t[0]*t[3]-t[1]*t[2]}const oy=[1e6,1e6,1e6,1e6,2,2];function h2(t){return"matrix("+t.map((n,i)=>Math.round(n*oy[i])/oy[i]).join(", ")+")"}function ur(t,e,n,i,r,s){s=s||[];let o=0;for(let a=e;a<n;a+=i){const l=t[a],u=t[a+1];s[o++]=r[0]*l+r[2]*u+r[4],s[o++]=r[1]*l+r[3]*u+r[5]}return s&&s.length!=o&&(s.length=o),s}function Z1(t,e,n,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),u=s[0],c=s[1];let h=0;for(let d=e;d<n;d+=i){const f=t[d]-u,p=t[d+1]-c;o[h++]=u+f*a-p*l,o[h++]=c+f*l+p*a;for(let y=d+2;y<d+i;++y)o[h++]=t[y]}return o&&o.length!=h&&(o.length=h),o}function d2(t,e,n,i,r,s,o,a){a=a||[];const l=o[0],u=o[1];let c=0;for(let h=e;h<n;h+=i){const d=t[h]-l,f=t[h+1]-u;a[c++]=l+r*d,a[c++]=u+s*f;for(let p=h+2;p<h+i;++p)a[c++]=t[p]}return a&&a.length!=c&&(a.length=c),a}function f2(t,e,n,i,r,s,o){o=o||[];let a=0;for(let l=e;l<n;l+=i){o[a++]=t[l]+r,o[a++]=t[l+1]+s;for(let u=l+2;u<l+i;++u)o[a++]=t[u]}return o&&o.length!=a&&(o.length=a),o}const ay=yn();class K1 extends ni{constructor(){super(),this.extent_=xn(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=F1((e,n,i)=>{if(!i)return this.getSimplifiedGeometry(n);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return H()}closestPointXY(e,n,i,r){return H()}containsXY(e,n){const i=this.getClosestPoint([e,n]);return i[0]===e&&i[1]===n}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return H()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&fo(n),this.extentRevision_=this.getRevision()}return VC(this.extent_,e)}rotate(e,n){H()}scale(e,n,i){H()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return H()}getType(){return H()}applyTransform(e){H()}intersectsExtent(e){return H()}translate(e,n){H()}transform(e,n){const i=Re(e),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),u=i.getWorldExtent(),c=Rt(u)/Rt(l);return Mi(ay,u[0],u[3],c,-c,0,0,0),ur(s,0,s.length,a,ay,o),ro(i,n)(s,o,a)}:ro(i,n);return this.applyTransform(r),this}}class es extends K1{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Tp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return H()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=ly(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){H()}setLayout(e,n,i){let r;if(e)r=ly(e);else{for(let s=0;s<i;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}r=n.length,e=ts(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();Z1(i,0,i.length,r,e,n,i),this.changed()}}scale(e,n,i){n===void 0&&(n=e),i||(i=pr(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();d2(r,0,r.length,s,e,n,i,r),this.changed()}}translate(e,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();f2(i,0,i.length,r,e,n,i),this.changed()}}}function ts(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function ly(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function p2(t,e,n){const i=t.getFlatCoordinates();if(!i)return null;const r=t.getStride();return ur(i,0,i.length,r,e,n)}function uy(t,e,n,i,r,s,o){const a=t[e],l=t[e+1],u=t[n]-a,c=t[n+1]-l;let h;if(u===0&&c===0)h=e;else{const d=((r-a)*u+(s-l)*c)/(u*u+c*c);if(d>1)h=n;else if(d>0){for(let f=0;f<i;++f)o[f]=Ht(t[e+f],t[n+f],d);o.length=i;return}else h=e}for(let d=0;d<i;++d)o[d]=t[h+d];o.length=i}function Op(t,e,n,i,r){let s=t[e],o=t[e+1];for(e+=i;e<n;e+=i){const a=t[e],l=t[e+1],u=Wr(s,o,a,l);u>r&&(r=u),s=a,o=l}return r}function Dp(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=Op(t,e,a,i,r),e=a}return r}function g2(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=Dp(t,e,a,i,r),e=a[a.length-1]}return r}function zp(t,e,n,i,r,s,o,a,l,u,c){if(e==n)return u;let h,d;if(r===0){if(d=Wr(o,a,t[e],t[e+1]),d<u){for(h=0;h<i;++h)l[h]=t[e+h];return l.length=i,d}return u}c=c||[NaN,NaN];let f=e+i;for(;f<n;)if(uy(t,f-i,f,i,o,a,c),d=Wr(o,a,c[0],c[1]),d<u){for(u=d,h=0;h<i;++h)l[h]=c[h];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(d)-Math.sqrt(u))/r|0,1);if(s&&(uy(t,n-i,e,i,o,a,c),d=Wr(o,a,c[0],c[1]),d<u)){for(u=d,h=0;h<i;++h)l[h]=c[h];l.length=i}return u}function Np(t,e,n,i,r,s,o,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=n.length;h<d;++h){const f=n[h];u=zp(t,e,f,i,r,s,o,a,l,u,c),e=f}return u}function m2(t,e,n,i,r,s,o,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=n.length;h<d;++h){const f=n[h];u=Np(t,e,f,i,r,s,o,a,l,u,c),e=f[f.length-1]}return u}function y2(t,e,n,i){for(let r=0,s=n.length;r<s;++r)t[e++]=n[r];return e}function Ec(t,e,n,i){for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0;a<i;++a)t[e++]=o[a]}return e}function Ya(t,e,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=Ec(t,e,n[o],i);r[s++]=l,e=l}return r.length=s,r}function H1(t,e,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=Ya(t,e,n[o],i,r[s]);l.length===0&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}function Cc(t,e,n,i,r,s,o){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)s[o++]=t[e],s[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[e,n-i];let c=0;for(;u.length>0;){const h=u.pop(),d=u.pop();let f=0;const p=t[d],y=t[d+1],v=t[h],m=t[h+1];for(let g=d+i;g<h;g+=i){const _=t[g],x=t[g+1],w=kC(_,x,p,y,v,m);w>f&&(c=g,f=w)}f>r&&(l[(c-e)/i]=1,d+i<c&&u.push(d,c),c+i<h&&u.push(c,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=t[e+h*i],s[o++]=t[e+h*i+1]);return o}function q1(t,e,n,i,r,s,o,a){for(let l=0,u=n.length;l<u;++l){const c=n[l];o=Cc(t,e,c,i,r,s,o),a.push(o),e=c}return o}function Fr(t,e){return e*Math.round(t/e)}function _2(t,e,n,i,r,s,o){if(e==n)return o;let a=Fr(t[e],r),l=Fr(t[e+1],r);e+=i,s[o++]=a,s[o++]=l;let u,c;do if(u=Fr(t[e],r),c=Fr(t[e+1],r),e+=i,e==n)return s[o++]=u,s[o++]=c,o;while(u==a&&c==l);for(;e<n;){const h=Fr(t[e],r),d=Fr(t[e+1],r);if(e+=i,h==u&&d==c)continue;const f=u-a,p=c-l,y=h-a,v=d-l;if(f*v==p*y&&(f<0&&y<f||f==y||f>0&&y>f)&&(p<0&&v<p||p==v||p>0&&v>p)){u=h,c=d;continue}s[o++]=u,s[o++]=c,a=u,l=c,u=h,c=d}return s[o++]=u,s[o++]=c,o}function Gp(t,e,n,i,r,s,o,a){for(let l=0,u=n.length;l<u;++l){const c=n[l];o=_2(t,e,c,i,r,s,o),a.push(o),e=c}return o}function v2(t,e,n,i,r,s,o,a){for(let l=0,u=n.length;l<u;++l){const c=n[l],h=[];o=Gp(t,e,c,i,r,s,o,h),a.push(h),e=c[c.length-1]}return o}function qi(t,e,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<n;o+=i)r[s++]=t.slice(o,o+i);return r.length=s,r}function Ea(t,e,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=qi(t,e,l,i,r[s]),e=l}return r.length=s,r}function Qd(t,e,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=l.length===1&&l[0]===e?[]:Ea(t,e,l,i,r[s]),e=l[l.length-1]}return r.length=s,r}function J1(t,e,n,i){let r=0,s=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const a=t[e],l=t[e+1];r+=o*a-s*l,s=a,o=l}return r/2}function Q1(t,e,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=J1(t,e,a,i),e=a}return r}function x2(t,e,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=Q1(t,e,a,i),e=a[a.length-1]}return r}class Ca extends es{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new Ca(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,i,r){return r<Qr(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Op(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,i,r))}getArea(){return J1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return qi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=Cc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new Ca(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ec(this.flatCoordinates,0,e,this.stride),this.changed()}}class Kr extends es{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new Kr(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,r){const s=this.flatCoordinates,o=Wr(e,n,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return b1(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Sp(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=y2(this.flatCoordinates,0,e,this.stride),this.changed()}}function w2(t,e,n,i,r){return!z1(r,function(o){return!Dr(t,e,n,i,o[0],o[1])})}function Dr(t,e,n,i,r,s){let o=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const u=t[e],c=t[e+1];l<=s?c>s&&(u-a)*(s-l)-(r-a)*(c-l)>0&&o++:c<=s&&(u-a)*(s-l)-(r-a)*(c-l)<0&&o--,a=u,l=c}return o!==0}function jp(t,e,n,i,r,s){if(n.length===0||!Dr(t,e,n[0],i,r,s))return!1;for(let o=1,a=n.length;o<a;++o)if(Dr(t,n[o-1],n[o],i,r,s))return!1;return!0}function E2(t,e,n,i,r,s){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(jp(t,e,l,i,r,s))return!0;e=l[l.length-1]}return!1}function Wp(t,e,n,i,r,s,o){let a,l,u,c,h,d,f;const p=r[s+1],y=[];for(let g=0,_=n.length;g<_;++g){const x=n[g];for(c=t[x-i],d=t[x-i+1],a=e;a<x;a+=i)h=t[a],f=t[a+1],(p<=d&&f<=p||d<=p&&p<=f)&&(u=(p-d)/(f-d)*(h-c)+c,y.push(u)),c=h,d=f}let v=NaN,m=-1/0;for(y.sort(Hn),c=y[0],a=1,l=y.length;a<l;++a){h=y[a];const g=Math.abs(h-c);g>m&&(u=(c+h)/2,jp(t,e,n,i,u,p)&&(v=u,m=g)),c=h}return isNaN(v)&&(v=r[s]),o?(o.push(v,p,m),o):[v,p,m]}function ev(t,e,n,i,r){let s=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];s=Wp(t,e,l,i,r,2*o,s),e=l[l.length-1]}return s}function tv(t,e,n,i,r){let s;for(e+=i;e<n;e+=i)if(s=r(t.slice(e-i,e),t.slice(e,e+i)),s)return s;return!1}function Sc(t,e,n,i,r){const s=D1(xn(),t,e,n,i);return He(r,s)?br(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:tv(t,e,n,i,function(o,a){return UC(r,o,a)}):!1}function C2(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){if(Sc(t,e,n[s],i,r))return!0;e=n[s]}return!1}function nv(t,e,n,i,r){return!!(Sc(t,e,n,i,r)||Dr(t,e,n,i,r[0],r[1])||Dr(t,e,n,i,r[0],r[3])||Dr(t,e,n,i,r[2],r[1])||Dr(t,e,n,i,r[2],r[3]))}function iv(t,e,n,i,r){if(!nv(t,e,n[0],i,r))return!1;if(n.length===1)return!0;for(let s=1,o=n.length;s<o;++s)if(w2(t,n[s-1],n[s],i,r)&&!Sc(t,n[s-1],n[s],i,r))return!1;return!0}function S2(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(iv(t,e,a,i,r))return!0;e=a[a.length-1]}return!1}function T2(t,e,n,i){for(;e<n-i;){for(let r=0;r<i;++r){const s=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=s}e+=i,n-=i}}function Vp(t,e,n,i){let r=0,s=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const a=t[e],l=t[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function Up(t,e,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=Vp(t,e,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function rv(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!Up(t,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function Lu(t,e,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=Vp(t,e,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&T2(t,e,a,i),e=a}return e}function ef(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s)e=Lu(t,e,n[s],i,r);return e}function sv(t,e){const n=[];let i=0,r=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],u=Vp(t,i,l,2);if(s===void 0&&(s=u),u===s)n.push(e.slice(r,o+1));else{if(n.length===0)continue;n[n.length-1].push(e[r])}r=o+1,i=l}return n}class Fi extends es{constructor(e,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,e),this.ends_=i):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?qn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Fi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,i,r){return r<Qr(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Dp(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Np(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,i,r))}containsXY(e,n){return jp(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return Q1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Lu(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,Ea(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=pr(this.getExtent());this.flatInteriorPoint_=Wp(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Kr(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Ca(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],u=new Ca(n.slice(s,l),e);r.push(u),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Up(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Lu(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=Gp(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,i),new Fi(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return iv(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Ya(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function cy(t){if($a(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],i=t[2],r=t[3],s=[e,n,e,r,i,r,i,n,e,n];return new Fi(s,"XY",[s.length])}const xh=0;class Vn extends ni{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Mp(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&V1(),e.center&&(e.center=di(e.center,this.projection_)),e.extent&&(e.extent=Or(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const n=Object.assign({},e);for(const a in kn)delete n[a];this.setProperties(n,!0);const i=I2(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=R2(e),s=i.constraint,o=k2(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-n[3]+n[1]-r[1]),a=s/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=di(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=di(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let r=0;for(;r<n&&!this.isDef();++r){const c=arguments[r];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(r===n){i&&Tl(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const u=[];for(;r<n;++r){const c=arguments[r],h={start:s,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||o2,callback:i};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),c.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),c.rotation!==void 0){h.sourceRotation=l;const d=js(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d,l=h.targetRotation}M2(h)?h.complete=!0:s+=h.duration,u.push(h)}this.animations_.push(u),this.setHint($e.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[$e.ANIMATING]>0}getInteracting(){return this.hints_[$e.INTERACTING]>0}cancelAnimations(){this.setHint($e.ANIMATING,-this.hints_[$e.ANIMATING]);let e;for(let n=0,i=this.animations_.length;n<i;++n){const r=this.animations_[n];if(r[0].callback&&Tl(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const u=e-l.start;let c=l.duration>0?u/l.duration:1;c>=1?(l.complete=!0,c=1):s=!1;const h=l.easing(c);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],p=l.targetCenter[0],y=l.targetCenter[1];this.nextCenter_=l.targetCenter;const v=d+h*(p-d),m=f+h*(y-f);this.targetCenter_=[v,m]}if(l.sourceResolution&&l.targetResolution){const d=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(p,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=h===1?js(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint($e.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&Tl(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-n[0],r[1]-n[1]],Rp(i,e-this.getRotation()),XC(i,n)),i}calculateCenterZoom(e,n){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=n[0]-e*(n[0]-r[0])/s,a=n[1]-e*(n[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(e){const n=this.viewportSize_;if(e){const i=n[0],r=n[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Jd(e,this.getProjection())}getCenterInternal(){return this.get(kn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const n=this.calculateExtentInternal(e);return Pu(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();ce(n,"The view center is not defined");const i=this.getResolution();ce(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return ce(r!==void 0,"The view rotation is not defined"),Kd(n,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(kn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(Or(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();const i=Ce(e)/n[0],r=Rt(e)/n[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/Math.log(e);return function(s){return n/Math.pow(e,s*r)}}getRotation(){return this.get(kn.ROTATION)}getValueForResolutionFunction(e){const n=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/n;return function(o){return Math.log(i/o)/n/s}}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const e=this.getProjection(),n=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=wh(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],n,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,i,r;if(this.resolutions_){const s=xp(this.resolutions_,e,1);n=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const n=Qe(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Qe(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let i;if(ce(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ce(!$a(e),"Cannot fit empty extent provided as `geometry`");const r=Or(e,this.getProjection());i=cy(r)}else if(e.getType()==="Circle"){const r=Or(e.getExtent(),this.getProjection());i=cy(r),i.rotate(this.getRotation(),pr(r))}else{const r=wa();r?i=e.clone().transform(r,this.getProjection()):i=e}this.fitInternal(i,n)}rotatedExtentForGeometry(e){const n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let h=0,d=s.length;h<d;h+=o){const f=s[h]*i-s[h+1]*r,p=s[h]*r+s[h+1]*i;a=Math.min(a,f),l=Math.min(l,p),u=Math.max(u,f),c=Math.max(c,p)}return[a,l,u,c]}fitInternal(e,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const r=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),d=pr(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;const f=d[0]*h-d[1]*c,p=d[1]*h+d[0]*c,y=this.getConstrainedCenter([f,p],l),v=n.callback?n.callback:to;n.duration!==void 0?this.animateInternal({resolution:l,center:y,duration:n.duration,easing:n.easing},v):(this.targetResolution_=l,this.targetCenter_=y,this.applyTargetState_(!1,!0),Tl(v,!0))}centerOn(e,n,i){this.centerOnInternal(di(e,this.getProjection()),n,i)}centerOnInternal(e,n,i){this.setCenterInternal(wh(e,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),l=wh(e,r,[a[0]/2+o[3],a[1]/2+o[0]],n,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const n=Jd(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){const n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&di(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=di(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);n&&(this.targetCenter_=this.calculateCenterRotate(r,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&di(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){const i=this.getAnimating()||this.getInteracting()||n,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(kn.ROTATION)!==r&&this.set(kn.ROTATION,r),this.get(kn.RESOLUTION)!==o&&(this.set(kn.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(kn.CENTER)||!Fu(this.get(kn.CENTER),a))&&this.set(kn.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,i){e=e!==void 0?e:200;const r=n||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Fu(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:go,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint($e.INTERACTING,1)}endInteraction(e,n,i){i=i&&di(i,this.getProjection()),this.endInteractionInternal(e,n,i)}endInteractionInternal(e,n,i){this.getInteracting()&&(this.setHint($e.INTERACTING,-1),this.resolveConstraints(e,n,i))}getConstrainedCenter(e,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),i)}getConstrainedZoom(e,n){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(e,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,i)}}function Tl(t,e){setTimeout(function(){t(e)},0)}function R2(t){if(t.extent!==void 0){const n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return ny(t.extent,t.constrainOnlyCenter,n)}const e=Mp(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,ny(n,!1,!1)}return t2}function I2(t){let e,n,i,o=t.minZoom!==void 0?t.minZoom:xh,a=t.maxZoom!==void 0?t.maxZoom:28;const l=t.zoomFactor!==void 0?t.zoomFactor:2,u=t.multiWorld!==void 0?t.multiWorld:!1,c=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,h=t.showFullExtent!==void 0?t.showFullExtent:!1,d=Mp(t.projection,"EPSG:3857"),f=d.getExtent();let p=t.constrainOnlyCenter,y=t.extent;if(!u&&!y&&d.isGlobal()&&(p=!1,y=f),t.resolutions!==void 0){const v=t.resolutions;n=v[o],i=v[a]!==void 0?v[a]:v[v.length-1],t.constrainResolution?e=n2(v,c,!p&&y,h):e=iy(n,i,c,!p&&y,h)}else{const m=(f?Math.max(Ce(f),Rt(f)):360*yc.degrees/d.getMetersPerUnit())/Ep/Math.pow(2,xh),g=m/Math.pow(2,28-xh);n=t.maxResolution,n!==void 0?o=0:n=m/Math.pow(l,o),i=t.minResolution,i===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?i=n/Math.pow(l,a):i=m/Math.pow(l,a):i=g),a=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-o),t.constrainResolution?e=i2(l,n,i,c,!p&&y,h):e=iy(n,i,c,!p&&y,h)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}function k2(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const n=t.constrainRotation;return n===void 0||n===!0?s2():n===!1?ry:typeof n=="number"?r2(n):ry}return Lp}function M2(t){return!(t.sourceCenter&&t.targetCenter&&!Fu(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function wh(t,e,n,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=t[0]*s-t[1]*o,l=t[1]*s+t[0]*o;a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,o=-o;const u=a*s-l*o,c=l*s+a*o;return[u,c]}class Za extends P1{constructor(e){const n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Se.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Se.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Pe(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=pe(e,q.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Vn?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;n.layerStatesArray?r=n.layerStatesArray.find(o=>o.layer===this):r=this.getLayerState();const s=this.getExtent();return Xp(r,n.viewState)&&(!s||He(s,n.extent))}getAttributions(e){if(!this.isVisible(e))return[];let n;const i=this.getSource();if(i&&(n=i.getAttributions()),!n)return[];const r=e instanceof Vn?e.getViewStateAndExtent():e;let s=n(r);return Array.isArray(s)||(s=[s]),s}render(e,n){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,n){}renderDeferred(e){const n=this.getRenderer();n&&n.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Se.MAP,e)}getMapInternal(){return this.get(Se.MAP)}setMap(e){this.mapPrecomposeKey_&&(Pe(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Pe(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=pe(e,gn.PRECOMPOSE,function(n){const r=n.frameState.layerStatesArray,s=this.getLayerState(!1);ce(!r.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(s)},this),this.mapRenderKey_=pe(this,q.CHANGE,e.render,e),this.changed())}setSource(e){this.set(Se.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Xp(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}function F2(t,e,n,i,r){ov(t,e,n||0,i||t.length-1,r||P2)}function ov(t,e,n,i,r){for(;i>n;){if(i-n>600){var s=i-n+1,o=e-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),c=Math.max(n,Math.floor(e-o*l/s+u)),h=Math.min(i,Math.floor(e+(s-o)*l/s+u));ov(t,e,c,h,r)}var d=t[e],f=n,p=i;for(Mo(t,n,e),r(t[i],d)>0&&Mo(t,n,i);f<p;){for(Mo(t,f,p),f++,p--;r(t[f],d)<0;)f++;for(;r(t[p],d)>0;)p--}r(t[n],d)===0?Mo(t,n,p):(p++,Mo(t,p,i)),p<=e&&(n=p+1),e<=p&&(i=p-1)}}function Mo(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function P2(t,e){return t<e?-1:t>e?1:0}let av=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const i=[];if(!Il(e,n))return i;const r=this.toBBox,s=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?r(a):a;Il(e,l)&&(n.leaf?i.push(a):Ch(e,l)?this._all(a,i):s.push(a))}n=s.pop()}return i}collides(e){let n=this.data;if(!Il(e,n))return!1;const i=[];for(;n;){for(let r=0;r<n.children.length;r++){const s=n.children[r],o=n.leaf?this.toBBox(s):s;if(Il(e,o)){if(n.leaf||Ch(e,o))return!0;i.push(s)}}n=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=fs([]),this}remove(e,n){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],o=[];let a,l,u;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),u=!0),i.leaf){const c=L2(e,i.children,n);if(c!==-1)return i.children.splice(c,1),s.push(i),this._condense(s),this}!u&&!i.leaf&&Ch(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],u=!1):i=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const i=[];for(;e;)e.leaf?n.push(...e.children):i.push(...e.children),e=i.pop();return n}_build(e,n,i,r){const s=i-n+1;let o=this._maxEntries,a;if(s<=o)return a=fs(e.slice(n,i+1)),os(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=fs([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),u=l*Math.ceil(Math.sqrt(o));hy(e,n,i,u,this.compareMinX);for(let c=n;c<=i;c+=u){const h=Math.min(c+u-1,i);hy(e,c,h,l,this.compareMinY);for(let d=c;d<=h;d+=l){const f=Math.min(d+l-1,h);a.children.push(this._build(e,d,f,r-1))}}return os(a,this.toBBox),a}_chooseSubtree(e,n,i,r){for(;r.push(n),!(n.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const u=n.children[l],c=Eh(u),h=O2(e,u)-c;h<o?(o=h,s=c<s?c:s,a=u):h===o&&c<s&&(s=c,a=u)}n=a||n.children[0]}return n}_insert(e,n,i){const r=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,n,s);for(o.children.push(e),jo(o,r);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(r,s,n)}_split(e,n){const i=e[n],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=fs(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,os(i,this.toBBox),os(a,this.toBBox),n?e[n-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,n){this.data=fs([e,n]),this.data.height=e.height+1,this.data.leaf=!1,os(this.data,this.toBBox)}_chooseSplitIndex(e,n,i){let r,s=1/0,o=1/0;for(let a=n;a<=i-n;a++){const l=Go(e,0,a,this.toBBox),u=Go(e,a,i,this.toBBox),c=D2(l,u),h=Eh(l)+Eh(u);c<s?(s=c,r=a,o=h<o?h:o):c===s&&h<o&&(o=h,r=a)}return r||i-n}_chooseSplitAxis(e,n,i){const r=e.leaf?this.compareMinX:A2,s=e.leaf?this.compareMinY:b2,o=this._allDistMargin(e,n,i,r),a=this._allDistMargin(e,n,i,s);o<a&&e.children.sort(r)}_allDistMargin(e,n,i,r){e.children.sort(r);const s=this.toBBox,o=Go(e,0,n,s),a=Go(e,i-n,i,s);let l=Rl(o)+Rl(a);for(let u=n;u<i-n;u++){const c=e.children[u];jo(o,e.leaf?s(c):c),l+=Rl(o)}for(let u=i-n-1;u>=n;u--){const c=e.children[u];jo(a,e.leaf?s(c):c),l+=Rl(a)}return l}_adjustParentBBoxes(e,n,i){for(let r=i;r>=0;r--)jo(n[r],e)}_condense(e){for(let n=e.length-1,i;n>=0;n--)e[n].children.length===0?n>0?(i=e[n-1].children,i.splice(i.indexOf(e[n]),1)):this.clear():os(e[n],this.toBBox)}};function L2(t,e,n){if(!n)return e.indexOf(t);for(let i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function os(t,e){Go(t,0,t.children.length,e,t)}function Go(t,e,n,i,r){r||(r=fs(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<n;s++){const o=t.children[s];jo(r,t.leaf?i(o):o)}return r}function jo(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function A2(t,e){return t.minX-e.minX}function b2(t,e){return t.minY-e.minY}function Eh(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Rl(t){return t.maxX-t.minX+(t.maxY-t.minY)}function O2(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function D2(t,e){const n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,s-i)}function Ch(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Il(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function fs(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function hy(t,e,n,i,r){const s=[e,n];for(;s.length;){if(n=s.pop(),e=s.pop(),n-e<=i)continue;const o=e+Math.ceil((n-e)/i/2)*i;F2(t,o,e,n,r),s.push(e,o,o,n)}}const oe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function dy(t){return t[0]>0&&t[1]>0}function z2(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function Ot(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}class Tc{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Ot(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Tc({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return H()}getImage(e){return H()}getHitDetectionImage(){return H()}getPixelRatio(e){return 1}getImageState(){return H()}getImageSize(){return H()}getOrigin(){return H()}getSize(){return H()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ot(e)}listenImageChange(e){H()}load(){H()}unlistenImageChange(e){H()}ready(){return Promise.resolve()}}const Sa={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var gt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};gt.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};gt.max=gt.whitepoint[2].D65;gt.rgb=function(t,e){e=e||gt.whitepoint[2].E;var n=t[0]/e[0],i=t[1]/e[1],r=t[2]/e[2],s,o,a;return s=n*3.240969941904521+i*-1.537383177570093+r*-.498610760293,o=n*-.96924363628087+i*1.87596750150772+r*.041555057407175,a=n*.055630079696993+i*-.20397695888897+r*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};Sa.xyz=function(t,e){var n=t[0]/255,i=t[1]/255,r=t[2]/255;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var s=n*.41239079926595+i*.35758433938387+r*.18048078840183,o=n*.21263900587151+i*.71516867876775+r*.072192315360733,a=n*.019330818715591+i*.11919477979462+r*.95053215224966;return e=e||gt.whitepoint[2].E,[s*e[0],o*e[1],a*e[2]]};const Bp={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var i,r,s,o,a,l,u,c,h,d,f,p,y;if(s=t[0],o=t[1],a=t[2],s===0)return[0,0,0];var v=.0011070564598794539;return e=e||"D65",n=n||2,h=gt.whitepoint[n][e][0],d=gt.whitepoint[n][e][1],f=gt.whitepoint[n][e][2],p=4*h/(h+15*d+3*f),y=9*d/(h+15*d+3*f),i=o/(13*s)+p||0,r=a/(13*s)+y||0,u=s>8?d*Math.pow((s+16)/116,3):d*s*v,l=u*9*i/(4*r)||0,c=u*(12-3*i-20*r)/(4*r)||0,[l,u,c]}};gt.luv=function(t,e,n){var i,r,s,o,a,l,u,c,h,d,f,p,y,v=.008856451679035631,m=903.2962962962961;e=e||"D65",n=n||2,h=gt.whitepoint[n][e][0],d=gt.whitepoint[n][e][1],f=gt.whitepoint[n][e][2],p=4*h/(h+15*d+3*f),y=9*d/(h+15*d+3*f),l=t[0],u=t[1],c=t[2],i=4*l/(l+15*u+3*c)||0,r=9*u/(l+15*u+3*c)||0;var g=u/d;return s=g<=v?m*g:116*Math.pow(g,1/3)-16,o=13*s*(i-p),a=13*s*(r-y),[s,o,a]};var lv={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e=t[0],n=t[1],i=t[2],r,s,o;return o=i/360*2*Math.PI,r=n*Math.cos(o),s=n*Math.sin(o),[e,r,s]},xyz:function(t){return Bp.xyz(lv.luv(t))}};Bp.lchuv=function(t){var e=t[0],n=t[1],i=t[2],r=Math.sqrt(n*n+i*i),s=Math.atan2(i,n),o=s*360/2/Math.PI;return o<0&&(o+=360),[e,r,o]};gt.lchuv=function(t){return Bp.lchuv(gt.luv(t))};const fy={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var py={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function N2(t){var c,h;var e,n=[],i=1,r;if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(t=String(t).toLowerCase(),fy[t])n=fy[t].slice(),r="rgb";else if(t==="transparent")i=0,r="rgb",n=[0,0,0];else if(t[0]==="#"){var s=t.slice(1),o=s.length,a=o<=4;i=1,a?(n=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(i=parseInt(s[3]+s[3],16)/255)):(n=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(i=parseInt(s[6]+s[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),r="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var l=e[1];r=l.replace(/a$/,"");var u=r==="cmyk"?4:r==="gray"?1:3;n=e[2].trim().split(/\s*[,\/]\s*|\s+/),r==="color"&&(r=n.shift()),n=n.map(function(d,f){if(d[d.length-1]==="%")return d=parseFloat(d)/100,f===3?d:r==="rgb"?d*255:r[0]==="h"||r[0]==="l"&&!f?d*100:r==="lab"?d*125:r==="lch"?f<2?d*150:d*360:r[0]==="o"&&!f?d:r==="oklab"?d*.4:r==="oklch"?f<2?d*.4:d*360:d;if(r[f]==="h"||f===2&&r[r.length-1]==="h"){if(py[d]!==void 0)return py[d];if(d.endsWith("deg"))return parseFloat(d);if(d.endsWith("turn"))return parseFloat(d)*360;if(d.endsWith("grad"))return parseFloat(d)*360/400;if(d.endsWith("rad"))return parseFloat(d)*180/Math.PI}return d==="none"?0:parseFloat(d)}),i=n.length>u?n.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(n=t.match(/([0-9]+)/g).map(function(d){return parseFloat(d)}),r=((h=(c=t.match(/([a-z])/ig))==null?void 0:c.join(""))==null?void 0:h.toLowerCase())||"rgb");return{space:r,values:n,alpha:i}}const Sh={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100,r,s,o,a,l,u=0;if(n===0)return l=i*255,[l,l,l];for(s=i<.5?i*(1+n):i+n-i*n,r=2*i-s,a=[0,0,0];u<3;)o=e+1/3*-(u-1),o<0?o++:o>1&&o--,l=6*o<1?r+(s-r)*6*o:2*o<1?s:3*o<2?r+(s-r)*(2/3-o)*6:r,a[u++]=l*255;return a}};Sa.hsl=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=s-r,a,l,u;return s===r?a=0:e===s?a=(n-i)/o:n===s?a=2+(i-e)/o:i===s&&(a=4+(e-n)/o),a=Math.min(a*60,360),a<0&&(a+=360),u=(r+s)/2,s===r?l=0:u<=.5?l=o/(s+r):l=o/(2-s-r),[a,l*100,u*100]};function G2(t){Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var e,n=N2(t);if(!n.space)return[];const i=n.space[0]==="h"?Sh.min:Sa.min,r=n.space[0]==="h"?Sh.max:Sa.max;return e=Array(3),e[0]=Math.min(Math.max(n.values[0],i[0]),r[0]),e[1]=Math.min(Math.max(n.values[1],i[1]),r[1]),e[2]=Math.min(Math.max(n.values[2],i[2]),r[2]),n.space[0]==="h"&&(e=Sh.rgb(e)),e.push(Math.min(Math.max(n.alpha,0),1)),e}function j2(t){return typeof t=="string"?t:Yp(t)}const W2=1024,Fo={};let Th=0;function V2(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function gy(t){const e=gt.lchuv(Sa.xyz(t));return e[3]=t[3],e}function U2(t){const e=gt.rgb(lv.xyz(t));return e[3]=t[3],e}function $p(t){if(Fo.hasOwnProperty(t))return Fo[t];if(Th>=W2){let n=0;for(const i in Fo)n++&3||(delete Fo[i],--Th)}const e=G2(t);if(e.length!==4)throw new Error('Failed to parse "'+t+'" as color');for(const n of e)if(isNaN(n))throw new Error('Failed to parse "'+t+'" as color');return uv(e),Fo[t]=e,++Th,e}function Ta(t){return Array.isArray(t)?t:$p(t)}function uv(t){return t[0]=Qe(t[0]+.5|0,0,255),t[1]=Qe(t[1]+.5|0,0,255),t[2]=Qe(t[2]+.5|0,0,255),t[3]=Qe(t[3],0,1),t}function Yp(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let i=t[2];i!=(i|0)&&(i=i+.5|0);const r=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+n+","+i+","+r+")"}function X2(t){try{return $p(t),!0}catch{return!1}}const gr=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",B2=gr.includes("firefox"),$2=gr.includes("safari")&&!gr.includes("chrom");$2&&(gr.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(gr));const Y2=gr.includes("webkit")&&!gr.includes("edge"),cv=gr.includes("macintosh"),hv=typeof devicePixelRatio<"u"?devicePixelRatio:1,dv=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,fv=typeof Image<"u"&&Image.prototype.decode,pv=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}();function lt(t,e,n,i){let r;return n&&n.length?r=n.shift():dv?r=new OffscreenCanvas(t||300,e||300):r=document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("2d",i)}let Rh;function Au(){return Rh||(Rh=lt(1,1)),Rh}function Ka(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function my(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function tf(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Z2(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function K2(t,e){const n=t.childNodes;for(let i=0;;++i){const r=n[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){t.appendChild(s);continue}if(!s){t.removeChild(r),--i;continue}t.insertBefore(s,r)}}}function H2(t,e,n){const i=t;let r=!0,s=!1,o=!1;const a=[ku(i,q.LOAD,function(){o=!0,s||e()})];return i.src&&fv?(s=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():n())})):a.push(ku(i,q.ERROR,n)),function(){r=!1,a.forEach(Pe)}}function q2(t,e){return new Promise((n,i)=>{function r(){o(),n(t)}function s(){o(),i(new Error("Image load error"))}function o(){t.removeEventListener("load",r),t.removeEventListener("error",s)}t.addEventListener("load",r),t.addEventListener("error",s)})}function J2(t,e){return e&&(t.src=e),t.src&&fv?new Promise((n,i)=>t.decode().then(()=>n(t)).catch(r=>t.complete&&t.width?n(t):i(r))):q2(t)}class Q2{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const n in this.cache_){const i=this.cache_[n];!(e++&3)&&!i.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(e,n,i){const r=Ih(e,n,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,n,i){const r=Ih(e,n,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,n,i,r,s){const o=Ih(e,n,i),a=o in this.cache_;this.cache_[o]=r,s&&(r.getImageState()===oe.IDLE&&r.load(),r.getImageState()===oe.LOADING?r.ready().then(()=>{this.patternCache_[o]=Au().createPattern(r.getImage(1),"repeat")}):this.patternCache_[o]=Au().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Ih(t,e,n){const i=n?Ta(n):"null";return e+":"+t+":"+i}const Bn=new Q2;let Po=null;class eS extends mc{constructor(e,n,i,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?oe.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===oe.LOADED){Po||(Po=lt(1,1,void 0,{willReadFrequently:!0})),Po.drawImage(this.image_,0,0);try{Po.getImageData(0,0,1,1),this.tainted_=!1}catch{Po=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(q.CHANGE)}handleImageError_(){this.imageState_=oe.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=oe.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],n=this.size_[1],i=lt(e,n);i.fillRect(0,0,e,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===oe.IDLE){this.image_||this.initializeImage_(),this.imageState_=oe.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&J2(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==oe.LOADED)return;const n=this.image_,i=document.createElement("canvas");i.width=Math.ceil(n.width*e),i.height=Math.ceil(n.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=j2(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{this.imageState_===oe.LOADED||this.imageState_===oe.ERROR?e():this.addEventListener(q.CHANGE,function n(){(this.imageState_===oe.LOADED||this.imageState_===oe.ERROR)&&(this.removeEventListener(q.CHANGE,n),e())})})),this.ready_}}function Zp(t,e,n,i,r,s){let o=e===void 0?void 0:Bn.get(e,n,r);return o||(o=new eS(t,t&&"src"in t?t.src||void 0:e,n,i,r),Bn.set(e,n,r,o,s)),s&&o&&!Bn.getPattern(e,n,r)&&Bn.set(e,n,r,o,s),o}function $n(t){return t?Array.isArray(t)?Yp(t):typeof t=="object"&&"src"in t?tS(t):t:null}function tS(t){if(!t.offset||!t.size)return Bn.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,n=Bn.getPattern(e,void 0,t.color);if(n)return n;const i=Bn.get(t.src,"anonymous",null);if(i.getImageState()!==oe.LOADED)return null;const r=lt(t.size[0],t.size[1]);return r.drawImage(i.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),Zp(r.canvas,e,void 0,oe.LOADED,t.color,!0),Bn.getPattern(e,void 0,t.color)}const kl="ol-hidden",Rc="ol-unselectable",Kp="ol-control",yy="ol-collapsed",nS=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),_y=["style","variant","weight","size","lineHeight","family"],gv=function(t){const e=t.match(nS);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=_y.length;i<r;++i){const s=e[i+1];s!==void 0&&(n[_y[i]]=s)}return n.families=n.family.split(/,\s?/),n},mv="10px sans-serif",Wt="#000",so="round",wi=[],Ei=0,oo="round",Ra=10,Ia="#000",ka="center",bu="middle",zr=[0,0,0,0],Ma=1,jn=new ni;let ps=null,nf;const rf={},yv=function(){const e="32px ",n=["monospace","serif"],i=n.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(u,c,h){let d=!0;for(let f=0;f<i;++f){const p=n[f];if(o=Ou(u+" "+c+" "+e+p,r),h!=p){const y=Ou(u+" "+c+" "+e+h+","+p,r);d=d&&y!=o}}return!!d}function l(){let u=!0;const c=jn.getKeys();for(let h=0,d=c.length;h<d;++h){const f=c[h];jn.get(f)<100&&(a.apply(this,f.split(`
`))?(Ua(rf),ps=null,nf=void 0,jn.set(f,100)):(jn.set(f,jn.get(f)+1,!0),u=!1))}u&&(clearInterval(s),s=void 0)}return function(u){const c=gv(u);if(!c)return;const h=c.families;for(let d=0,f=h.length;d<f;++d){const p=h[d],y=c.style+`
`+c.weight+`
`+p;jn.get(y)===void 0&&(jn.set(y,100,!0),a(c.style,c.weight,p)||(jn.set(y,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),iS=function(){let t;return function(e){let n=rf[e];if(n==null){if(dv){const i=gv(e),r=_v(e,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);rf[e]=n}return n}}();function _v(t,e){return ps||(ps=lt(1,1)),t!=nf&&(ps.font=t,nf=ps.font),ps.measureText(e)}function Ou(t,e){return _v(t,e).width}function vy(t,e,n){if(e in n)return n[e];const i=e.split(`
`).reduce((r,s)=>Math.max(r,Ou(t,s)),0);return n[e]=i,i}function rS(t,e){const n=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let u=0,c=e.length;u<=c;u+=2){const h=e[u];if(h===`
`||u===c){s=Math.max(s,o),r.push(o),o=0,a+=l,l=0;continue}const d=e[u+1]||t.font,f=Ou(d,h);n.push(f),o+=f;const p=iS(d);i.push(p),l=Math.max(l,p)}return{width:s,height:a,widths:n,heights:i,lineWidths:r}}function sS(t,e,n,i,r,s,o,a,l,u,c){t.save(),n!==1&&(t.globalAlpha===void 0?t.globalAlpha=h=>h.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),i.contextInstructions?(t.translate(l,u),t.scale(c[0],c[1]),oS(i,t)):c[0]<0||c[1]<0?(t.translate(l,u),t.scale(c[0],c[1]),t.drawImage(i,r,s,o,a,0,0,o,a)):t.drawImage(i,r,s,o,a,l,u,o*c[0],a*c[1]),t.restore()}function oS(t,e){const n=t.contextInstructions;for(let i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?e[n[i]].apply(e,n[i+1]):e[n[i]]=n[i+1]}class Ic extends Tc{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?oe.LOADING:oe.LOADED,this.imageState_===oe.LOADING&&this.ready().then(()=>this.imageState_=oe.LOADED),this.render()}clone(){const e=this.getScale(),n=new Ic({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const e=this.size_,n=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-n[0]/i[0],e[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let n=this.canvases_[e];if(!n){const i=this.renderOptions_,r=lt(i.size*e,i.size*e);this.draw_(i,r,e),n=r.canvas,this.canvases_[e]=n}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,i){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const S=r;r=s,s=S}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),u=Math.sqrt(s*s-l*l),c=r-u,h=Math.sqrt(l*l+c*c),d=h/l;if(e==="miter"&&d<=i)return d*n;const f=n/2/d,p=n/2*(c/h),v=Math.sqrt((r+f)*(r+f)+p*p)-r;if(this.radius2_===void 0||e==="bevel")return v*2;const m=r*Math.sin(a),g=Math.sqrt(r*r-m*m),_=s-g,w=Math.sqrt(m*m+_*_)/m;if(w<=i){const S=w*n/2-s-r;return 2*Math.max(v,S)}return v*2}createRenderOptions(){let e=so,n=oo,i=0,r=null,s=0,o,a=0;this.stroke_&&(o=$n(this.stroke_.getColor()??Ia),a=this.stroke_.getWidth()??Ma,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??oo,e=this.stroke_.getLineCap()??so,i=this.stroke_.getMiterLimit()??Ra);const l=this.calculateLineJoinSize_(n,a,i),u=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*u+l);return{strokeStyle:o,strokeWidth:a,size:c,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,i){if(n.scale(i,i),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let r=this.fill_.getColor();r===null&&(r=Wt),n.fillStyle=$n(r),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=Ta(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(n=lt(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_;const i=this.radius_;if(n===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=s+a*o,u=a%2===0?i:r;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=Wt,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Ha extends Ic{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),n=new Ha({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius_=e,this.render()}}class Yn{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Yn({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const n=Zp(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===oe.IDLE&&n.load(),n.getImageState()===oe.LOADING&&(this.patternImage_=n)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class vi{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new vi({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Vt{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=xy,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Vt({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=xy,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function aS(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(ce(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let kh=null;function vv(t,e){if(!kh){const n=new Yn({color:"rgba(255,255,255,0.4)"}),i=new vi({color:"#3399CC",width:1.25});kh=[new Vt({image:new Ha({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return kh}function xy(t){return t.getGeometry()}function wy(t,e,n,i){return n!==void 0&&i!==void 0?[n/t,i/e]:n!==void 0?n/t:i!==void 0?i/e:1}class ao extends Tc{constructor(e){e=e||{};const n=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;ce(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||ee(o)),ce(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),ce(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=oe.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?oe.LOADED:oe.IDLE:l=oe.LOADING:l=oe.LOADED),this.color_=e.color!==void 0?Ta(e.color):null,this.iconImage_=Zp(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let u,c;if(e.size)[u,c]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)u=h.width,c=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(wy(f[0],f[1],e.width,e.height))};this.listenImageChange(d);return}}u!==void 0&&this.setScale(wy(u,c,e.width,e.height))}}clone(){let e,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new ao({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const n=this.getDisplacement(),i=this.getScaleArray();return[e[0]-n[0]/i[0],e[1]+n[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==oe.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==oe.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(q.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(q.CHANGE,e)}ready(){return this.iconImage_.ready()}}const lS="#333";class kc{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Ot(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Yn({color:lS}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new kc({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ot(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let ns=0;const mo=0,Ue=1<<ns++,$=1<<ns++,qt=1<<ns++,ot=1<<ns++,Jn=1<<ns++,Jo=1<<ns++,Ct=Math.pow(2,ns)-1,xv={[Ue]:"boolean",[$]:"number",[qt]:"string",[ot]:"color",[Jn]:"number[]",[Jo]:"size"},uS=Object.keys(xv).map(Number).sort(Hn);function It(t){const e=[];for(const n of uS)cS(t,n)&&e.push(xv[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function cS(t,e){return(t&e)===e}function Qn(t,e){return!!(t&e)}function Mc(t,e){return t===e}class Ji{constructor(e,n){this.type=e,this.value=n}}class hS{constructor(e,n,...i){this.type=e,this.operator=n,this.args=i}}function wv(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function dS(t){switch(t){case"string":return qt;case"color":return ot;case"number":return $;case"boolean":return Ue;case"number[]":return Jn;default:throw new Error(`Unrecognized type hint: ${t}`)}}function Ee(t,e,n){switch(typeof t){case"boolean":return new Ji(Ue,t);case"number":return new Ji(n===Jo?Jo:$,t);case"string":{let r=qt;return X2(t)&&(r|=ot),Mc(r&n,mo)||(r&=n),new Ji(r,t)}}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value");if(t.length===0)throw new Error("Empty expression");if(typeof t[0]=="string")return SS(t,e,n);for(const r of t)if(typeof r!="number")throw new Error("Expected an array of numbers");let i=Jn;return t.length===2?i|=Jo:(t.length===3||t.length===4)&&(i|=ot),n&&(i&=n),new Ji(i,t)}const M={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},fS={[M.Get]:J(([t,e])=>e!==void 0?dS(e.value):Ct,re(1,2),pS),[M.Var]:J(([t])=>t.type,re(1,1),gS),[M.Id]:J($|qt,Lo,mS),[M.Concat]:J(qt,re(2,1/0),fe(Ct)),[M.GeometryType]:J(qt,Lo,yS),[M.Resolution]:J($,Lo),[M.Zoom]:J($,Lo),[M.Time]:J($,Lo),[M.Any]:J(Ue,re(2,1/0),fe(Ue)),[M.All]:J(Ue,re(2,1/0),fe(Ue)),[M.Not]:J(Ue,re(1,1),fe(Ue)),[M.Equal]:J(Ue,re(2,2),fe(Ct),Oi),[M.NotEqual]:J(Ue,re(2,2),fe(Ct),Oi),[M.GreaterThan]:J(Ue,re(2,2),fe(Ct),Oi),[M.GreaterThanOrEqualTo]:J(Ue,re(2,2),fe(Ct),Oi),[M.LessThan]:J(Ue,re(2,2),fe(Ct),Oi),[M.LessThanOrEqualTo]:J(Ue,re(2,2),fe(Ct),Oi),[M.Multiply]:J(t=>{let e=$|ot;for(let n=0;n<t.length;n++)e&=t[n].type;return e},re(2,1/0),fe($|ot),Oi),[M.Coalesce]:J(t=>{let e=Ct;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},re(2,1/0),fe(Ct),Oi),[M.Divide]:J($,re(2,2),fe($)),[M.Add]:J($,re(2,1/0),fe($)),[M.Subtract]:J($,re(2,2),fe($)),[M.Clamp]:J($,re(3,3),fe($)),[M.Mod]:J($,re(2,2),fe($)),[M.Pow]:J($,re(2,2),fe($)),[M.Abs]:J($,re(1,1),fe($)),[M.Floor]:J($,re(1,1),fe($)),[M.Ceil]:J($,re(1,1),fe($)),[M.Round]:J($,re(1,1),fe($)),[M.Sin]:J($,re(1,1),fe($)),[M.Cos]:J($,re(1,1),fe($)),[M.Atan]:J($,re(1,2),fe($)),[M.Sqrt]:J($,re(1,1),fe($)),[M.Match]:J(t=>{let e=Ct;for(let n=2;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},re(4,1/0),Ey,vS),[M.Between]:J(Ue,re(3,3),fe($)),[M.Interpolate]:J(t=>{let e=ot|$;for(let n=3;n<t.length;n+=2)e&=t[n].type;return e},re(6,1/0),Ey,xS),[M.Case]:J(t=>{let e=Ct;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},re(3,1/0),_S,wS),[M.In]:J(Ue,re(2,2),ES),[M.Number]:J($,re(1,1/0),fe(Ct)),[M.String]:J(qt,re(1,1/0),fe(Ct)),[M.Array]:J(t=>t.length===2?Jn|Jo:t.length===3||t.length===4?Jn|ot:Jn,re(1,1/0),fe($)),[M.Color]:J(ot,re(1,4),fe($)),[M.Band]:J($,re(1,3),fe($)),[M.Palette]:J(ot,re(2,2),CS),[M.ToString]:J(qt,re(1,1),fe(Ue|$|qt|ot))};function pS(t,e){const n=Ee(t[1],e);if(!(n instanceof Ji))throw new Error("Expected a literal argument for get operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(n.value),t.length===3){const i=Ee(t[2],e);return[n,i]}return[n]}function gS(t,e,n,i){const r=t[1];if(typeof r!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(r),!("variables"in e.style)||e.style.variables[r]===void 0)return[new Ji(Ct,r)];const s=e.style.variables[r],o=Ee(s,e);if(o.value=r,i&&!Qn(i,o.type))throw new Error(`The variable ${r} has type ${It(o.type)} but the following type was expected: ${It(i)}`);return[o]}function mS(t,e){e.featureId=!0}function yS(t,e){e.geometryType=!0}function Lo(t,e){const n=t[0];if(t.length!==1)throw new Error(`Expected no arguments for ${n} operation`);return[]}function re(t,e){return function(n,i){const r=n[0],s=n.length-1;if(t===e){if(s!==t){const o=t===1?"":"s";throw new Error(`Expected ${t} argument${o} for ${r}, got ${s}`)}}else if(s<t||s>e){const o=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`Expected ${o} arguments for ${r}, got ${s}`)}}}function fe(t){return function(e,n){const i=e[0],r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const a=Ee(e[o+1],n);if(!Qn(t,a.type)){const l=It(t),u=It(a.type);throw new Error(`Unexpected type for argument ${o} of ${i} operation, got ${l} but expected ${u}`)}a.type&=t,s[o]=a}return s}}function Oi(t,e,n){const i=t[0],r=t.length-1;let s=Ct;for(let a=0;a<n.length;++a)s&=n[a].type;if(s===mo)throw new Error(`No common type could be found for arguments of ${i} operation`);const o=new Array(r);for(let a=0;a<r;++a)o[a]=Ee(t[a+1],e,s);return o}function _S(t,e){const n=t[0],i=t.length-1;if(i%2===0)throw new Error(`An odd amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function Ey(t,e){const n=t[0],i=t.length-1;if(i%2===1)throw new Error(`An even amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function vS(t,e,n,i){const r=t.length-1;let o=Ee(t[1],e).type;const a=Ee(t[t.length-1],e);let l=i!==void 0?i&a.type:a.type;const u=new Array(r-2);for(let h=0;h<r-2;h+=2){const d=Ee(t[h+2],e),f=Ee(t[h+3],e);o&=d.type,l&=f.type,u[h]=d,u[h+1]=f}const c=qt|$|Ue;if(!Qn(c,o))throw new Error(`Expected an input of type ${It(c)} for the interpolate operation, got ${It(o)} instead`);if(o&=c,Mc(l,mo))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(t));for(let h=0;h<r-2;h+=2){const d=Ee(t[h+2],e,o),f=Ee(t[h+3],e,l);u[h]=d,u[h+1]=f}return[Ee(t[1],e,o),...u,Ee(t[t.length-1],e,l)]}function xS(t,e,n,i){const r=t[1];let s;switch(r[0]){case"linear":s=1;break;case"exponential":if(s=r[1],typeof s!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(r)}`);s=Ee(s,e);let o=Ee(t[2],e);if(!Qn($,o.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${It(o.type)} instead`);o=Ee(t[2],e,$);const a=new Array(t.length-3);for(let l=0;l<a.length;l+=2){let u=Ee(t[l+3],e);if(!Qn($,u.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${It(u.type)} at position ${l+2} instead`);let c=Ee(t[l+4],e);if(!Qn($|ot,c.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${It(c.type)} at position ${l+3} instead`);u=Ee(t[l+3],e,$),c=Ee(t[l+4],e,$|ot),a[l]=u,a[l+1]=c}return[s,o,...a]}function wS(t,e,n,i){const r=Ee(t[t.length-1],e,i);let s=i!==void 0?i&r.type:r.type;const o=new Array(t.length-1);for(let a=0;a<o.length-1;a+=2){const l=Ee(t[a+1],e),u=Ee(t[a+2],e,i);if(!Qn(Ue,l.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${It(l.type)} at position ${a} instead`);s&=u.type,o[a]=l,o[a+1]=u}if(Mc(s,mo))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(t));for(let a=0;a<o.length-1;a+=2)o[a+1]=Ee(t[a+2],e,s);return o[o.length-1]=Ee(t[t.length-1],e,s),o}function ES(t,e){let n=t[2];if(!Array.isArray(n))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(n[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');n=n[1]}let i=qt|$;const r=new Array(n.length);for(let o=0;o<r.length;o++){const a=Ee(n[o],e);i&=a.type,r[o]=a}if(Mc(i,mo))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(t));return[Ee(t[1],e,i),...r]}function CS(t,e){const n=Ee(t[1],e,$);if(n.type!==$)throw new Error(`The first argument of palette must be an number, got ${It(n.type)} instead`);const i=t[2];if(!Array.isArray(i))throw new Error("The second argument of palette must be an array");const r=new Array(i.length);for(let s=0;s<r.length;s++){const o=Ee(i[s],e,ot);if(!(o instanceof Ji))throw new Error(`The palette color at index ${s} must be a literal value`);if(!Qn(o.type,ot))throw new Error(`The palette color at index ${s} should be of type color, got ${It(o.type)} instead`);r[s]=o}return[n,...r]}function J(t,...e){return function(n,i,r){const s=n[0];let o=[];for(let l=0;l<e.length;l++)o=e[l](n,i,o,r)||o;let a=typeof t=="function"?t(o):t;if(r!==void 0){if(!Qn(a,r))throw new Error(`The following expression was expected to return ${It(r)}, but returns ${It(a)} instead: ${JSON.stringify(n)}`);a&=r}if(a===mo)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(n)}`);return new hS(a,s,...o)}}function SS(t,e,n){const i=t[0],r=fS[i];if(!r)throw new Error(`Unknown operator: ${i}`);return r(t,e,n)}function Ev(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Ev(t.getGeometries()[0]);default:return""}}function Cv(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Ai(t,e,n){const i=Ee(t,n);if(!Qn(e,i.type)){const r=It(e),s=It(i.type);throw new Error(`Expected expression to be of type ${r}, got ${s}`)}return On(i)}function On(t,e){if(t instanceof Ji){if(t.type===ot&&typeof t.value=="string"){const i=$p(t.value);return function(){return i}}return function(){return t.value}}const n=t.operator;switch(n){case M.Number:case M.String:case M.Coalesce:return TS(t);case M.Get:case M.Var:return RS(t);case M.Id:return i=>i.featureId;case M.GeometryType:return i=>i.geometryType;case M.Concat:{const i=t.args.map(r=>On(r));return r=>"".concat(...i.map(s=>s(r).toString()))}case M.Resolution:return i=>i.resolution;case M.Any:case M.All:case M.Between:case M.In:case M.Not:return kS(t);case M.Equal:case M.NotEqual:case M.LessThan:case M.LessThanOrEqualTo:case M.GreaterThan:case M.GreaterThanOrEqualTo:return IS(t);case M.Multiply:case M.Divide:case M.Add:case M.Subtract:case M.Clamp:case M.Mod:case M.Pow:case M.Abs:case M.Floor:case M.Ceil:case M.Round:case M.Sin:case M.Cos:case M.Atan:case M.Sqrt:return MS(t);case M.Case:return FS(t);case M.Match:return PS(t);case M.Interpolate:return LS(t);case M.ToString:return AS(t);default:throw new Error(`Unsupported operator ${n}`)}}function TS(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=On(t.args[s]);switch(n){case M.Coalesce:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case M.Number:case M.String:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function RS(t,e){const i=t.args[0].value;switch(t.operator){case M.Get:return r=>r.properties[i];case M.Var:return r=>r.variables[i];default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function IS(t,e){const n=t.operator,i=On(t.args[0]),r=On(t.args[1]);switch(n){case M.Equal:return s=>i(s)===r(s);case M.NotEqual:return s=>i(s)!==r(s);case M.LessThan:return s=>i(s)<r(s);case M.LessThanOrEqualTo:return s=>i(s)<=r(s);case M.GreaterThan:return s=>i(s)>r(s);case M.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function kS(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=On(t.args[s]);switch(n){case M.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case M.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case M.Between:return s=>{const o=r[0](s),a=r[1](s),l=r[2](s);return o>=a&&o<=l};case M.In:return s=>{const o=r[0](s);for(let a=1;a<i;++a)if(o===r[a](s))return!0;return!1};case M.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function MS(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=On(t.args[s]);switch(n){case M.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=r[a](s);return o};case M.Divide:return s=>r[0](s)/r[1](s);case M.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=r[a](s);return o};case M.Subtract:return s=>r[0](s)-r[1](s);case M.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case M.Mod:return s=>r[0](s)%r[1](s);case M.Pow:return s=>Math.pow(r[0](s),r[1](s));case M.Abs:return s=>Math.abs(r[0](s));case M.Floor:return s=>Math.floor(r[0](s));case M.Ceil:return s=>Math.ceil(r[0](s));case M.Round:return s=>Math.round(r[0](s));case M.Sin:return s=>Math.sin(r[0](s));case M.Cos:return s=>Math.cos(r[0](s));case M.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case M.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function FS(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=On(t.args[r]);return r=>{for(let s=0;s<n-1;s+=2)if(i[s](r))return i[s+1](r);return i[n-1](r)}}function PS(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=On(t.args[r]);return r=>{const s=i[0](r);for(let o=1;o<n;o+=2)if(s===i[o](r))return i[o+1](r);return i[n-1](r)}}function LS(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=On(t.args[r]);return r=>{const s=i[0](r),o=i[1](r);let a,l;for(let u=2;u<n;u+=2){const c=i[u](r);let h=i[u+1](r);const d=Array.isArray(h);if(d&&(h=V2(h)),c>=o)return u===2?h:d?bS(s,o,a,l,c,h):Wo(s,o,a,l,c,h);a=c,l=h}return l}}function AS(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=On(t.args[s]);switch(n){case M.ToString:return s=>{const o=r[0](s);return t.args[0].type===ot?Yp(o):o.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function Wo(t,e,n,i,r,s){const o=r-n;if(o===0)return i;const a=e-n,l=t===1?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1);return i+l*(s-i)}function bS(t,e,n,i,r,s){if(r-n===0)return i;const a=gy(i),l=gy(s);let u=l[2]-a[2];u>180?u-=360:u<-180&&(u+=360);const c=[Wo(t,e,n,a[0],r,l[0]),Wo(t,e,n,a[1],r,l[1]),a[2]+Wo(t,e,n,0,r,u),Wo(t,e,n,i[3],r,s[3])];return uv(U2(c))}function OS(t){return!0}function DS(t){const e=wv(),n=zS(t,e),i=Cv();return function(r,s){if(i.properties=r.getPropertiesInternal(),i.resolution=s,e.featureId){const o=r.getId();o!==void 0?i.featureId=o:i.featureId=null}return e.geometryType&&(i.geometryType=Ev(r.getGeometry())),n(i)}}function Cy(t){const e=wv(),n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=sf(t[o],e);const r=Cv(),s=new Array(n);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,e.featureId){const u=o.getId();u!==void 0?r.featureId=u:r.featureId=null}let l=0;for(let u=0;u<n;++u){const c=i[u](r);c&&(s[l]=c,l+=1)}return s.length=l,s}}function zS(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r){const s=t[r],o="filter"in s?Ai(s.filter,Ue,e):OS;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let u=0;u<l;++u)a[u]=sf(s.style[u],e)}else a=[sf(s.style,e)];i[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<n;++a){const l=i[a].filter;if(l(r)&&!(t[a].else&&o)){o=!0;for(const u of i[a].styles){const c=u(r);c&&s.push(c)}}}return s}}function sf(t,e){const n=Fa(t,"",e),i=Pa(t,"",e),r=NS(t,e),s=GS(t,e),o=Ut(t,"z-index",e);if(!n&&!i&&!r&&!s&&!fr(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new Vt;return function(l){let u=!0;if(n){const c=n(l);c&&(u=!1),a.setFill(c)}if(i){const c=i(l);c&&(u=!1),a.setStroke(c)}if(r){const c=r(l);c&&(u=!1),a.setText(c)}if(s){const c=s(l);c&&(u=!1),a.setImage(c)}return o&&a.setZIndex(o(l)),u?null:a}}function Fa(t,e,n){let i;if(e+"fill-pattern-src"in t?i=US(t,e+"fill-",n):i=Hp(t,e+"fill-color",n),!i)return null;const r=new Yn;return function(s){const o=i(s);return o==="none"?null:(r.setColor(o),r)}}function Pa(t,e,n){const i=Ut(t,e+"stroke-width",n),r=Hp(t,e+"stroke-color",n);if(!i&&!r)return null;const s=gi(t,e+"stroke-line-cap",n),o=gi(t,e+"stroke-line-join",n),a=Sv(t,e+"stroke-line-dash",n),l=Ut(t,e+"stroke-line-dash-offset",n),u=Ut(t,e+"stroke-miter-limit",n),c=new vi;return function(h){if(r){const d=r(h);if(d==="none")return null;c.setColor(d)}if(i&&c.setWidth(i(h)),s){const d=s(h);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(d)}if(o){const d=o(h);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(d)}return a&&c.setLineDash(a(h)),l&&c.setLineDashOffset(l(h)),u&&c.setMiterLimit(u(h)),c}}function NS(t,e){const n="text-",i=gi(t,n+"value",e);if(!i)return null;const r=Fa(t,n,e),s=Fa(t,n+"background-",e),o=Pa(t,n,e),a=Pa(t,n+"background-",e),l=gi(t,n+"font",e),u=Ut(t,n+"max-angle",e),c=Ut(t,n+"offset-x",e),h=Ut(t,n+"offset-y",e),d=La(t,n+"overflow",e),f=gi(t,n+"placement",e),p=Ut(t,n+"repeat",e),y=Fc(t,n+"scale",e),v=La(t,n+"rotate-with-view",e),m=Ut(t,n+"rotation",e),g=gi(t,n+"align",e),_=gi(t,n+"justify",e),x=gi(t,n+"baseline",e),w=Sv(t,n+"padding",e),S=Pc(t,n+"declutter-mode"),E=new kc({declutterMode:S});return function(C){if(E.setText(i(C)),r&&E.setFill(r(C)),s&&E.setBackgroundFill(s(C)),o&&E.setStroke(o(C)),a&&E.setBackgroundStroke(a(C)),l&&E.setFont(l(C)),u&&E.setMaxAngle(u(C)),c&&E.setOffsetX(c(C)),h&&E.setOffsetY(h(C)),d&&E.setOverflow(d(C)),f){const R=f(C);if(R!=="point"&&R!=="line")throw new Error("Expected point or line for text-placement");E.setPlacement(R)}if(p&&E.setRepeat(p(C)),y&&E.setScale(y(C)),v&&E.setRotateWithView(v(C)),m&&E.setRotation(m(C)),g){const R=g(C);if(R!=="left"&&R!=="center"&&R!=="right"&&R!=="end"&&R!=="start")throw new Error("Expected left, right, center, start, or end for text-align");E.setTextAlign(R)}if(_){const R=_(C);if(R!=="left"&&R!=="right"&&R!=="center")throw new Error("Expected left, right, or center for text-justify");E.setJustify(R)}if(x){const R=x(C);if(R!=="bottom"&&R!=="top"&&R!=="middle"&&R!=="alphabetic"&&R!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");E.setTextBaseline(R)}return w&&E.setPadding(w(C)),E}}function GS(t,e){return"icon-src"in t?jS(t,e):"shape-points"in t?WS(t,e):"circle-radius"in t?VS(t,e):null}function jS(t,e){const n="icon-",i=n+"src",r=Tv(t[i],i),s=Du(t,n+"anchor",e),o=Fc(t,n+"scale",e),a=Ut(t,n+"opacity",e),l=Du(t,n+"displacement",e),u=Ut(t,n+"rotation",e),c=La(t,n+"rotate-with-view",e),h=Ty(t,n+"anchor-origin"),d=Ry(t,n+"anchor-x-units"),f=Ry(t,n+"anchor-y-units"),p=YS(t,n+"color"),y=BS(t,n+"cross-origin"),v=$S(t,n+"offset"),m=Ty(t,n+"offset-origin"),g=zu(t,n+"width"),_=zu(t,n+"height"),x=XS(t,n+"size"),w=Pc(t,n+"declutter-mode"),S=new ao({src:r,anchorOrigin:h,anchorXUnits:d,anchorYUnits:f,color:p,crossOrigin:y,offset:v,offsetOrigin:m,height:_,width:g,size:x,declutterMode:w});return function(E){return a&&S.setOpacity(a(E)),l&&S.setDisplacement(l(E)),u&&S.setRotation(u(E)),c&&S.setRotateWithView(c(E)),o&&S.setScale(o(E)),s&&S.setAnchor(s(E)),S}}function WS(t,e){const n="shape-",i=n+"points",r=n+"radius",s=of(t[i],i),o=of(t[r],r),a=Fa(t,n,e),l=Pa(t,n,e),u=Fc(t,n+"scale",e),c=Du(t,n+"displacement",e),h=Ut(t,n+"rotation",e),d=La(t,n+"rotate-with-view",e),f=zu(t,n+"radius2"),p=zu(t,n+"angle"),y=Pc(t,n+"declutter-mode"),v=new Ic({points:s,radius:o,radius2:f,angle:p,declutterMode:y});return function(m){return a&&v.setFill(a(m)),l&&v.setStroke(l(m)),c&&v.setDisplacement(c(m)),h&&v.setRotation(h(m)),d&&v.setRotateWithView(d(m)),u&&v.setScale(u(m)),v}}function VS(t,e){const n="circle-",i=Fa(t,n,e),r=Pa(t,n,e),s=Ut(t,n+"radius",e),o=Fc(t,n+"scale",e),a=Du(t,n+"displacement",e),l=Ut(t,n+"rotation",e),u=La(t,n+"rotate-with-view",e),c=Pc(t,n+"declutter-mode"),h=new Ha({radius:5,declutterMode:c});return function(d){return s&&h.setRadius(s(d)),i&&h.setFill(i(d)),r&&h.setStroke(r(d)),a&&h.setDisplacement(a(d)),l&&h.setRotation(l(d)),u&&h.setRotateWithView(u(d)),o&&h.setScale(o(d)),h}}function Ut(t,e,n){if(!(e in t))return;const i=Ai(t[e],$,n);return function(r){return of(i(r),e)}}function gi(t,e,n){if(!(e in t))return null;const i=Ai(t[e],qt,n);return function(r){return Tv(i(r),e)}}function US(t,e,n){const i=gi(t,e+"pattern-src",n),r=Sy(t,e+"pattern-offset",n),s=Sy(t,e+"pattern-size",n),o=Hp(t,e+"color",n);return function(a){return{src:i(a),offset:r&&r(a),size:s&&s(a),color:o&&o(a)}}}function La(t,e,n){if(!(e in t))return null;const i=Ai(t[e],Ue,n);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function Hp(t,e,n){if(!(e in t))return null;const i=Ai(t[e],ot|qt,n);return function(r){return Rv(i(r),e)}}function Sv(t,e,n){if(!(e in t))return null;const i=Ai(t[e],Jn,n);return function(r){return qa(i(r),e)}}function Du(t,e,n){if(!(e in t))return null;const i=Ai(t[e],Jn,n);return function(r){const s=qa(i(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function Sy(t,e,n){if(!(e in t))return null;const i=Ai(t[e],Jn,n);return function(r){return Iv(i(r),e)}}function Fc(t,e,n){if(!(e in t))return null;const i=Ai(t[e],Jn|$,n);return function(r){return ZS(i(r),e)}}function zu(t,e){const n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function XS(t,e){const n=t[e];if(n!==void 0){if(typeof n=="number")return Ot(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function BS(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function Ty(t,e){const n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function Ry(t,e){const n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function $S(t,e){const n=t[e];if(n!==void 0)return qa(n,e)}function Pc(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function YS(t,e){const n=t[e];if(n!==void 0)return Rv(n,e)}function qa(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let i=0;i<n;++i)if(typeof t[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function Tv(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function of(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function Rv(t,e){if(typeof t=="string")return t;const n=qa(t,e),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function Iv(t,e){const n=qa(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}function ZS(t,e){return typeof t=="number"?t:Iv(t,e)}const Iy={RENDER_ORDER:"renderOrder"};class qp extends Za{constructor(e){e=e||{};const n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Iy.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,n){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new av(9)),this.getRenderer().renderDeclutter(e,n)}setRenderOrder(e){this.set(Iy.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?vv:e;const n=KS(e);this.styleFunction_=e===null?void 0:aS(n),this.changed()}}function KS(t){if(t===void 0)return vv;if(!t)return null;if(typeof t=="function"||t instanceof Vt)return t;if(!Array.isArray(t))return Cy([t]);if(t.length===0)return[];const e=t.length,n=t[0];if(n instanceof Vt){const r=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!(o instanceof Vt))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in n){const r=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return DS(r)}return Cy(t)}class HS extends vp{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){H()}calculateMatrices2D(e){const n=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Mi(i,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),Y1(r,i)}forEachFeatureAtCoordinate(e,n,i,r,s,o,a,l){let u;const c=n.viewState;function h(x,w,S,E){return s.call(o,w,x?S:null,E)}const d=c.projection,f=Ip(e.slice(),d),p=[[0,0]];if(d.canWrapX()&&r){const x=d.getExtent(),w=Ce(x);p.push([-w,0],[w,0])}const y=n.layerStatesArray,v=y.length,m=[],g=[];for(let x=0;x<p.length;x++)for(let w=v-1;w>=0;--w){const S=y[w],E=S.layer;if(E.hasRenderer()&&Xp(S,c)&&a.call(l,E)){const C=E.getRenderer(),R=E.getSource();if(C&&R){const L=R.getWrapX()?f:e,D=h.bind(null,S.managed);g[0]=L[0]+p[x][0],g[1]=L[1]+p[x][1],u=C.forEachFeatureAtCoordinate(g,n,i,D,m)}if(u)return u}}if(m.length===0)return;const _=1/m.length;return m.forEach((x,w)=>x.distanceSq+=w*_),m.sort((x,w)=>x.distanceSq-w.distanceSq),m.some(x=>u=x.callback(x.feature,x.layer,x.geometry)),u}hasFeatureAtCoordinate(e,n,i,r,s,o){return this.forEachFeatureAtCoordinate(e,n,i,r,va,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){H()}scheduleExpireIconCache(e){Bn.canExpireCache()&&e.postRenderFunctions.push(qS)}}function qS(t,e){Bn.expire()}class kv extends ti{constructor(e,n,i,r){super(e),this.inversePixelTransform=n,this.frameState=i,this.context=r}}class JS extends HS{constructor(e){super(e),this.fontChangeListenerKey_=pe(jn,eo.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=Rc+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,n){const i=this.getMap();if(i.hasListener(e)){const r=new kv(e,void 0,n);i.dispatchEvent(r)}}disposeInternal(){Pe(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(gn.PRECOMPOSE,e);const n=e.layerStatesArray.sort(function(a,l){return a.zIndex-l.zIndex});n.some(a=>a.layer instanceof qp&&a.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const s=[];let o=null;for(let a=0,l=n.length;a<l;++a){const u=n[a];e.layerIndex=a;const c=u.layer,h=c.getSourceState();if(!Xp(u,r)||h!="ready"&&h!="undefined"){c.unrender();continue}const d=c.render(e,o);d&&(d!==o&&(this.children_.push(d),o=d),s.push(u))}this.declutter(e,s),K2(this.element_,this.children_),this.dispatchRenderEvent(gn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,n){if(e.declutter){for(let i=n.length-1;i>=0;--i){const r=n[i],s=r.layer;s.getDeclutter()&&s.renderDeclutter(e,r)}n.forEach(i=>i.layer.renderDeferred(e))}}}class Bi extends ti{constructor(e,n){super(e),this.layer=n}}const Mh={LAYERS:"layers"};class is extends P1{constructor(e){e=e||{};const n=Object.assign({},e);delete n.layers;let i=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Mh.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Xn(i.slice(),{unique:!0}):ce(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Xn(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Pe),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(pe(e,jt.ADD,this.handleLayersAdd_,this),pe(e,jt.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Pe);Ua(this.listenerKeys_);const n=e.getArray();for(let i=0,r=n.length;i<r;i++){const s=n[i];this.registerLayerListeners_(s),this.dispatchEvent(new Bi("addlayer",s))}this.changed()}registerLayerListeners_(e){const n=[pe(e,eo.PROPERTYCHANGE,this.handleLayerChange_,this),pe(e,q.CHANGE,this.handleLayerChange_,this)];e instanceof is&&n.push(pe(e,"addlayer",this.handleLayerGroupAdd_,this),pe(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ee(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new Bi("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Bi("removelayer",e.layer))}handleLayersAdd_(e){const n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new Bi("addlayer",n)),this.changed()}handleLayersRemove_(e){const n=e.element,i=ee(n);this.listenerKeys_[i].forEach(Pe),delete this.listenerKeys_[i],this.dispatchEvent(new Bi("removelayer",n)),this.changed()}getLayers(){return this.get(Mh.LAYERS)}setLayers(e){const n=this.getLayers();if(n){const i=n.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new Bi("removelayer",i[r]))}this.set(Mh.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){const n=e!==void 0?e:[],i=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=i,a=n.length;o<a;o++){const l=n[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=Vr(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return n}getSourceState(){return"ready"}}class gs extends ti{constructor(e,n,i){super(e),this.map=n,this.frameState=i!==void 0?i:null}}class ji extends gs{constructor(e,n,i,r,s,o){super(e,n,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Xe={SINGLECLICK:"singleclick",CLICK:q.CLICK,DBLCLICK:q.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},af={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class QS extends mc{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=pe(i,af.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=pe(i,af.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(q.TOUCHMOVE,this.boundHandleTouchMove_,pv?{passive:!1}:!1)}emulateClick_(e){let n=new ji(Xe.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new ji(Xe.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new ji(Xe.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const n=e,i=n.pointerId;if(n.type==Xe.POINTERUP||n.type==Xe.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==n.target){delete this.trackedTouches_[r];break}}else(n.type==Xe.POINTERDOWN||n.type==Xe.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const n=new ji(Xe.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Pe),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const n=new ji(Xe.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(pe(i,Xe.POINTERMOVE,this.handlePointerMove_,this),pe(i,Xe.POINTERUP,this.handlePointerUp_,this),pe(this.element_,Xe.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(pe(this.element_.getRootNode(),Xe.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const n=new ji(Xe.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new ji(Xe.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Pe(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(q.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Pe(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Pe),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Wi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},St={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Nu=1/0;class eT{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Ua(this.queuedElements_)}dequeue(){const e=this.elements_,n=this.priorities_,i=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){ce(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(e);return n!=Nu?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const n=this.elements_,i=this.priorities_,r=n.length,s=n[e],o=i[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),c=u<r&&i[u]<i[l]?u:l;n[e]=n[c],i[e]=i[c],e=c}n[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,n){const i=this.elements_,r=this.priorities_,s=i[n],o=r[n];for(;n>e;){const a=this.getParentIndex_(n);if(r[a]>o)i[n]=i[a],r[n]=r[a],n=a;else break}i[n]=s,r[n]=o}reprioritize(){const e=this.priorityFunction_,n=this.elements_,i=this.priorities_;let r=0;const s=n.length;let o,a,l;for(a=0;a<s;++a)o=n[a],l=e(o),l==Nu?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,n[r++]=o);n.length=r,i.length=r,this.heapify_()}}const G={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class tT extends eT{constructor(e,n){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const n=super.enqueue(e);return n&&e[0].addEventListener(q.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const n=e.target,i=n.getState();if(i===G.LOADED||i===G.ERROR||i===G.EMPTY){i!==G.ERROR&&n.removeEventListener(q.CHANGE,this.boundHandleTileChange_);const r=n.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let i=0,r,s,o;for(;this.tilesLoading_<e&&i<n&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===G.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}function nT(t,e,n,i,r){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][e.getKey()])return Nu;const s=t.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class Jp extends ni{constructor(e){super();const n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){tf(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&tf(this.element);for(let n=0,i=this.listenerKeys.length;n<i;++n)Pe(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==to&&this.listenerKeys.push(pe(e,Wi.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class iT extends Jp{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const n=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:n+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"›",o=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(q.CLICK,this.handleClick_.bind(this),!1);const u=n+" "+Rc+" "+Kp+(this.collapsed_&&this.collapsible_?" "+yy:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const n=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(e)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),n}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=await Promise.all(this.collectSourceAttributions_(e).map(r=>xa(()=>r))),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!vr(n,this.renderedAttributions_)){Z2(this.ulElement_);for(let r=0,s=n.length;r<s;++r){const o=document.createElement("li");o.innerHTML=n[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(yy),this.collapsed_?my(this.collapseLabel_,this.label_):my(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class rT extends Jp{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const n=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"⇧",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(q.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+Rc+" "+Kp,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(kl)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:go}):n.setRotation(0))}render(e){const n=e.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(kl);!s&&i===0?this.element.classList.add(kl):s&&i!==0&&this.element.classList.remove(kl)}this.label_.style.transform=r}this.rotation_=i}}class sT extends Jp{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const n=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=r,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(q.CLICK,this.handleClick_.bind(this,i),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=u,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(q.CLICK,this.handleClick_.bind(this,-i),!1);const d=n+" "+Rc+" "+Kp,f=this.element;f.className=d,f.appendChild(c),f.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:go})):i.setZoom(s)}}}function oT(t){t=t||{};const e=new Xn;return(t.zoom!==void 0?t.zoom:!0)&&e.push(new sT(t.zoomOptions)),(t.rotate!==void 0?t.rotate:!0)&&e.push(new rT(t.rotateOptions)),(t.attribution!==void 0?t.attribution:!0)&&e.push(new iT(t.attributionOptions)),e}const ky={ACTIVE:"active"};class Ja extends ni{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(ky.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(ky.ACTIVE,e)}setMap(e){this.map_=e}}function aT(t,e,n){const i=t.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:a2,center:t.getConstrainedCenter(r)})}}function Qp(t,e,n,i){const r=t.getZoom();if(r===void 0)return;const s=t.getConstrainedZoom(r+e),o=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:i!==void 0?i:250,easing:go})}class lT extends Ja{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==Xe.DBLCLICK){const i=e.originalEvent,r=e.map,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();Qp(a,o,s,this.duration_),i.preventDefault(),n=!0}return!n}}class Qa extends Ja{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Xe.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Xe.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Xe.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,n=this.stopDown(i)}else e.type==Xe.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function eg(t){const e=t.length;let n=0,i=0;for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return{clientX:n/e,clientY:i/e}}function lf(t){const e=arguments;return function(n){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](n),!!i);++r);return i}}const uT=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},cT=function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)},Mv=function(t){return t.map.getTargetElement().hasAttribute("tabindex")?cT(t):!0},hT=va,Fv=function(t){const e=t.originalEvent;return e.button==0&&!(Y2&&cv&&e.ctrlKey)},Pv=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},dT=function(t){const e=t.originalEvent;return cv?e.metaKey:e.ctrlKey},fT=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Lv=function(t){const e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},Fh=function(t){const e=t.originalEvent;return ce(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},pT=function(t){const e=t.originalEvent;return ce(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class gT extends Qa{constructor(e){super({stopDown:gc}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=e.condition?e.condition:lf(Pv,pT);this.condition_=e.onFocusOnly?lf(Mv,n):n,this.noKinetic_=!1}handleDragEvent(e){const n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,r=n.getEventPixel(eg(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();BC(s,a.getResolution()),Rp(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const n=e.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:go})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class mT extends Qa{constructor(e){e=e||{},super({stopDown:gc}),this.condition_=e.condition?e.condition:uT,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Fh(e))return;const n=e.map,i=n.getView();if(i.getConstraints().rotation===Lp)return;const r=n.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return Fh(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Fh(e)&&Fv(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class yT extends vp{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,n=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],n[0])+i,r.top=Math.min(e[1],n[1])+i,r.width=Math.abs(n[0]-e[0])+i,r.height=Math.abs(n[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,n=this.endPixel_,r=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Fi([r])}getGeometry(){return this.geometry_}}const Ao={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Ml extends ti{constructor(e,n,i){super(e),this.coordinate=n,this.mapBrowserEvent=i}}class _T extends Qa{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new yT(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Fv,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,i){const r=i[0]-n[0],s=i[1]-n[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Ml(Ao.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;this.box_.setMap(null);const n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new Ml(n?Ao.BOXEND:Ao.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ml(Ao.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Ml(Ao.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}}class vT extends _T{constructor(e){e=e||{};const n=e.condition?e.condition:fT;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:go})}}const Tr={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class xT extends Ja{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return Pv(n)&&Lv(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==q.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Tr.DOWN||r==Tr.LEFT||r==Tr.RIGHT||r==Tr.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,u=0;r==Tr.DOWN?u=-a:r==Tr.LEFT?l=-a:r==Tr.RIGHT?l=a:u=a;const c=[l,u];Rp(c,o.getRotation()),aT(o,c,this.duration_),i.preventDefault(),n=!0}}return!n}}class wT extends Ja{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!dT(n)&&Lv(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==q.KEYDOWN||e.type==q.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();Qp(a,o,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}class ET{constructor(e,n,i){this.decay_=e,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[n+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[n]-this.points_[i],o=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class CT extends Ja{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const n=e.condition?e.condition:hT;this.condition_=e.onFocusOnly?lf(Mv,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==q.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==q.WHEEL&&(s=r.deltaY,B2&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=hv),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const n=e.getView();n.getAnimating()&&n.cancelAnimations();let i=-Qe(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Qp(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class ST extends Qa{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=gc),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==Lp&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(eg(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class TT extends Qa{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=gc),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,u=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(eg(this.targetPointers))),l.render(),u.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function RT(t){t=t||{};const e=new Xn,n=new ET(-.005,.05,100);return(t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0)&&e.push(new mT),(t.doubleClickZoom!==void 0?t.doubleClickZoom:!0)&&e.push(new lT({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan!==void 0?t.dragPan:!0)&&e.push(new gT({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate!==void 0?t.pinchRotate:!0)&&e.push(new ST),(t.pinchZoom!==void 0?t.pinchZoom:!0)&&e.push(new TT({duration:t.zoomDuration})),(t.keyboard!==void 0?t.keyboard:!0)&&(e.push(new xT),e.push(new wT({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0)&&e.push(new CT({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom!==void 0?t.shiftDragZoom:!0)&&e.push(new vT({duration:t.zoomDuration})),e}function Av(t){if(t instanceof Za){t.setMapInternal(null);return}t instanceof is&&t.getLayers().forEach(Av)}function bv(t,e){if(t instanceof Za){t.setMapInternal(e);return}if(t instanceof is){const n=t.getLayers().getArray();for(let i=0,r=n.length;i<r;++i)bv(n[i],e)}}let Ov=class extends ni{constructor(e){super(),e=e||{},this.on,this.once,this.un;const n=IT(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:hv,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=yn(),this.pixelToCoordinateTransform_=yn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||oT(),this.interactions=n.interactions||RT({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new tT(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(St.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(St.VIEW,this.handleViewChanged_),this.addChangeListener(St.SIZE,this.handleSizeChanged_),this.addChangeListener(St.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;e.view&&!(e.view instanceof Vn)&&e.view.then(function(r){i.setView(new Vn(r))}),this.controls.addEventListener(jt.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(jt.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(jt.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(jt.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(jt.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(jt.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){bv(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:va,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,n,null,o,null)}getFeaturesAtPixel(e,n){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},n),i}getAllLayers(){const e=[];function n(i){i.forEach(function(r){r instanceof is?n(r.getLayers()):e.push(r)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const r=n.layerFilter!==void 0?n.layerFilter:va,s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(St.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Jd(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const n=this.frameState_;return n?st(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(St.LAYERGROUP)}setLayers(e){const n=this.getLayerGroup();if(e instanceof Xn){n.setLayers(e);return}const i=n.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){const r=e[n];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const n=di(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){const n=this.frameState_;return n?st(n.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(St.SIZE)}getView(){return this.get(St.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,i,r){return nT(this.frameState_,e,n,i,r)}handleBrowserEvent(e,n){n=n||e.type;const i=new ji(n,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const n=e.originalEvent,i=n.type;if(i===af.POINTERDOWN||i===q.WHEEL||i===q.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=n.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[$e.ANIMATING]||o[$e.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(gn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(gn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new gs(Wi.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new gs(Wi.LOADSTART,this,e))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)Pe(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(q.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(q.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,tf(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new JS(this)),this.mapBrowserEventHandler_=new QS(this,this.moveTolerance_);for(const s in Xe)this.mapBrowserEventHandler_.addEventListener(Xe[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(q.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(q.WHEEL,this.boundHandleBrowserEvent_,pv?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[pe(i,q.KEYDOWN,this.handleBrowserEvent,this),pe(i,q.KEYPRESS,this.handleBrowserEvent,this)];const r=n.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Pe(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Pe(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=pe(e,eo.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=pe(e,q.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Pe),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Bi("addlayer",e)),this.layerGroupPropertyListenerKeys_=[pe(e,eo.PROPERTYCHANGE,this.render,this),pe(e,q.CHANGE,this.render,this),pe(e,"addlayer",this.handleLayerAdd_,this),pe(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){const r=e[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Av(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const n=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(n!==void 0&&dy(n)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Kd(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:ee(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=Kd(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!$a(this.previousExtent_)&&!io(s.extent,this.previousExtent_))&&(this.dispatchEvent(new gs(Wi.MOVESTART,this,r)),this.previousExtent_=fo(this.previousExtent_)),this.previousExtent_&&!s.viewHints[$e.ANIMATING]&&!s.viewHints[$e.INTERACTING]&&!io(s.extent,this.previousExtent_)&&(this.dispatchEvent(new gs(Wi.MOVEEND,this,s)),A1(s.extent,this.previousExtent_))),this.dispatchEvent(new gs(Wi.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(Wi.LOADSTART)||this.hasListener(Wi.LOADEND)||this.hasListener(gn.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new Bi("removelayer",n)),this.set(St.LAYERGROUP,e)}setSize(e){this.set(St.SIZE,e)}setTarget(e){this.set(St.TARGET,e)}setView(e){if(!e||e instanceof Vn){this.set(St.VIEW,e);return}this.set(St.VIEW,new Vn);const n=this;e.then(function(i){n.setView(new Vn(i))})}updateSize(){const e=this.getTargetElement();let n;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(n=[s,o],!dy(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&W1("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!vr(n,i))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){const n=this.getView();n&&n.setViewportSize(e)}};function IT(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new is({layers:t.layers});n[St.LAYERGROUP]=i,n[St.TARGET]=t.target,n[St.VIEW]=t.view instanceof Vn?t.view:new Vn;let r;t.controls!==void 0&&(Array.isArray(t.controls)?r=new Xn(t.controls.slice()):(ce(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=t.controls));let s;t.interactions!==void 0&&(Array.isArray(t.interactions)?s=new Xn(t.interactions.slice()):(ce(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions));let o;return t.overlays!==void 0?Array.isArray(t.overlays)?o=new Xn(t.overlays.slice()):(ce(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new Xn,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:n}}const Z={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Fl=[Z.FILL],Qi=[Z.STROKE],Nr=[Z.BEGIN_PATH],My=[Z.CLOSE_PATH];class Dv{drawCustom(e,n,i,r,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,n,i){}drawFeature(e,n,i){}drawGeometryCollection(e,n,i){}drawLineString(e,n,i){}drawMultiLineString(e,n,i){}drawMultiPoint(e,n,i){}drawMultiPolygon(e,n,i){}drawPoint(e,n,i){}drawPolygon(e,n,i){}drawText(e,n,i){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}}class el extends Dv{constructor(e,n,i,r){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const n=this.pixelRatio;return n==1?e:e.map(function(i){return i*n})}appendFlatPointCoordinates(e,n){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=n)r[0]=e[a],r[1]=e[a+1],no(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,n,i,r,s,o){const a=this.coordinates;let l=a.length;const u=this.getBufferedMaxExtent();o&&(n+=r);let c=e[n],h=e[n+1];const d=this.tmpCoordinate_;let f=!0,p,y,v;for(p=n+r;p<i;p+=r)d[0]=e[p],d[1]=e[p+1],v=Yd(u,d),v!==y?(f&&(a[l++]=c,a[l++]=h,f=!1),a[l++]=d[0],a[l++]=d[1]):v===it.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,c=d[0],h=d[1],y=v;return(s&&f||p===n+r)&&(a[l++]=c,a[l++]=h),l}drawCustomCoordinates_(e,n,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],u=this.appendFlatLineCoordinates(e,n,l,r,!1,!1);s.push(u),n=l}return n}drawCustom(e,n,i,r,s){this.beginGeometry(e,n,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let u,c,h,d,f;switch(o){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),d=[];const p=e.getEndss();f=0;for(let y=0,v=p.length;y<v;++y){const m=[];f=this.drawCustomCoordinates_(u,f,p[y],a,m),d.push(m)}this.instructions.push([Z.CUSTOM,l,d,e,i,Qd,s]),this.hitDetectionInstructions.push([Z.CUSTOM,l,d,e,r||i,Qd,s]);break;case"Polygon":case"MultiLineString":h=[],u=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(u,0,e.getEnds(),a,h),this.instructions.push([Z.CUSTOM,l,h,e,i,Ea,s]),this.hitDetectionInstructions.push([Z.CUSTOM,l,h,e,r||i,Ea,s]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(u,0,u.length,a,!1,!1),this.instructions.push([Z.CUSTOM,l,c,e,i,qi,s]),this.hitDetectionInstructions.push([Z.CUSTOM,l,c,e,r||i,qi,s]);break;case"MultiPoint":u=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(u,a),c>l&&(this.instructions.push([Z.CUSTOM,l,c,e,i,qi,s]),this.hitDetectionInstructions.push([Z.CUSTOM,l,c,e,r||i,qi,s]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),c=this.coordinates.length,this.instructions.push([Z.CUSTOM,l,c,e,i,void 0,s]),this.hitDetectionInstructions.push([Z.CUSTOM,l,c,e,r||i,void 0,s]);break}this.endGeometry(n)}beginGeometry(e,n,i){this.beginGeometryInstruction1_=[Z.BEGIN_GEOMETRY,n,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Z.BEGIN_GEOMETRY,n,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let n;const i=e.length;let r,s,o=-1;for(n=0;n<i;++n)r=e[n],s=r[0],s==Z.END_GEOMETRY?o=n:s==Z.BEGIN_GEOMETRY&&(r[2]=n,SC(this.hitDetectionInstructions,o,n),o=-1)}setFillStrokeStyle(e,n){const i=this.state;if(e){const r=e.getColor();i.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,i.fillStyle=$n(r||Wt)}else i.fillStyle=void 0;if(n){const r=n.getColor();i.strokeStyle=$n(r||Ia);const s=n.getLineCap();i.lineCap=s!==void 0?s:so;const o=n.getLineDash();i.lineDash=o?o.slice():wi;const a=n.getLineDashOffset();i.lineDashOffset=a||Ei;const l=n.getLineJoin();i.lineJoin=l!==void 0?l:oo;const u=n.getWidth();i.lineWidth=u!==void 0?u:Ma;const c=n.getMiterLimit();i.miterLimit=c!==void 0?c:Ra,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const n=e.fillStyle,i=[Z.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Z.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,n){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!vr(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(i!==void 0&&n.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[Z.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=A1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;lr(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class kT extends el{constructor(e,n,i,r){super(e,n,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n,i){if(!this.image_||this.maxExtent&&!no(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,n,i);const r=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,s);this.instructions.push([Z.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Z.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n,i){if(!this.image_)return;this.beginGeometry(e,n,i);const r=e.getFlatCoordinates(),s=[];for(let l=0,u=r.length;l<u;l+=e.getStride())(!this.maxExtent||no(this.maxExtent,r.slice(l,l+2)))&&s.push(r[l],r[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([Z.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Z.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}class MT extends el{constructor(e,n,i,r){super(e,n,i,r)}drawFlatCoordinates_(e,n,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,n,i,r,!1,!1),a=[Z.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,n,i){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,n,i),this.hitDetectionInstructions.push([Z.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,wi,Ei],Nr);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(Qi),this.endGeometry(n)}drawMultiLineString(e,n,i){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,n,i),this.hitDetectionInstructions.push([Z.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,wi,Ei],Nr);const a=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=a.length;h<d;++h)c=this.drawFlatCoordinates_(l,c,a[h],u);this.hitDetectionInstructions.push(Qi),this.endGeometry(n)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Qi),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Qi),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Nr)}}class Fy extends el{constructor(e,n,i,r){super(e,n,i,r)}drawFlatCoordinatess_(e,n,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(Nr),this.hitDetectionInstructions.push(Nr);for(let u=0;u<l;++u){const c=i[u],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,n,c,r,!0,!a),f=[Z.MOVE_TO_LINE_TO,h,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(My),this.hitDetectionInstructions.push(My)),n=c}return o&&(this.instructions.push(Fl),this.hitDetectionInstructions.push(Fl)),a&&(this.instructions.push(Qi),this.hitDetectionInstructions.push(Qi)),n}drawCircle(e,n,i){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Z.SET_FILL_STYLE,Wt]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Z.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,wi,Ei]);const a=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const c=[Z.CIRCLE,u];this.instructions.push(Nr,c),this.hitDetectionInstructions.push(Nr,c),r.fillStyle!==void 0&&(this.instructions.push(Fl),this.hitDetectionInstructions.push(Fl)),r.strokeStyle!==void 0&&(this.instructions.push(Qi),this.hitDetectionInstructions.push(Qi)),this.endGeometry(n)}drawPolygon(e,n,i){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Z.SET_FILL_STYLE,Wt]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Z.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,wi,Ei]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,a,u),this.endGeometry(n)}drawMultiPolygon(e,n,i){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Z.SET_FILL_STYLE,Wt]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Z.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,wi,Ei]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=a.length;h<d;++h)c=this.drawFlatCoordinatess_(l,c,a[h],u);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const n=this.coordinates;for(let i=0,r=n.length;i<r;++i)n[i]=Fr(n[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function FT(t,e,n,i,r){const s=[];let o=n,a=0,l=e.slice(n,2);for(;a<t&&o+r<i;){const[u,c]=l.slice(-2),h=e[o+r],d=e[o+r+1],f=Math.sqrt((h-u)*(h-u)+(d-c)*(d-c));if(a+=f,a>=t){const p=(t-a+f)/f,y=Ht(u,h,p),v=Ht(c,d,p);l.push(y,v),s.push(l),l=[y,v],a==t&&(o+=r),a=0}else if(a<t)l.push(e[o+r],e[o+r+1]),o+=r;else{const p=f-a,y=Ht(u,h,p/f),v=Ht(c,d,p/f);l.push(y,v),s.push(l),l=[y,v],a=0,o+=r}}return a>0&&s.push(l),s}function PT(t,e,n,i,r){let s=n,o=n,a=0,l=0,u=n,c,h,d,f,p,y,v,m,g,_;for(h=n;h<i;h+=r){const x=e[h],w=e[h+1];p!==void 0&&(g=x-p,_=w-y,f=Math.sqrt(g*g+_*_),v!==void 0&&(l+=d,c=Math.acos((v*g+m*_)/(d*f)),c>t&&(l>a&&(a=l,s=u,o=h),l=0,u=h-r)),d=f,v=g,m=_),p=x,y=w}return l+=f,l>a?[u,h]:[s,o]}const Gu={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class LT extends el{constructor(e,n,i,r){super(e,n,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Wt]={fillStyle:Wt},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n,i){const r=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!r&&!s)return;const a=this.coordinates;let l=a.length;const u=e.getType();let c=null,h=e.getStride();if(o.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!He(this.maxExtent,e.getExtent()))return;let d;if(c=e.getFlatCoordinates(),u=="LineString")d=[c.length];else if(u=="MultiLineString")d=e.getEnds();else if(u=="Polygon")d=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const v=e.getEndss();d=[];for(let m=0,g=v.length;m<g;++m)d.push(v[m][0])}this.beginGeometry(e,n,i);const f=o.repeat,p=f?void 0:o.textAlign;let y=0;for(let v=0,m=d.length;v<m;++v){let g;f?g=FT(f*this.resolution,c,y,d[v],h):g=[c.slice(y,d[v])];for(let _=0,x=g.length;_<x;++_){const w=g[_];let S=0,E=w.length;if(p==null){const R=PT(o.maxAngle,w,0,w.length,2);S=R[0],E=R[1]}for(let R=S;R<E;R+=h)a.push(w[R],w[R+1]);const C=a.length;y=d[v],this.drawChars_(l,C),l=C}}this.endGeometry(n)}else{let d=o.overflow?null:[];switch(u){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),h=2;break;case"Polygon":c=e.getFlatInteriorPoint(),o.overflow||d.push(c[2]/this.resolution),h=3;break;case"MultiPolygon":const g=e.getFlatInteriorPoints();c=[];for(let _=0,x=g.length;_<x;_+=3)o.overflow||d.push(g[_+2]/this.resolution),c.push(g[_],g[_+1]);if(c.length===0)return;h=2;break}const f=this.appendFlatPointCoordinates(c,h);if(f===l)return;if(d&&(f-l)/2!==c.length/h){let g=l/2;d=d.filter((_,x)=>{const w=a[(g+x)*2]===c[x*h]&&a[(g+x)*2+1]===c[x*h+1];return w||--g,w})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,n,i);let p=o.padding;if(p!=zr&&(o.scale[0]<0||o.scale[1]<0)){let g=o.padding[0],_=o.padding[1],x=o.padding[2],w=o.padding[3];o.scale[0]<0&&(_=-_,w=-w),o.scale[1]<0&&(g=-g,x=-x),p=[g,_,x,w]}const y=this.pixelRatio;this.instructions.push([Z.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,p==zr?zr:p.map(function(g){return g*y}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const v=1/y,m=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=Wt,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Z.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[v,v],NaN,this.declutterMode_,this.declutterImageWithText_,p,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Wt:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),o.backgroundFill&&(this.state.fillStyle=m,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){const e=this.textStrokeState_,n=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||ka,justify:n.justify,textBaseline:n.textBaseline||bu,scale:n.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,n){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=Gu[r.textBaseline],c=this.textOffsetY_*l,h=this.text_,d=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Z.DRAW_CHARS,e,n,u,r.overflow,a,r.maxAngle,l,c,s,d*l,h,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([Z.DRAW_CHARS,e,n,u,r.overflow,a&&Wt,r.maxAngle,l,c,s,d*l,h,o,1/l,this.declutterMode_])}setTextStyle(e,n){let i,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=$n(o.getColor()||Wt)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const p=a.getLineDash(),y=a.getLineDashOffset(),v=a.getWidth(),m=a.getMiterLimit();s.lineCap=a.getLineCap()||so,s.lineDash=p?p.slice():wi,s.lineDashOffset=y===void 0?Ei:y,s.lineJoin=a.getLineJoin()||oo,s.lineWidth=v===void 0?Ma:v,s.miterLimit=m===void 0?Ra:m,s.strokeStyle=$n(a.getColor()||Ia)}i=this.textState_;const l=e.getFont()||mv;yv(l);const u=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||bu,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||zr,i.scale=u===void 0?[1,1]:u;const c=e.getOffsetX(),h=e.getOffsetY(),d=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=f===void 0?0:f,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:ee(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+ee(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}const AT={Circle:Fy,Default:el,Image:kT,LineString:MT,Polygon:Fy,Text:LT};class zv{constructor(e,n,i,r){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const n in this.buildersByZIndex_){e[n]=e[n]||{};const i=this.buildersByZIndex_[n];for(const r in i){const s=i[r].finish();e[n][r]=s}}return e}getBuilder(e,n){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[n];if(s===void 0){const o=AT[n];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[n]=s}return s}}class bT extends Xa{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e}getFeatures(e){return H()}getData(e){return null}prepareFrame(e){return H()}renderFrame(e,n){return H()}loadedTileCallback(e,n,i){e[n]||(e[n]={}),e[n][i.tileCoord.toString()]=i}createLoadedTileFinder(e,n,i){return(r,s)=>{const o=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(n,r,s,o)}}forEachFeatureAtCoordinate(e,n,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const n=e.target;(n.getState()===oe.LOADED||n.getState()===oe.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=oe.LOADED&&n!=oe.ERROR&&e.addEventListener(q.CHANGE,this.boundHandleImageChange_),n==oe.IDLE&&(e.load(),n=e.getState()),n==oe.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class tg{constructor(){zg(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Au(),{get:(e,n)=>{if(typeof Au()[n]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n),this.pushMethodArgs_},set:(e,n,i)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n,i),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(n=>{for(let i=0,r=n.length;i<r;++i){const s=n[i];if(typeof s=="function"){s(e);continue}const o=n[++i];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Py=[];let ms=null;function OT(){ms=lt(1,1,void 0,{willReadFrequently:!0})}class Nv extends bT{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=yn(),this.pixelTransform=yn(),this.inversePixelTransform=yn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,n,i){ms||OT(),ms.clearRect(0,0,1,1);let r;try{ms.drawImage(e,n,i,1,1,0,0,1,1),r=ms.getImageData(0,0,1,1).data}catch{return ms=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,n,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&vr(Ta(e.style.backgroundColor),Ta(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===n?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=lt();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,n,i){const r=Li(i),s=xc(i),o=vc(i),a=_c(i);st(n.coordinateToPixelTransform,r),st(n.coordinateToPixelTransform,s),st(n.coordinateToPixelTransform,o),st(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;st(l,r),st(l,s),st(l,o),st(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,n){const i=e.extent,r=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(Ce(i)/r*o),l=Math.round(Rt(i)/r*o);Mi(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),Y1(this.inversePixelTransform,this.pixelTransform);const u=h2(this.pixelTransform);if(this.useContainer(n,u,this.getBackground(e)),!this.containerReused){const c=this.context.canvas;c.width!=a||c.height!=l?(c.width=a,c.height=l):this.context.clearRect(0,0,a,l),u!==c.style.transform&&(c.style.transform=u)}}dispatchRenderEvent_(e,n,i){const r=this.getLayer();if(r.hasListener(e)){const s=new kv(e,this.inversePixelTransform,i,n);r.dispatchEvent(s)}}preRender(e,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(gn.PRERENDER,e,n)}postRender(e,n){n.declutter||this.dispatchRenderEvent_(gn.POSTRENDER,e,n)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new tg),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(gn.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(gn.POSTRENDER,this.context,e))}getRenderTransform(e,n,i,r,s,o,a){const l=s/2,u=o/2,c=r/n,h=-c,d=-e[0]+a,f=-e[1];return Mi(this.tempTransform,l,u,c,h,-i,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function DT(t,e,n,i,r,s,o,a,l,u,c,h){let d=t[e],f=t[e+1],p=0,y=0,v=0,m=0;function g(){p=d,y=f,e+=i,d=t[e],f=t[e+1],m+=v,v=Math.sqrt((d-p)*(d-p)+(f-y)*(f-y))}do g();while(e<n-i&&m+v<s);let _=v===0?0:(s-m)/v;const x=Ht(p,d,_),w=Ht(y,f,_),S=e-i,E=m,C=s+a*l(u,r,c);for(;e<n-i&&m+v<C;)g();_=v===0?0:(C-m)/v;const R=Ht(p,d,_),L=Ht(y,f,_);let D;if(h){const P=[x,w,R,L];Z1(P,0,4,2,h,P,P),D=P[0]>P[2]}else D=x>R;const I=Math.PI,W=[],A=S+i===e;e=S,v=0,m=E,d=t[e],f=t[e+1];let k;if(A){g(),k=Math.atan2(f-y,d-p),D&&(k+=k>0?-I:I);const P=(R+x)/2,U=(L+w)/2;return W[0]=[P,U,(C-s)/2,k,r],W}r=r.replace(/\n/g," ");for(let P=0,U=r.length;P<U;){g();let F=Math.atan2(f-y,d-p);if(D&&(F+=F>0?-I:I),k!==void 0){let b=F-k;if(b+=b>I?-2*I:b<-I?2*I:0,Math.abs(b)>o)return null}k=F;const j=P;let T=0;for(;P<U;++P){const b=D?U-P-1:P,me=a*l(u,r[b],c);if(e+i<n&&m+v<s+T+me/2)break;T+=me}if(P===j)continue;const X=D?r.substring(U-j,U-P):r.substring(j,P);_=v===0?0:(s+T/2-m)/v;const B=Ht(p,d,_),ae=Ht(y,f,_);W.push([B,ae,T/2,F,X]),s+=T}return W}function Gv(t,e,n,i){let r=t[e],s=t[e+1],o=0;for(let a=e+i;a<n;a+=i){const l=t[a],u=t[a+1];o+=Math.sqrt((l-r)*(l-r)+(u-s)*(u-s)),r=l,s=u}return o}const as=xn(),Di=[],li=[],ui=[],zi=[];function Ly(t){return t[3].declutterBox}const Ay=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function Ph(t,e){return e==="start"?e=Ay.test(t)?"right":"left":e==="end"&&(e=Ay.test(t)?"left":"right"),Gu[e]}function zT(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}class NT{constructor(e,n,i,r,s){this.overlaps=i,this.pixelRatio=n,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=yn(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new tg:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,n,i,r){const s=e+n+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[n],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],h=Array.isArray(e),d=l.justify?Gu[l.justify]:Ph(Array.isArray(e)?e[0]:e,l.textAlign||ka),f=r&&o.lineWidth?o.lineWidth:0,p=h?e:e.split(`
`).reduce(zT,[]),{width:y,height:v,widths:m,heights:g,lineWidths:_}=rS(l,p),x=y+f,w=[],S=(x+2)*c[0],E=(v+f)*c[1],C={width:S<0?Math.floor(S):Math.ceil(S),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:w};(c[0]!=1||c[1]!=1)&&w.push("scale",c),r&&(w.push("strokeStyle",o.strokeStyle),w.push("lineWidth",f),w.push("lineCap",o.lineCap),w.push("lineJoin",o.lineJoin),w.push("miterLimit",o.miterLimit),w.push("setLineDash",[o.lineDash]),w.push("lineDashOffset",o.lineDashOffset)),i&&w.push("fillStyle",a.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");const R=.5-d;let L=d*x+R*f;const D=[],I=[];let W=0,A=0,k=0,P=0,U;for(let F=0,j=p.length;F<j;F+=2){const T=p[F];if(T===`
`){A+=W,W=0,L=d*x+R*f,++P;continue}const X=p[F+1]||l.font;X!==U&&(r&&D.push("font",X),i&&I.push("font",X),U=X),W=Math.max(W,g[k]);const B=[T,L+R*m[k]+d*(m[k]-_[P]),.5*(f+W)+A];L+=m[k],r&&D.push("strokeText",B),i&&I.push("fillText",B),++k}return Array.prototype.push.apply(w,D),Array.prototype.push.apply(w,I),this.labels_[s]=C,C}replayTextBackground_(e,n,i,r,s,o,a){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,n),o&&(this.alignAndScaleFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,n,i,r,s,o,a,l,u,c,h,d,f,p,y,v){a*=d[0],l*=d[1];let m=i-a,g=r-l;const _=s+u>e?e-u:s,x=o+c>n?n-c:o,w=p[3]+_*d[0]+p[1],S=p[0]+x*d[1]+p[2],E=m-p[3],C=g-p[0];(y||h!==0)&&(Di[0]=E,zi[0]=E,Di[1]=C,li[1]=C,li[0]=E+w,ui[0]=li[0],ui[1]=C+S,zi[1]=ui[1]);let R;return h!==0?(R=Mi(yn(),i,r,1,1,h,-i,-r),st(R,Di),st(R,li),st(R,ui),st(R,zi),ki(Math.min(Di[0],li[0],ui[0],zi[0]),Math.min(Di[1],li[1],ui[1],zi[1]),Math.max(Di[0],li[0],ui[0],zi[0]),Math.max(Di[1],li[1],ui[1],zi[1]),as)):ki(Math.min(E,E+w),Math.min(C,C+S),Math.max(E,E+w),Math.max(C,C+S),as),f&&(m=Math.round(m),g=Math.round(g)),{drawImageX:m,drawImageY:g,drawImageW:_,drawImageH:x,originX:u,originY:c,declutterBox:{minX:as[0],minY:as[1],maxX:as[2],maxY:as[3],value:v},canvasTransform:R,scale:d}}replayImageOrLabel_(e,n,i,r,s,o,a){const l=!!(o||a),u=r.declutterBox,c=a?a[2]*r.scale[0]/2:0;return u.minX-c<=n[0]&&u.maxX+c>=0&&u.minY-c<=n[1]&&u.maxY+c>=0&&(l&&this.replayTextBackground_(e,Di,li,ui,zi,o,a),sS(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const n=this.alignAndScaleFill_;if(n){const i=st(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),n!==1&&e.scale(n,n),e.rotate(this.viewRotation_)}e.fill(),n&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6])}drawLabelWithPointPlacement_(e,n,i,r){const s=this.textStates[n],o=this.createLabel(e,n,r,i),a=this.strokeStates[i],l=this.pixelRatio,u=Ph(Array.isArray(e)?e[0]:e,s.textAlign||ka),c=Gu[s.textBaseline||bu],h=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],f=u*d+2*(.5-u)*h,p=c*o.height/l+2*(.5-c)*h;return{label:o,anchorX:f,anchorY:p}}execute_(e,n,i,r,s,o,a,l){const u=this.zIndexContext_;let c;this.pixelCoordinates_&&vr(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=ur(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),l2(this.renderedTransform_,i));let h=0;const d=r.length;let f=0,p,y,v,m,g,_,x,w,S,E,C,R,L,D=0,I=0,W=null,A=null;const k=this.coordinateCache_,P=this.viewRotation_,U=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,F={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:P},j=this.instructions!=r||this.overlaps?0:200;let T,X,B,ae;for(;h<d;){const b=r[h];switch(b[0]){case Z.BEGIN_GEOMETRY:T=b[1],ae=b[3],T.getGeometry()?a!==void 0&&!He(a,ae.getExtent())?h=b[2]+1:++h:h=b[2],u&&(u.zIndex=b[4]);break;case Z.BEGIN_PATH:D>j&&(this.fill_(e),D=0),I>j&&(e.stroke(),I=0),!D&&!I&&(e.beginPath(),g=NaN,_=NaN),++h;break;case Z.CIRCLE:f=b[1];const ue=c[f],we=c[f+1],je=c[f+2],ut=c[f+3],N=je-ue,En=ut-we,Dn=Math.sqrt(N*N+En*En);e.moveTo(ue+Dn,we),e.arc(ue,we,Dn,0,2*Math.PI,!0),++h;break;case Z.CLOSE_PATH:e.closePath(),++h;break;case Z.CUSTOM:f=b[1],p=b[2];const he=b[3],Cn=b[4],Sn=b[5];F.geometry=he,F.feature=T,h in k||(k[h]=[]);const Le=k[h];Sn?Sn(c,f,p,2,Le):(Le[0]=c[f],Le[1]=c[f+1],Le.length=2),u&&(u.zIndex=b[6]),Cn(Le,F),++h;break;case Z.DRAW_IMAGE:f=b[1],p=b[2],S=b[3],y=b[4],v=b[5];let ii=b[6];const We=b[7],ri=b[8],ct=b[9],Ye=b[10];let Mt=b[11];const Tn=b[12];let _e=b[13];m=b[14]||"declutter";const ye=b[15];if(!S&&b.length>=20){E=b[19],C=b[20],R=b[21],L=b[22];const an=this.drawLabelWithPointPlacement_(E,C,R,L);S=an.label,b[3]=S;const Cr=b[23];y=(an.anchorX-Cr)*this.pixelRatio,b[4]=y;const ln=b[24];v=(an.anchorY-ln)*this.pixelRatio,b[5]=v,ii=S.height,b[6]=ii,_e=S.width,b[13]=_e}let de;b.length>25&&(de=b[25]);let ve,ie,K;b.length>17?(ve=b[16],ie=b[17],K=b[18]):(ve=zr,ie=!1,K=!1),Ye&&U?Mt+=P:!Ye&&!U&&(Mt-=P);let De=0;for(;f<p;f+=2){if(de&&de[De++]<_e/this.pixelRatio)continue;const an=this.calculateImageOrLabelDimensions_(S.width,S.height,c[f],c[f+1],_e,ii,y,v,ri,ct,Mt,Tn,s,ve,ie||K,T),Cr=[e,n,S,an,We,ie?W:null,K?A:null];if(l){let ln,zn,un;if(ye){const Ve=p-f;if(!ye[Ve]){ye[Ve]={args:Cr,declutterMode:m};continue}const At=ye[Ve];ln=At.args,zn=At.declutterMode,delete ye[Ve],un=Ly(ln)}let si,oi;if(ln&&(zn!=="declutter"||!l.collides(un))&&(si=!0),(m!=="declutter"||!l.collides(an.declutterBox))&&(oi=!0),zn==="declutter"&&m==="declutter"){const Ve=si&&oi;si=Ve,oi=Ve}si&&(zn!=="none"&&l.insert(un),this.replayImageOrLabel_.apply(this,ln)),oi&&(m!=="none"&&l.insert(an.declutterBox),this.replayImageOrLabel_.apply(this,Cr))}else this.replayImageOrLabel_.apply(this,Cr)}++h;break;case Z.DRAW_CHARS:const Ae=b[1],Ft=b[2],ht=b[3],dt=b[4];L=b[5];const vt=b[6],ke=b[7],Pt=b[8];R=b[9];const xt=b[10];E=b[11],C=b[12];const Lt=[b[13],b[13]];m=b[14]||"declutter";const qe=this.textStates[C],Rn=qe.font,wr=[qe.scale[0]*ke,qe.scale[1]*ke];let Er;Rn in this.widths_?Er=this.widths_[Rn]:(Er={},this.widths_[Rn]=Er);const il=Gv(c,Ae,Ft,2),Dg=Math.abs(wr[0])*vy(Rn,E,Er);if(dt||Dg<=il){const an=this.textStates[C].textAlign,Cr=(il-Dg)*Ph(E,an),ln=DT(c,Ae,Ft,2,E,Cr,vt,Math.abs(wr[0]),vy,Rn,Er,U?0:this.viewRotation_);e:if(ln){const zn=[];let un,si,oi,Ve,At;if(R)for(un=0,si=ln.length;un<si;++un){At=ln[un],oi=At[4],Ve=this.createLabel(oi,C,"",R),y=At[2]+(wr[0]<0?-xt:xt),v=ht*Ve.height+(.5-ht)*2*xt*wr[1]/wr[0]-Pt;const ai=this.calculateImageOrLabelDimensions_(Ve.width,Ve.height,At[0],At[1],Ve.width,Ve.height,y,v,0,0,At[3],Lt,!1,zr,!1,T);if(l&&m==="declutter"&&l.collides(ai.declutterBox))break e;zn.push([e,n,Ve,ai,1,null,null])}if(L)for(un=0,si=ln.length;un<si;++un){At=ln[un],oi=At[4],Ve=this.createLabel(oi,C,L,""),y=At[2],v=ht*Ve.height-Pt;const ai=this.calculateImageOrLabelDimensions_(Ve.width,Ve.height,At[0],At[1],Ve.width,Ve.height,y,v,0,0,At[3],Lt,!1,zr,!1,T);if(l&&m==="declutter"&&l.collides(ai.declutterBox))break e;zn.push([e,n,Ve,ai,1,null,null])}l&&m!=="none"&&l.load(zn.map(Ly));for(let ai=0,Bx=zn.length;ai<Bx;++ai)this.replayImageOrLabel_.apply(this,zn[ai])}}++h;break;case Z.END_GEOMETRY:if(o!==void 0){T=b[1];const an=o(T,ae,m);if(an)return an}++h;break;case Z.FILL:j?D++:this.fill_(e),++h;break;case Z.MOVE_TO_LINE_TO:for(f=b[1],p=b[2],X=c[f],B=c[f+1],e.moveTo(X,B),g=X+.5|0,_=B+.5|0,f+=2;f<p;f+=2)X=c[f],B=c[f+1],x=X+.5|0,w=B+.5|0,(f==p-2||x!==g||w!==_)&&(e.lineTo(X,B),g=x,_=w);++h;break;case Z.SET_FILL_STYLE:W=b,this.alignAndScaleFill_=b[2],D&&(this.fill_(e),D=0,I&&(e.stroke(),I=0)),e.fillStyle=b[1],++h;break;case Z.SET_STROKE_STYLE:A=b,I&&(e.stroke(),I=0),this.setStrokeStyle_(e,b),++h;break;case Z.STROKE:j?I++:e.stroke(),++h;break;default:++h;break}}D&&this.fill_(e),I&&e.stroke()}execute(e,n,i,r,s,o){this.viewRotation_=r,this.execute_(e,n,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,n,i,r,s){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],n,this.hitDetectionInstructions,!0,r,s)}}const Ps=["Polygon","Circle","LineString","Image","Text","Default"],ju=["Image","Text"],GT=Ps.filter(t=>!ju.includes(t));class jv{constructor(e,n,i,r,s,o,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=yn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,n){const i=this.getClipCoords(n);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,n){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const s=e[i];for(const o in s){const a=s[o];r[o]=new NT(this.resolution_,this.pixelRatio_,this.overlaps_,a,n)}}}hasExecutors(e){for(const n in this.executorsByZIndex_){const i=this.executorsByZIndex_[n];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,n,i,r,s,o){r=Math.round(r);const a=r*2+1,l=Mi(this.hitDetectionTransform_,r+.5,r+.5,1/n,-1/n,-i,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=lt(a,a,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=xn(),qo(h,e),lr(h,n*(this.renderBuffer_+r),h));const d=jT(r);let f;function p(w,S,E){const C=c.getImageData(0,0,a,a).data;for(let R=0,L=d.length;R<L;R++)if(C[d[R]]>0){if(!o||E==="none"||f!=="Image"&&f!=="Text"||o.includes(w)){const D=(d[R]-3)/4,I=r-D%a,W=r-(D/a|0),A=s(w,S,I*I+W*W);if(A)return A}c.clearRect(0,0,a,a);break}}const y=Object.keys(this.executorsByZIndex_).map(Number);y.sort(Hn);let v,m,g,_,x;for(v=y.length-1;v>=0;--v){const w=y[v].toString();for(g=this.executorsByZIndex_[w],m=Ps.length-1;m>=0;--m)if(f=Ps[m],_=g[f],_!==void 0&&(x=_.executeHitDetection(c,l,i,p,h),x))return x}}getClipCoords(e){const n=this.maxExtent_;if(!n)return null;const i=n[0],r=n[1],s=n[2],o=n[3],a=[i,r,i,o,s,o,s,r];return ur(a,0,8,2,e,a),a}isEmpty(){return fr(this.executorsByZIndex_)}execute(e,n,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Hn),o=o||Ps;const u=Ps.length;let c,h,d,f,p;for(a&&l.reverse(),c=0,h=l.length;c<h;++c){const y=l[c].toString();for(p=this.executorsByZIndex_[y],d=0,f=o.length;d<f;++d){const v=o[d],m=p[v];if(m!==void 0){const g=a===null?void 0:m.getZIndexContext(),_=g?g.getContext():e,x=this.maxExtent_&&v!=="Image"&&v!=="Text";if(x&&(_.save(),this.clip(_,i)),!g||v==="Text"||v==="Image"?m.execute(_,n,i,r,s,a):g.pushFunction(w=>m.execute(w,n,i,r,s,a)),x&&_.restore(),g){g.offset();const w=l[c]*u+d;this.deferredZIndexContexts_[w]||(this.deferredZIndexContexts_[w]=[]),this.deferredZIndexContexts_[w].push(g)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,n=Object.keys(e).map(Number).sort(Hn);for(let i=0,r=n.length;i<r;++i)e[n[i]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[n[i]].length=0}}const Lh={};function jT(t){if(Lh[t]!==void 0)return Lh[t];const e=t*2+1,n=t*t,i=new Array(n+1);for(let s=0;s<=t;++s)for(let o=0;o<=t;++o){const a=s*s+o*o;if(a>n)break;let l=i[a];l||(l=[],i[a]=l),l.push(((t+s)*e+(t+o))*4+3),s>0&&l.push(((t-s)*e+(t+o))*4+3),o>0&&(l.push(((t+s)*e+(t-o))*4+3),s>0&&l.push(((t-s)*e+(t-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return Lh[t]=r,r}class WT extends Dv{constructor(e,n,i,r,s,o,a){super(),this.context_=e,this.pixelRatio_=n,this.extent_=i,this.transform_=r,this.transformRotation_=r?wp(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=yn()}drawImages_(e,n,i,r){if(!this.image_)return;const s=ur(e,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,h=s.length;c<h;c+=2){const d=s[c]-this.imageAnchorX_,f=s[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const p=d+this.imageAnchorX_,y=f+this.imageAnchorY_;Mi(a,p,y,1,1,u,-p,-y),o.save(),o.transform.apply(o,a),o.translate(p,y),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,n,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=ur(e,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<i;n+=r){const l=s[n]+this.textOffsetX_,u=s[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,u-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,u),this.textFillState_&&o.fillText(this.text_,l,u))}}moveToLineTo_(e,n,i,r,s){const o=this.context_,a=ur(e,n,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let u=2;u<l;u+=2)o.lineTo(a[u],a[u+1]);return s&&o.closePath(),i}drawRings_(e,n,i,r){for(let s=0,o=i.length;s<o;++s)n=this.moveToLineTo_(e,n,i[s],r,!0);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!He(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=p2(e,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],r=n[3]-n[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,n){const i=n.getGeometryFunction()(e);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(e){const n=e.getGeometriesArray();for(let i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!He(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getExtent();if(He(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let l=0,u=o.length;l<u;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!He(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!He(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();n.beginPath();for(let a=0,l=s.length;a<l;++a){const u=s[a];r=this.drawRings_(i,r,u,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(e){const n=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,n.lineCap=e.lineCap),vr(i.lineDash,e.lineDash)||n.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const n=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:ka;i?(i.font!=e.font&&(i.font=e.font,n.font=e.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=r,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:$n(i||Wt)}}if(!n)this.strokeState_=null;else{const i=n.getColor(),r=n.getLineCap(),s=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),u=n.getMiterLimit(),c=s||wi;this.strokeState_={lineCap:r!==void 0?r:so,lineDash:this.pixelRatio_===1?c:c.map(h=>h*this.pixelRatio_),lineDashOffset:(o||Ei)*this.pixelRatio_,lineJoin:a!==void 0?a:oo,lineWidth:(l!==void 0?l:Ma)*this.pixelRatio_,miterLimit:u!==void 0?u:Ra,strokeStyle:$n(i||Ia)}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(e){if(!e)this.text_="";else{const n=e.getFill();if(!n)this.textFillState_=null;else{const f=n.getColor();this.textFillState_={fillStyle:$n(f||Wt)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const f=i.getColor(),p=i.getLineCap(),y=i.getLineDash(),v=i.getLineDashOffset(),m=i.getLineJoin(),g=i.getWidth(),_=i.getMiterLimit();this.textStrokeState_={lineCap:p!==void 0?p:so,lineDash:y||wi,lineDashOffset:v||Ei,lineJoin:m!==void 0?m:oo,lineWidth:g!==void 0?g:Ma,miterLimit:_!==void 0?_:Ra,strokeStyle:$n(f||Ia)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),c=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:r!==void 0?r:mv,textAlign:h!==void 0?h:ka,textBaseline:d!==void 0?d:bu},this.text_=c!==void 0?Array.isArray(c)?c.reduce((f,p,y)=>f+=y%2?" ":p,""):c:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const Jt=.5;function Wv(t,e,n,i,r,s,o,a,l){const u=l?Pu(r,l):r,c=t[0]*Jt,h=t[1]*Jt,d=lt(c,h);d.imageSmoothingEnabled=!1;const f=d.canvas,p=new WT(d,Jt,r,null,o,a,l?po(wa(),l):null),y=n.length,v=Math.floor((256*256*256-1)/y),m={};for(let _=1;_<=y;++_){const x=n[_-1],w=x.getStyleFunction()||i;if(!w)continue;let S=w(x,s);if(!S)continue;Array.isArray(S)||(S=[S]);const C=(_*v).toString(16).padStart(7,"#00000");for(let R=0,L=S.length;R<L;++R){const D=S[R],I=D.getGeometryFunction()(x);if(!I||!He(u,I.getExtent()))continue;const W=D.clone(),A=W.getFill();A&&A.setColor(C);const k=W.getStroke();k&&(k.setColor(C),k.setLineDash(null)),W.setText(void 0);const P=D.getImage();if(P){const T=P.getImageSize();if(!T)continue;const X=lt(T[0],T[1],void 0,{alpha:!1}),B=X.canvas;X.fillStyle=C,X.fillRect(0,0,B.width,B.height),W.setImage(new ao({img:B,anchor:P.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:P.getOrigin(),opacity:1,size:P.getSize(),scale:P.getScale(),rotation:P.getRotation(),rotateWithView:P.getRotateWithView()}))}const U=W.getZIndex()||0;let F=m[U];F||(F={},m[U]=F,F.Polygon=[],F.Circle=[],F.LineString=[],F.Point=[]);const j=I.getType();if(j==="GeometryCollection"){const T=I.getGeometriesArrayRecursive();for(let X=0,B=T.length;X<B;++X){const ae=T[X];F[ae.getType().replace("Multi","")].push(ae,W)}}else F[j.replace("Multi","")].push(I,W)}}const g=Object.keys(m).map(Number).sort(Hn);for(let _=0,x=g.length;_<x;++_){const w=m[g[_]];for(const S in w){const E=w[S];for(let C=0,R=E.length;C<R;C+=2){p.setStyle(E[C+1]);for(let L=0,D=e.length;L<D;++L)p.setTransform(e[L]),p.drawGeometry(E[C])}}}return d.getImageData(0,0,f.width,f.height)}function Vv(t,e,n){const i=[];if(n){const r=Math.floor(Math.round(t[0])*Jt),s=Math.floor(Math.round(t[1])*Jt),o=(Qe(r,0,n.width-1)+Qe(s,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],c=n.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);c&&c%h===0&&i.push(e[c/h-1])}return i}const VT=.5,Uv={Point:HT,LineString:YT,Polygon:JT,MultiPoint:qT,MultiLineString:ZT,MultiPolygon:KT,GeometryCollection:$T,Circle:XT};function UT(t,e){return parseInt(ee(t),10)-parseInt(ee(e),10)}function uf(t,e){const n=Xv(t,e);return n*n}function Xv(t,e){return VT*t/e}function XT(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=t.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,i,r)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function Wu(t,e,n,i,r,s,o,a){const l=[],u=n.getImage();if(u){let d=!0;const f=u.getImageState();f==oe.LOADED||f==oe.ERROR?d=!1:f==oe.IDLE&&u.load(),d&&l.push(u.ready())}const c=n.getFill();c&&c.loading()&&l.push(c.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>r(null)),BT(t,e,n,i,s,o,a),h}function BT(t,e,n,i,r,s,o){const a=n.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(i,r);if(n.getRenderer())Bv(t,l,n,e,o);else{const c=Uv[l.getType()];c(t,l,n,e,o,s)}}function Bv(t,e,n,i,r){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)Bv(t,o[a],n,i,r);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer(),r)}function $T(t,e,n,i,r,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const u=Uv[o[a].getType()];u(t,o[a],n,i,r,s)}}function YT(t,e,n,i,r){const s=n.getStroke();if(s){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i,r)}const o=n.getText();if(o&&o.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i,r)}}function ZT(t,e,n,i,r){const s=n.getStroke();if(s){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i,r)}const o=n.getText();if(o&&o.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i,r)}}function KT(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(o||s){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,i,r)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i,r)}}function HT(t,e,n,i,r,s){const o=n.getImage(),a=n.getText(),l=a&&a.getText(),u=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=oe.LOADED)return;const c=t.getBuilder(n.getZIndex(),"Image");c.setImageStyle(o,u),c.drawPoint(e,i,r)}if(l){const c=t.getBuilder(n.getZIndex(),"Text");c.setTextStyle(a,u),c.drawText(e,i,r)}}function qT(t,e,n,i,r,s){const o=n.getImage(),a=o&&o.getOpacity()!==0,l=n.getText(),u=l&&l.getText(),c=s&&a&&u?{}:void 0;if(a){if(o.getImageState()!=oe.LOADED)return;const h=t.getBuilder(n.getZIndex(),"Image");h.setImageStyle(o,c),h.drawMultiPoint(e,i,r)}if(u){const h=t.getBuilder(n.getZIndex(),"Text");h.setTextStyle(l,c),h.drawText(e,i,r)}}function JT(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,i,r)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i,r)}}class QT extends Nv{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=xn(),this.wrappedRenderedExtent_=xn(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,n,i){const r=n.extent,s=n.viewState,o=s.center,a=s.resolution,l=s.projection,u=s.rotation,c=l.getExtent(),h=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),f=n.pixelRatio,p=n.viewHints,y=!(p[$e.ANIMATING]||p[$e.INTERACTING]),v=this.context,m=Math.round(Ce(r)/a*f),g=Math.round(Rt(r)/a*f),_=h.getWrapX()&&l.canWrapX(),x=_?Ce(c):null,w=_?Math.ceil((r[2]-c[2])/x)+1:1;let S=_?Math.floor((r[0]-c[0])/x):0;do{let E=this.getRenderTransform(o,a,0,f,m,g,S*x);n.declutter&&(E=E.slice(0)),e.execute(v,[v.canvas.width,v.canvas.height],E,u,y,i===void 0?Ps:i?ju:GT,i?d&&n.declutter[d]:void 0)}while(++S<w)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=lt(this.context.canvas.width,this.context.canvas.height,Py))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Ka(this.context),Py.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,n){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,n);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(gn.PRERENDER)||this.getLayer().hasListener(gn.POSTRENDER)))return null;this.setDrawContext_(),this.preRender(s,e);const l=r.projection;if(this.clipped_=!1,a&&i.extent&&this.clipping){const u=Or(i.extent,l);a=He(u,e.extent),this.clipped_=a&&!br(u,e.extent),this.clipped_&&this.clipUnrotated(s,e,u)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(n=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],h=i[0]*Jt,d=i[1]*Jt;c.push(this.getRenderTransform(r,s,o,Jt,h,d,0).slice());const f=u.getSource(),p=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!br(p,l)){let v=l[0];const m=Ce(p);let g=0,_;for(;v<p[0];)--g,_=m*g,c.push(this.getRenderTransform(r,s,o,Jt,h,d,_).slice()),v+=m;for(g=0,v=l[2];v>p[2];)++g,_=m*g,c.push(this.getRenderTransform(r,s,o,Jt,h,d,_).slice()),v-=m}const y=wa();this.hitDetectionImageData_=Wv(i,c,this.renderedFeatures_,u.getStyleFunction(),l,s,o,uf(s,this.renderedPixelRatio_),y?a:null)}n(Vv(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,i,r,s){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),u={},c=function(p,y,v){const m=ee(p),g=u[m];if(g){if(g!==!0&&v<g.distanceSq){if(v===0)return u[m]=!0,s.splice(s.lastIndexOf(g),1),r(p,l,y);g.geometry=y,g.distanceSq=v}}else{if(v===0)return u[m]=!0,r(p,l,y);s.push(u[m]={feature:p,layer:l,geometry:y,distanceSq:v,callback:r})}};let h;const d=[this.replayGroup_],f=this.getLayer().getDeclutter();return d.some(p=>h=p.forEachFeatureAtCoordinate(e,o,a,i,c,f&&n.declutter[f]?n.declutter[f].all().map(y=>y.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const n=this.getLayer(),i=n.getSource();if(!i)return!1;const r=e.viewHints[$e.ANIMATING],s=e.viewHints[$e.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,c=u.projection,h=u.resolution,d=e.pixelRatio,f=n.getRevision(),p=n.getRenderBuffer();let y=n.getRenderOrder();y===void 0&&(y=UT);const v=u.center.slice(),m=lr(l,p*h),g=m.slice(),_=[m.slice()],x=c.getExtent();if(i.getWrapX()&&c.canWrapX()&&!br(x,e.extent)){const k=Ce(x),P=Math.max(Ce(m)/2,k);m[0]=x[0]-P,m[2]=x[2]+P,Ip(v,c);const U=G1(_[0],c);U[0]<x[0]&&U[2]<x[2]?_.push([U[0]+k,U[1],U[2]+k,U[3]]):U[0]>x[0]&&U[2]>x[2]&&_.push([U[0]-k,U[1],U[2]-k,U[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==y&&this.renderedFrameDeclutter_===!!e.declutter&&br(this.wrappedRenderedExtent_,m))return vr(this.renderedExtent_,g)||(this.hitDetectionImageData_=null,this.renderedExtent_=g),this.renderedCenter_=v,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const w=new zv(Xv(h,d),m,h,d),S=wa();let E;if(S){for(let k=0,P=_.length;k<P;++k){const U=_[k],F=Pu(U,c);i.loadFeatures(F,QC(h,c),S)}E=po(S,c)}else for(let k=0,P=_.length;k<P;++k)i.loadFeatures(_[k],h,c);const C=uf(h,d);let R=!0;const L=(k,P)=>{let U;const F=k.getStyleFunction()||n.getStyleFunction();if(F&&(U=F(k,h)),U){const j=this.renderFeature(k,C,U,w,E,this.getLayer().getDeclutter(),P);R=R&&!j}},D=Pu(m,c),I=i.getFeaturesInExtent(D);y&&I.sort(y);for(let k=0,P=I.length;k<P;++k)L(I[k],k);this.renderedFeatures_=I,this.ready=R;const W=w.finish(),A=new jv(m,h,d,i.getOverlaps(),W,n.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=y,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=g,this.wrappedRenderedExtent_=m,this.renderedCenter_=v,this.renderedProjection_=c,this.renderedPixelRatio_=d,this.replayGroup_=A,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,i,r,s,o,a){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let u=0,c=i.length;u<c;++u)l=Wu(r,e,i[u],n,this.boundHandleStyleImageChange_,s,o,a)||l;else l=Wu(r,e,i,n,this.boundHandleStyleImageChange_,s,o,a);return l}}class $v extends qp{constructor(e){super(e)}createRenderer(){return new QT(this)}}class by{constructor(e){this.rbush_=new av(e),this.items_={}}insert(e,n){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(i),this.items_[ee(n)]=i}load(e,n){const i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const o=e[r],a=n[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[ee(a)]=l}this.rbush_.load(i)}remove(e){const n=ee(e),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(e,n){const i=this.items_[ee(n)],r=[i.minX,i.minY,i.maxX,i.maxY];io(r,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let i;for(let r=0,s=e.length;r<s;r++)if(i=n(e[r]),i)return i;return i}isEmpty(){return fr(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const n=this.rbush_.toJSON();return ki(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const n in e.items_)this.items_[n]=e.items_[n]}}class Lc extends ni{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const n=e;this.setGeometry(n)}else{const n=e;this.setProperties(n)}}clone(){const e=new Lc(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&e.setGeometry(n.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Pe(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=pe(e,q.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?eR(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function eR(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(ce(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}class Vu extends K1{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Pe),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)this.changeEventsKeys_.push(pe(e[n],q.CHANGE,this.changed,this))}clone(){const e=new Vu(Ah(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,n,i,r){if(r<Qr(this.getExtent(),e,n))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,n,i,r);return r}containsXY(e,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,n))return!0;return!1}computeExtent(e){fo(e);const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)O1(e,n[i].getExtent());return e}getGeometries(){return Ah(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?e=e.concat(n[i].getGeometriesArrayRecursive()):e.push(n[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=a.getSimplifiedGeometry(e);n.push(l),l!==a&&(r=!0)}return r?new Vu(n):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,n);this.changed()}scale(e,n,i){i||(i=pr(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,n,i);this.changed()}setGeometries(e){this.setGeometriesArray(Ah(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].applyTransform(e);this.changed()}translate(e,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Ah(t){return t.map(e=>e.clone())}function Uu(t,e,n,i,r,s,o){let a,l;const u=(n-e)/i;if(u===1)a=e;else if(u===2)a=e,l=r;else if(u!==0){let c=t[e],h=t[e+1],d=0;const f=[0];for(let v=e+i;v<n;v+=i){const m=t[v],g=t[v+1];d+=Math.sqrt((m-c)*(m-c)+(g-h)*(g-h)),f.push(d),c=m,h=g}const p=r*d,y=CC(f,p);y<0?(l=(p-f[-y-2])/(f[-y-1]-f[-y-2]),a=e+(-y-2)*i):a=e+y*i}o=o>1?o:2,s=s||new Array(o);for(let c=0;c<o;++c)s[c]=a===void 0?NaN:l===void 0?t[a+c]:Ht(t[a+c],t[a+i+c],l);return s}function cf(t,e,n,i,r,s){if(n==e)return null;let o;if(r<t[e+i-1])return s?(o=t.slice(e,e+i),o[i-1]=r,o):null;if(t[n-1]<r)return s?(o=t.slice(n-i,n),o[i-1]=r,o):null;if(r==t[e+i-1])return t.slice(e,e+i);let a=e/i,l=n/i;for(;a<l;){const d=a+l>>1;r<t[(d+1)*i-1]?l=d:a=d+1}const u=t[a*i-1];if(r==u)return t.slice((a-1)*i,(a-1)*i+i);const c=t[(a+1)*i-1],h=(r-u)/(c-u);o=[];for(let d=0;d<i-1;++d)o.push(Ht(t[(a-1)*i+d],t[a*i+d],h));return o.push(r),o}function tR(t,e,n,i,r,s,o){if(o)return cf(t,e,n[n.length-1],i,r,s);let a;if(r<t[i-1])return s?(a=t.slice(0,i),a[i-1]=r,a):null;if(t[t.length-1]<r)return s?(a=t.slice(t.length-i),a[i-1]=r,a):null;for(let l=0,u=n.length;l<u;++l){const c=n[l];if(e!=c){if(r<t[e+i-1])return null;if(r<=t[c-1])return cf(t,e,c,i,r,!1);e=c}}return null}class Hr extends es{constructor(e,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendCoordinate(e){qn(this.flatCoordinates,e),this.changed()}clone(){const e=new Hr(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,r){return r<Qr(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Op(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,i,r))}forEachSegment(e){return tv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,cf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n))}getCoordinates(){return qi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,n){return Uu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,this.stride)}getLength(){return Gv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const n=[];return n.length=Cc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new Hr(n,"XY")}getType(){return"LineString"}intersectsExtent(e){return Sc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ec(this.flatCoordinates,0,e,this.stride),this.changed()}}class Aa extends es{constructor(e,n,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(n!==void 0&&i)this.setFlatCoordinates(n,e),this.ends_=i;else{const r=e,s=[],o=[];for(let l=0,u=r.length;l<u;++l){const c=r[l];qn(s,c.getFlatCoordinates()),o.push(s.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){qn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Aa(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,i,r){return r<Qr(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Dp(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Np(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,n,i,r))}getCoordinateAtM(e,n,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,i=i!==void 0?i:!1,tR(this.flatCoordinates,0,this.ends_,this.stride,e,n,i))}getCoordinates(){return Ea(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Hr(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,n=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],u=new Hr(e.slice(s,l),i);r.push(u),s=l}return r}getFlatMidpoints(){const e=[],n=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],u=Uu(n,i,l,s,.5);qn(e,u),i=l}return e}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=q1(this.flatCoordinates,0,this.ends_,this.stride,e,n,0,i),new Aa(n,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return C2(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Ya(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class tl extends es{constructor(e,n){super(),n&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendPoint(e){qn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new tl(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,r){if(r<Qr(this.getExtent(),e,n))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const u=Wr(e,n,s[a],s[a+1]);if(u<r){r=u;for(let c=0;c<o;++c)i[c]=s[a+c];i.length=o}}return r}getCoordinates(){return qi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const n=this.flatCoordinates.length/this.stride;return e<0||n<=e?null:new Kr(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,n=this.layout,i=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=i){const a=new Kr(e.slice(s,s+i),n);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const n=this.flatCoordinates,i=this.stride;for(let r=0,s=n.length;r<s;r+=i){const o=n[r],a=n[r+1];if(Sp(e,o,a))return!0}return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ec(this.flatCoordinates,0,e,this.stride),this.changed()}}function Yv(t,e,n,i){const r=[];let s=xn();for(let o=0,a=n.length;o<a;++o){const l=n[o];s=Tp(t,e,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}class ba extends es{constructor(e,n,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,s=[],o=[];for(let a=0,l=r.length;a<l;++a){const u=r[a],c=s.length,h=u.getEnds();for(let d=0,f=h.length;d<f;++d)h[d]+=c;qn(s,u.getFlatCoordinates()),o.push(h)}n=r.length===0?this.getLayout():r[0].getLayout(),e=s,i=o}n!==void 0&&i?(this.setFlatCoordinates(n,e),this.endss_=i):this.setCoordinates(e,n)}appendPolygon(e){let n;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;qn(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(let r=0,s=n.length;r<s;++r)n[r]+=i}this.endss_.push(n),this.changed()}clone(){const e=this.endss_.length,n=new Array(e);for(let r=0;r<e;++r)n[r]=this.endss_[r].slice();const i=new ba(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i}closestPointXY(e,n,i,r){return r<Qr(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(g2(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),m2(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,n,i,r))}containsXY(e,n){return E2(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,n)}getArea(){return x2(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),ef(n,0,this.endss_,this.stride,e)):n=this.flatCoordinates,Qd(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Yv(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ev(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new tl(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;rv(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=ef(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=v2(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),n,0,i),new ba(n,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let n;if(e===0)n=0;else{const s=this.endss_[e-1];n=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(n!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=n;return new Fi(this.flatCoordinates.slice(n,r),this.layout,i)}getPolygons(){const e=this.layout,n=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),u=l[l.length-1];if(s!==0)for(let h=0,d=l.length;h<d;++h)l[h]-=s;const c=new Fi(n.slice(s,u),e,l);r.push(c),s=u}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return S2(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=H1(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const Oy=yn();class pt{constructor(e,n,i,r,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?b1(this.flatCoordinates_):Tp(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=pr(this.getExtent());this.flatInteriorPoints_=Wp(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=sv(this.flatCoordinates_,this.ends_),n=Yv(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=ev(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Uu(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let n=0;const i=this.ends_;for(let r=0,s=i.length;r<s;++r){const o=i[r],a=Uu(e,n,o,2,.5);qn(this.flatMidpoints_,a),n=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Re(e);const n=e.getExtent(),i=e.getWorldExtent();if(n&&i){const r=Rt(i)/Rt(n);Mi(Oy,i[0],i[3],r,-r,0,0,0),ur(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Oy,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new pt(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=F1((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=Cc(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=q1(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=Gp(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new pt(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}pt.prototype.getFlatCoordinates=pt.prototype.getOrientedFlatCoordinates;class ng extends ni{constructor(e){super(),this.projection=Re(e.projection),this.attributions_=Dy(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,r){n.viewResolver=i,n.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Dy(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Dy(t){return t?Array.isArray(t)?function(e){return t}:typeof t=="function"?t:function(e){return[t]}:null}const cn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function nR(t,e){return[[-1/0,-1/0,1/0,1/0]]}function iR(t,e){return[t]}let rR=!1;function Zv(t,e,n,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof t=="function"?t(n,i,r):t,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=rR,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const u=e.getType();try{let c;u=="text"||u=="json"?c=a.responseText:u=="xml"?c=a.responseXML||a.responseText:u=="arraybuffer"&&(c=a.response),c?s(e.readFeatures(c,{extent:n,featureProjection:r}),e.readProjection(c)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function zy(t,e){return function(n,i,r,s,o){const a=this;Zv(t,e,n,i,r,function(l,u){a.addFeatures(l),s!==void 0&&s(l)},o||to)}}class Ni extends ti{constructor(e,n,i){super(e),this.feature=n,this.features=i}}class eu extends ng{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=to,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ce(this.format_,"`format` must be set when `url` is set"),this.loader_=zy(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:nR;const n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new by:null,this.loadedExtentsRtree_=new by,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!n&&i===void 0&&(i=new Xn(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const n=ee(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new Ni(cn.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof pt||(this.featureChangeKeys_[e]=[pe(n,q.CHANGE,this.handleFeatureChange_,this),pe(n,eo.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let i=!0;if(n.getId()!==void 0){const r=String(n.getId());if(!(r in this.idIndex_))this.idIndex_[r]=n;else if(n instanceof pt){const s=this.idIndex_[r];s instanceof pt?Array.isArray(s)?s.push(n):this.idIndex_[r]=[s,n]:i=!1}else i=!1}return i&&(ce(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const n=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=ee(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=ee(a);this.setupChangeEvents_(l,a);const u=a.getGeometry();if(u){const c=u.getExtent();n.push(c),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,r),this.hasListener(cn.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new Ni(cn.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(cn.ADDFEATURE,function(i){n||(n=!0,e.push(i.feature),n=!1)}),this.addEventListener(cn.REMOVEFEATURE,function(i){n||(n=!0,e.remove(i.feature),n=!1)}),e.addEventListener(jt.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),e.addEventListener(jt.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Pe);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new Ni(cn.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const s=r.getGeometry();if(s instanceof pt||s.intersectsCoordinate(e))return n(r)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof pt||r.intersectsExtent(e)){const s=n(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),fr(this.nullGeometryFeatures_)||qn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const n=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){n.push(i)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=j1(e,n);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||va,this.featuresRtree_.forEachInExtent(l,function(u){if(n(u)){const c=u.getGeometry(),h=a;if(a=c instanceof pt?0:c.closestPointXY(i,r,o,a),a<h){s=u;const d=Math.sqrt(a);l[0]=i-d,l[1]=r-d,l[2]=i+d,l[3]=r+d}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){const n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const n=e.target,i=ee(n),r=n.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const s=n.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new Ni(cn.CHANGEFEATURE,n))}hasFeature(e){const n=e.getId();return n!==void 0?n in this.idIndex_:ee(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&fr(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,n,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(c){return br(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Ni(cn.FEATURESLOADSTART)),this.loader_.call(this,l,n,i,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ni(cn.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ni(cn.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const n=this.loadedExtentsRtree_;let i;n.forEachInExtent(e,function(r){if(io(r.extent,e))return i=r,!0}),i&&n.remove(i)}removeFeatures(e){const n=[];for(let i=0,r=e.length;i<r;++i){const s=e[i],o=this.removeFeatureInternal(s);o&&n.push(o)}n.length>0&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const n=ee(e);if(!(n in this.uidIndex_))return;n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e);const i=this.featureChangeKeys_[n];i==null||i.forEach(Pe),delete this.featureChangeKeys_[n];const r=e.getId();if(r!==void 0){const s=r.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[n],this.hasListener(cn.REMOVEFEATURE)&&this.dispatchEvent(new Ni(cn.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let n=!1;for(const i in this.idIndex_){const r=this.idIndex_[i];if(e instanceof pt&&Array.isArray(r)&&r.includes(e))r.splice(r.indexOf(e),1);else if(this.idIndex_[i]===e){delete this.idIndex_[i],n=!0;break}}return n}setLoader(e){this.loader_=e}setUrl(e){ce(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(zy(e,this.format_))}}class Kv{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Lc,this.supportedMediaTypes=null}getReadOptions(e,n){if(n){let i=n.dataProjection?Re(n.dataProjection):this.readProjection(e);n.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Re(i),i.setWorldExtent(n.extent)),n={dataProjection:i,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return H()}readFeature(e,n){return H()}readFeatures(e,n){return H()}readGeometry(e,n){return H()}readProjection(e){return H()}writeFeature(e,n){return H()}writeFeatures(e,n){return H()}writeGeometry(e,n){return H()}}function Ac(t,e,n){const i=n?Re(n.featureProjection):null,r=n?Re(n.dataProjection):null;let s=t;if(i&&r&&!Zi(i,r)){e&&(s=t.clone());const o=e?i:r,a=e?r:i;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(ro(o,a))}if(e&&n&&n.decimals!==void 0){const o=Math.pow(10,n.decimals),a=function(l){for(let u=0,c=l.length;u<c;++u)l[u]=Math.round(l[u]*o)/o;return l};s===t&&(s=t.clone()),s.applyTransform(a)}return s}const sR={Point:Kr,LineString:Hr,Polygon:Fi,MultiPoint:tl,MultiLineString:Aa,MultiPolygon:ba};function oR(t,e,n){return Array.isArray(e[0])?(rv(t,0,e,n)||(t=t.slice(),ef(t,0,e,n)),t):(Up(t,0,e,n)||(t=t.slice(),Lu(t,0,e,n)),t)}function Hv(t,e){var s;const n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map(o=>Hv({...t,geometry:o})).flat();const i=n.type==="MultiPolygon"?"Polygon":n.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=n.layout.length;return Ac(new pt(i,i==="Polygon"?oR(n.flatCoordinates,n.ends,r):n.flatCoordinates,(s=n.ends)==null?void 0:s.flat(),r,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function ig(t,e){if(!t)return null;if(Array.isArray(t)){const i=t.map(r=>ig(r,e));return new Vu(i)}const n=sR[t.type];return Ac(new n(t.flatCoordinates,t.layout,t.ends),!1,e)}class aR extends Kv{constructor(){super()}getType(){return"json"}readFeature(e,n){return this.readFeatureFromObject(Pl(e),this.getReadOptions(e,n))}readFeatures(e,n){return this.readFeaturesFromObject(Pl(e),this.getReadOptions(e,n))}readFeatureFromObject(e,n){return H()}readFeaturesFromObject(e,n){return H()}readGeometry(e,n){return this.readGeometryFromObject(Pl(e),this.getReadOptions(e,n))}readGeometryFromObject(e,n){return H()}readProjection(e){return this.readProjectionFromObject(Pl(e))}readProjectionFromObject(e){return H()}writeFeature(e,n){return JSON.stringify(this.writeFeatureObject(e,n))}writeFeatureObject(e,n){return H()}writeFeatures(e,n){return JSON.stringify(this.writeFeaturesObject(e,n))}writeFeaturesObject(e,n){return H()}writeGeometry(e,n){return JSON.stringify(this.writeGeometryObject(e,n))}writeGeometryObject(e,n){return H()}}function Pl(t){if(typeof t=="string"){const e=JSON.parse(t);return e||null}return t!==null?t:null}class hf extends aR{constructor(e){e=e||{},super(),this.dataProjection=Re(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Re(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,n){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=rg(i.geometry);if(this.featureClass===pt)return Hv({geometry:r,id:i.id,properties:i.properties},n);const s=new Lc;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&s.setGeometryName(i.geometry_name),s.setGeometry(ig(r,n)),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,n){const i=e;let r=null;if(i.type==="FeatureCollection"){const s=e;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const u=this.readFeatureFromObject(o[a],n);u&&r.push(u)}}else r=[this.readFeatureFromObject(e,n)];return r.flat()}readGeometryFromObject(e,n){return lR(e,n)}readProjectionFromObject(e){const n=e.crs;let i;if(n)if(n.type=="name")i=Re(n.properties.name);else if(n.type==="EPSG")i=Re("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,n){n=this.adaptOptions(n);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=df(o,n),delete s[e.getGeometryName()]),fr(s)||(i.properties=s),i}writeFeaturesObject(e,n){n=this.adaptOptions(n);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],n));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,n){return df(e,this.adaptOptions(n))}}function rg(t,e){if(!t)return null;let n;switch(t.type){case"Point":{n=cR(t);break}case"LineString":{n=hR(t);break}case"Polygon":{n=gR(t);break}case"MultiPoint":{n=fR(t);break}case"MultiLineString":{n=dR(t);break}case"MultiPolygon":{n=pR(t);break}case"GeometryCollection":{n=uR(t);break}default:throw new Error("Unsupported GeoJSON type: "+t.type)}return n}function lR(t,e){const n=rg(t);return ig(n,e)}function uR(t,e){return t.geometries.map(function(i){return rg(i)})}function cR(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:ts(e.length)}}function hR(t){var i;const e=t.coordinates,n=e.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:ts(((i=e[0])==null?void 0:i.length)||2)}}function dR(t){var s,o;const e=t.coordinates,n=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length)||2,i=[],r=Ya(i,0,e,n);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:ts(n)}}function fR(t){var n;const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:ts(((n=e[0])==null?void 0:n.length)||2)}}function pR(t){var s,o;const e=t.coordinates,n=[],i=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o[0].length)||2,r=H1(n,0,e,i);return{type:"MultiPolygon",flatCoordinates:n,ends:r,layout:ts(i)}}function gR(t){var s,o;const e=t.coordinates,n=[],i=(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length,r=Ya(n,0,e,i);return{type:"Polygon",flatCoordinates:n,ends:r,layout:ts(i)}}function df(t,e){t=Ac(t,!0,e);const n=t.getType();let i;switch(n){case"Point":{i=wR(t);break}case"LineString":{i=yR(t);break}case"Polygon":{i=ER(t,e);break}case"MultiPoint":{i=vR(t);break}case"MultiLineString":{i=_R(t);break}case"MultiPolygon":{i=xR(t,e);break}case"GeometryCollection":{i=mR(t,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return i}function mR(t,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(i){return df(i,e)})}}function yR(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function _R(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function vR(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function xR(t,e){let n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}function wR(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function ER(t,e){let n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}class bc extends mc{constructor(e,n,i){super(),i=i||{},this.tileCoord=e,this.state=n,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(q.CHANGE)}release(){this.state===G.ERROR&&this.setState(G.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==G.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let n=this;do{if(e.getState()==G.LOADED){e.interimTile=null;break}e.getState()==G.LOADING?n=e:e.getState()==G.IDLE?n.interimTile=e.interimTile:n=e,e=n.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==G.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){H()}getAlpha(e,n){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=n,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=n-i+1e3/60;return r>=this.transition_?1:B1(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}class qv extends bc{constructor(e,n,i,r,s,o){super(e,n,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=G.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=G.ERROR,this.unlistenImage_(),this.image_=CR(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=G.LOADED:this.state=G.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==G.ERROR&&(this.state=G.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==G.IDLE&&(this.state=G.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=H2(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function CR(){const t=lt(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}class SR{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const i=this.entries_[e];return ce(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const n=this.entries_[e];return ce(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.key_;return e}getValues(){const e=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var n;return(n=this.entries_[e])==null?void 0:n.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){ce(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function Ny(t,e,n,i){return i!==void 0?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function yo(t,e,n){return t+"/"+e+"/"+n}function Jv(t){return yo(t[0],t[1],t[2])}function TR(t){const[e,n,i]=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return yo(e,n,i)}function Qv(t){return t.split("/").map(Number)}function RR(t){return(t[1]<<t[0])+t[2]}function IR(t,e){const n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return s?s.containsXY(i,r):!0}class sg extends SR{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=Qv(e)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(Jv(r.tileCoord)),r.release())})}}class og{constructor(e,n,i,r){this.minX=e,this.maxX=n,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function ls(t,e,n,i,r){return r!==void 0?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new og(t,e,n,i)}const Gy=[];class kR extends bc{constructor(e,n,i,r){super(e,n,{transition:0}),this.context_={},this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.wrappedTileCoord=i}getContext(e){const n=ee(e);return n in this.context_||(this.context_[n]=lt(1,1,Gy)),this.context_[n]}hasContext(e){return ee(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const n=ee(e);return n in this.replayState_||(this.replayState_[n]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[n]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const n=this.context_[e];Ka(n),Gy.push(n.canvas),delete this.context_[e]}super.release()}}let ex=class extends bc{constructor(e,n,i,r,s,o){super(e,n,o),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=i,this.key=i}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==G.IDLE&&(this.setState(G.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,n){this.setFeatures(e)}onError(){this.setState(G.ERROR)}setFeatures(e){this.features_=e,this.setState(G.LOADED)}setLoader(e){this.loader_=e}};function MR(t,e){const n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return t.replace(n,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const u=o[0],c=e.getFullTileRange(u);if(!c)throw new Error("The {-y} placeholder requires a tile grid with extent");return(c.getHeight()-o[2]-1).toString()})}}function tx(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=MR(t[r],e);return FR(i)}function FR(t){return t.length===1?t[0]:function(e,n,i){if(!e)return;const r=RR(e),s=js(r,t.length);return t[s](e,n,i)}}function nx(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()));return e}return e.push(t),e}var ag={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ag.read=function(t,e,n,i,r){var s,o,a=r*8-i-1,l=(1<<a)-1,u=l>>1,c=-7,h=n?r-1:0,d=n?-1:1,f=t[e+h];for(h+=d,s=f&(1<<-c)-1,f>>=-c,c+=a;c>0;s=s*256+t[e+h],h+=d,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=i;c>0;o=o*256+t[e+h],h+=d,c-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,i),s=s-u}return(f?-1:1)*o*Math.pow(2,s-i)};ag.write=function(t,e,n,i,r,s){var o,a,l,u=s*8-r-1,c=(1<<u)-1,h=c>>1,d=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,p=i?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=d/l:e+=d*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=c?(a=0,o=c):o+h>=1?(a=(e*l-1)*Math.pow(2,r),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;t[n+f]=a&255,f+=p,a/=256,r-=8);for(o=o<<r|a,u+=r;u>0;t[n+f]=o&255,f+=p,o/=256,u-=8);t[n+f-p]|=y*128};var PR=xe,Ll=ag;function xe(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}xe.Varint=0;xe.Fixed64=1;xe.Bytes=2;xe.Fixed32=5;var ff=65536*65536,jy=1/ff,LR=12,ix=typeof TextDecoder>"u"?null:new TextDecoder("utf8");xe.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,s=this.pos;this.type=i&7,t(r,e,this),this.pos===s&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Al(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Vy(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Al(this.buf,this.pos)+Al(this.buf,this.pos+4)*ff;return this.pos+=8,t},readSFixed64:function(){var t=Al(this.buf,this.pos)+Vy(this.buf,this.pos+4)*ff;return this.pos+=8,t},readFloat:function(){var t=Ll.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Ll.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e=this.buf,n,i;return i=e[this.pos++],n=i&127,i<128||(i=e[this.pos++],n|=(i&127)<<7,i<128)||(i=e[this.pos++],n|=(i&127)<<14,i<128)||(i=e[this.pos++],n|=(i&127)<<21,i<128)?n:(i=e[this.pos],n|=(i&15)<<28,AR(n,t,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=LR&&ix?YR(this.buf,e,t):$R(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==xe.Bytes)return t.push(this.readVarint(e));var n=ci(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==xe.Bytes)return t.push(this.readSVarint());var e=ci(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==xe.Bytes)return t.push(this.readBoolean());var e=ci(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==xe.Bytes)return t.push(this.readFloat());var e=ci(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==xe.Bytes)return t.push(this.readDouble());var e=ci(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==xe.Bytes)return t.push(this.readFixed32());var e=ci(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==xe.Bytes)return t.push(this.readSFixed32());var e=ci(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==xe.Bytes)return t.push(this.readFixed64());var e=ci(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==xe.Bytes)return t.push(this.readSFixed64());var e=ci(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=t&7;if(e===xe.Varint)for(;this.buf[this.pos++]>127;);else if(e===xe.Bytes)this.pos=this.readVarint()+this.pos;else if(e===xe.Fixed32)this.pos+=4;else if(e===xe.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),cs(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),cs(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),cs(this.buf,t&-1,this.pos),cs(this.buf,Math.floor(t*jy),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),cs(this.buf,t&-1,this.pos),cs(this.buf,Math.floor(t*jy),this.pos+4),this.pos+=8},writeVarint:function(t){if(t=+t||0,t>268435455||t<0){bR(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?-t*2-1:t*2)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t){t=String(t),this.realloc(t.length*4),this.pos++;var e=this.pos;this.pos=ZR(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Wy(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Ll.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Ll.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&Wy(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,xe.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,zR,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,NR,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,WR,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,GR,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,jR,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,VR,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,UR,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,XR,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,BR,e)},writeBytesField:function(t,e){this.writeTag(t,xe.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,xe.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,xe.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,xe.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,xe.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,xe.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,xe.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,xe.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,xe.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,xe.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,!!e)}};function AR(t,e,n){var i=n.buf,r,s;if(s=i[n.pos++],r=(s&112)>>4,s<128||(s=i[n.pos++],r|=(s&127)<<3,s<128)||(s=i[n.pos++],r|=(s&127)<<10,s<128)||(s=i[n.pos++],r|=(s&127)<<17,s<128)||(s=i[n.pos++],r|=(s&127)<<24,s<128)||(s=i[n.pos++],r|=(s&1)<<31,s<128))return us(t,r,e);throw new Error("Expected varint not more than 10 bytes")}function ci(t){return t.type===xe.Bytes?t.readVarint()+t.pos:t.pos+1}function us(t,e,n){return n?e*4294967296+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function bR(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(n=~(-t%4294967296),i=~(-t/4294967296),n^4294967295?n=n+1|0:(n=0,i=i+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),OR(n,i,e),DR(i,e)}function OR(t,e,n){n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos]=t&127}function DR(t,e){var n=(t&7)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127)))))}function Wy(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function zR(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function NR(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function GR(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function jR(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function WR(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function VR(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function UR(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function XR(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function BR(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Al(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+t[e+3]*16777216}function cs(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Vy(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function $R(t,e,n){for(var i="",r=e;r<n;){var s=t[r],o=null,a=s>239?4:s>223?3:s>191?2:1;if(r+a>n)break;var l,u,c;a===1?s<128&&(o=s):a===2?(l=t[r+1],(l&192)===128&&(o=(s&31)<<6|l&63,o<=127&&(o=null))):a===3?(l=t[r+1],u=t[r+2],(l&192)===128&&(u&192)===128&&(o=(s&15)<<12|(l&63)<<6|u&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):a===4&&(l=t[r+1],u=t[r+2],c=t[r+3],(l&192)===128&&(u&192)===128&&(c&192)===128&&(o=(s&15)<<18|(l&63)<<12|(u&63)<<6|c&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,a=1):o>65535&&(o-=65536,i+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),i+=String.fromCharCode(o),r+=a}return i}function YR(t,e,n){return ix.decode(t.subarray(e,n))}function ZR(t,e,n){for(var i=0,r,s;i<e.length;i++){if(r=e.charCodeAt(i),r>55295&&r<57344)if(s)if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,s=r;continue}else r=s-55296<<10|r-56320|65536,s=null;else{r>56319||i+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):s=r;continue}else s&&(t[n++]=239,t[n++]=191,t[n++]=189,s=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=r&63|128)}return n}const KR=y0(PR);class rx extends Kv{constructor(e){super(),e=e||{},this.dataProjection=new Cp({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:pt,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,n,i,r){e.pos=n.geometry;const s=e.readVarint()+e.pos;let o=1,a=0,l=0,u=0,c=0,h=0;for(;e.pos<s;){if(!a){const d=e.readVarint();o=d&7,a=d>>3}if(a--,o===1||o===2)l+=e.readSVarint(),u+=e.readSVarint(),o===1&&c>h&&(r.push(c),h=c),i.push(l,u),c+=2;else if(o===7)c>h&&(i.push(i[h],i[h+1]),c+=2);else throw new Error("Invalid command found in the PBF")}c>h&&(r.push(c),h=c)}createFeature_(e,n,i){const r=n.type;if(r===0)return null;let s;const o=n.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=n.id,o[this.layerName_]=n.layer.name;const l=[],u=[];this.readRawGeometry_(e,n,l,u);const c=eI(r,u.length);if(this.featureClass===pt)s=new this.featureClass(c,l,u,2,o,a),s.transform(i.dataProjection);else{let h;if(c=="Polygon"){const p=sv(l,u);h=p.length>1?new ba(l,"XY",p):new Fi(l,"XY",u)}else h=c==="Point"?new Kr(l,"XY"):c==="LineString"?new Hr(l,"XY"):c==="MultiPoint"?new tl(l,"XY"):c==="MultiLineString"?new Aa(l,"XY",u):null;const d=this.featureClass;s=new d,this.geometryName_&&s.setGeometryName(this.geometryName_);const f=Ac(h,!1,i);s.setGeometry(f),a!==void 0&&s.setId(a),s.setProperties(o,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,n){const i=this.layers_;n=this.adaptOptions(n);const r=Re(n.dataProjection);r.setWorldExtent(n.extent),n.dataProjection=r;const s=new KR(e),o=s.readFields(HR,{}),a=[];for(const l in o){if(i&&!i.includes(l))continue;const u=o[l],c=u?[0,0,u.extent,u.extent]:null;r.setExtent(c);for(let h=0,d=u.length;h<d;++h){const f=QR(s,u,h),p=this.createFeature_(s,f,n);p!==null&&a.push(p)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function HR(t,e,n){if(t===3){const i={keys:[],values:[],features:[]},r=n.readVarint()+n.pos;n.readFields(qR,i,r),i.length=i.features.length,i.length&&(e[i.name]=i)}}function qR(t,e,n){if(t===15)e.version=n.readVarint();else if(t===1)e.name=n.readString();else if(t===5)e.extent=n.readVarint();else if(t===2)e.features.push(n.pos);else if(t===3)e.keys.push(n.readString());else if(t===4){let i=null;const r=n.readVarint()+n.pos;for(;n.pos<r;)t=n.readVarint()>>3,i=t===1?n.readString():t===2?n.readFloat():t===3?n.readDouble():t===4?n.readVarint64():t===5?n.readVarint():t===6?n.readSVarint():t===7?n.readBoolean():null;e.values.push(i)}}function JR(t,e,n){if(t==1)e.id=n.readVarint();else if(t==2){const i=n.readVarint()+n.pos;for(;n.pos<i;){const r=e.layer.keys[n.readVarint()],s=e.layer.values[n.readVarint()];e.properties[r]=s}}else t==3?e.type=n.readVarint():t==4&&(e.geometry=n.pos)}function QR(t,e,n){t.pos=e.features[n];const i=t.readVarint()+t.pos,r={layer:e,type:0,properties:{}};return t.readFields(JR,r,i),r}function eI(t,e){let n;return t===1?n=e===1?"Point":"MultiPoint":t===2?n=e===1?"LineString":"MultiLineString":t===3&&(n="Polygon"),n}const tI=.5,nI=10,Uy=.25;class iI{constructor(e,n,i,r,s,o){this.sourceProj_=e,this.targetProj_=n;let a={};const l=ro(this.targetProj_,this.sourceProj_);this.transformInv_=function(g){const _=g[0]+"/"+g[1];return a[_]||(a[_]=l(g)),a[_]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Ce(r)>=Ce(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ce(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ce(this.targetProj_.getExtent()):null;const u=Li(i),c=xc(i),h=vc(i),d=_c(i),f=this.transformInv_(u),p=this.transformInv_(c),y=this.transformInv_(h),v=this.transformInv_(d),m=nI+(o?Math.max(0,Math.ceil(Math.log2(Zd(i)/(o*o*256*256)))):0);if(this.addQuad_(u,c,h,d,f,p,y,v,m),this.wrapsXInSource_){let g=1/0;this.triangles_.forEach(function(_,x,w){g=Math.min(g,_.source[0][0],_.source[1][0],_.source[2][0])}),this.triangles_.forEach(_=>{if(Math.max(_.source[0][0],_.source[1][0],_.source[2][0])-g>this.sourceWorldWidth_/2){const x=[[_.source[0][0],_.source[0][1]],[_.source[1][0],_.source[1][1]],[_.source[2][0],_.source[2][1]]];x[0][0]-g>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-g>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-g>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);const w=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-w<this.sourceWorldWidth_/2&&(_.source=x)}})}a={}}addTriangle_(e,n,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,n,i]})}addQuad_(e,n,i,r,s,o,a,l,u){const c=$d([s,o,a,l]),h=this.sourceWorldWidth_?Ce(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&h>.5&&h<1;let p=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const v=$d([e,n,i,r]);p=Ce(v)/this.targetWorldWidth_>Uy||p}!f&&this.sourceProj_.isGlobal()&&h&&(p=h>Uy||p)}if(!p&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!He(c,this.maxSourceExtent_))return;let y=0;if(!p&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)p=!0;else if(y=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),y!=1&&y!=2&&y!=4&&y!=8)return}if(u>0){if(!p){const v=[(e[0]+i[0])/2,(e[1]+i[1])/2],m=this.transformInv_(v);let g;f?g=(js(s[0],d)+js(a[0],d))/2-js(m[0],d):g=(s[0]+a[0])/2-m[0];const _=(s[1]+a[1])/2-m[1];p=g*g+_*_>this.errorThresholdSquared_}if(p){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const v=[(n[0]+i[0])/2,(n[1]+i[1])/2],m=this.transformInv_(v),g=[(r[0]+e[0])/2,(r[1]+e[1])/2],_=this.transformInv_(g);this.addQuad_(e,n,v,g,s,o,m,_,u-1),this.addQuad_(g,v,i,r,_,m,a,l,u-1)}else{const v=[(e[0]+n[0])/2,(e[1]+n[1])/2],m=this.transformInv_(v),g=[(i[0]+r[0])/2,(i[1]+r[1])/2],_=this.transformInv_(g);this.addQuad_(e,v,g,r,s,m,_,l,u-1),this.addQuad_(v,n,i,g,m,o,a,_,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}y&11||this.addTriangle_(e,i,r,s,a,l),y&14||this.addTriangle_(e,i,n,s,a,o),y&&(y&13||this.addTriangle_(n,r,e,o,l,s),y&7||this.addTriangle_(n,r,i,o,l,a))}calculateSourceExtent(){const e=xn();return this.triangles_.forEach(function(n,i,r){const s=n.source;qo(e,s[0]),qo(e,s[1]),qo(e,s[2])}),e}getTriangles(){return this.triangles_}}let bh;const Vs=[];function Xy(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function Oh(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function rI(){if(bh===void 0){const t=lt(6,6,Vs);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Xy(t,4,5,4,0),Xy(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;bh=Oh(e,0)||Oh(e,4)||Oh(e,8),Ka(t),Vs.push(t.canvas)}return bh}function By(t,e,n,i){const r=wc(n,e,t);let s=Qm(e,i,n);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=t.getMetersPerUnit();a!==void 0&&(s/=a);const l=t.getExtent();if(!l||no(l,r)){const u=Qm(t,s,r)/s;isFinite(u)&&u>0&&(s/=u)}return s}function sI(t,e,n,i){const r=pr(n);let s=By(t,e,r,i);return(!isFinite(s)||s<=0)&&z1(n,function(o){return s=By(t,e,o,i),isFinite(s)&&s>0}),s}function oI(t,e,n,i,r,s,o,a,l,u,c,h,d,f){const p=lt(Math.round(n*t),Math.round(n*e),Vs);if(h||(p.imageSmoothingEnabled=!1),l.length===0)return p.canvas;p.scale(n,n);function y(w){return Math.round(w*n)/n}p.globalCompositeOperation="lighter";const v=xn();l.forEach(function(w,S,E){O1(v,w.extent)});let m;const g=n/i,_=(h?1:1+Math.pow(2,-24))/g;{if(m=lt(Math.round(Ce(v)*g),Math.round(Rt(v)*g),Vs),h||(m.imageSmoothingEnabled=!1),r&&f){const w=(r[0]-v[0])*g,S=-(r[3]-v[3])*g,E=Ce(r)*g,C=Rt(r)*g;m.rect(w,S,E,C),m.clip()}l.forEach(function(w,S,E){if(w.image.width>0&&w.image.height>0){if(w.clipExtent){m.save();const I=(w.clipExtent[0]-v[0])*g,W=-(w.clipExtent[3]-v[3])*g,A=Ce(w.clipExtent)*g,k=Rt(w.clipExtent)*g;m.rect(h?I:Math.round(I),h?W:Math.round(W),h?A:Math.round(I+A)-Math.round(I),h?k:Math.round(W+k)-Math.round(W)),m.clip()}const C=(w.extent[0]-v[0])*g,R=-(w.extent[3]-v[3])*g,L=Ce(w.extent)*g,D=Rt(w.extent)*g;m.drawImage(w.image,u,u,w.image.width-2*u,w.image.height-2*u,h?C:Math.round(C),h?R:Math.round(R),h?L:Math.round(C+L)-Math.round(C),h?D:Math.round(R+D)-Math.round(R)),w.clipExtent&&m.restore()}})}const x=Li(o);return a.getTriangles().forEach(function(w,S,E){const C=w.source,R=w.target;let L=C[0][0],D=C[0][1],I=C[1][0],W=C[1][1],A=C[2][0],k=C[2][1];const P=y((R[0][0]-x[0])/s),U=y(-(R[0][1]-x[1])/s),F=y((R[1][0]-x[0])/s),j=y(-(R[1][1]-x[1])/s),T=y((R[2][0]-x[0])/s),X=y(-(R[2][1]-x[1])/s),B=L,ae=D;L=0,D=0,I-=B,W-=ae,A-=B,k-=ae;const b=[[I,W,0,0,F-P],[A,k,0,0,T-P],[0,0,I,W,j-U],[0,0,A,k,X-U]],me=MC(b);if(!me)return;if(p.save(),p.beginPath(),rI()||!h){p.moveTo(F,j);const we=4,je=P-F,ut=U-j;for(let N=0;N<we;N++)p.lineTo(F+y((N+1)*je/we),j+y(N*ut/(we-1))),N!=we-1&&p.lineTo(F+y((N+1)*je/we),j+y((N+1)*ut/(we-1)));p.lineTo(T,X)}else p.moveTo(F,j),p.lineTo(P,U),p.lineTo(T,X);p.clip(),p.transform(me[0],me[2],me[1],me[3],P,U),p.translate(v[0]-B,v[3]-ae);let ue;if(m)ue=m.canvas,p.scale(_,-_);else{const we=l[0],je=we.extent;ue=we.image,p.scale(Ce(je)/ue.width,-Rt(je)/ue.height)}p.drawImage(ue,0,0),p.restore()}),m&&(Ka(m),Vs.push(m.canvas)),c&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(w,S,E){const C=w.target,R=(C[0][0]-x[0])/s,L=-(C[0][1]-x[1])/s,D=(C[1][0]-x[0])/s,I=-(C[1][1]-x[1])/s,W=(C[2][0]-x[0])/s,A=-(C[2][1]-x[1])/s;p.beginPath(),p.moveTo(D,I),p.lineTo(R,L),p.lineTo(W,A),p.closePath(),p.stroke()}),p.restore()),p.canvas}const bl={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class pf extends bc{constructor(e,n,i,r,s,o,a,l,u,c,h,d){super(s,G.IDLE,d),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const f=r.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent();let y=this.sourceTileGrid_.getExtent();const v=p?Vr(f,p):f;if(Zd(v)===0){this.state=G.EMPTY;return}const m=e.getExtent();m&&(y?y=Vr(y,m):y=m);const g=r.getResolution(this.wrappedTileCoord_[0]),_=sI(e,i,v,g);if(!isFinite(_)||_<=0){this.state=G.EMPTY;return}const x=c!==void 0?c:tI;if(this.triangulation_=new iI(e,i,v,y,_*x,g),this.triangulation_.getTriangles().length===0){this.state=G.EMPTY;return}this.sourceZ_=n.getZForResolution(_);let w=this.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(w[1]=Qe(w[1],y[1],y[3]),w[3]=Qe(w[3],y[1],y[3])):w=Vr(w,y)),!Zd(w))this.state=G.EMPTY;else{let S=0,E=0;e.canWrapX()&&(S=Ce(m),E=Math.floor((w[0]-m[0])/S)),j1(w.slice(),e,!0).forEach(R=>{const L=n.getTileRangeForExtentAndZ(R,this.sourceZ_);for(let D=L.minX;D<=L.maxX;D++)for(let I=L.minY;I<=L.maxY;I++){const W=u(this.sourceZ_,D,I,a);if(W){const A=E*S;this.sourceTiles_.push({tile:W,offset:A})}}++E}),this.sourceTiles_.length===0&&(this.state=G.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{var r;const i=n.tile;if(i&&i.getState()==G.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);s[0]+=n.offset,s[2]+=n.offset;const o=(r=this.clipExtent_)==null?void 0:r.slice();o&&(o[0]+=n.offset,o[2]+=n.offset),e.push({extent:s,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=G.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=oI(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=G.LOADED}this.changed()}load(){if(this.state==G.IDLE){this.state=G.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const i=n.getState();if(i==G.IDLE||i==G.LOADING){e++;const r=pe(n,q.CHANGE,function(s){const o=n.getState();(o==G.LOADED||o==G.ERROR||o==G.EMPTY)&&(Pe(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},i,r){n.getState()==G.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Pe),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ka(this.canvas_.getContext("2d")),Vs.push(this.canvas_),this.canvas_=null),super.release()}}class aI extends Nv{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=xn(),this.tmpTileRange_=new og(0,0,0,0)}isDrawableTile(e){const n=this.getLayer(),i=e.getState(),r=n.getUseInterimTilesOnError();return i==G.LOADED||i==G.EMPTY||i==G.ERROR&&!r}getTile(e,n,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let u=a.getSource().getTile(e,n,i,s,o);return u.getState()==G.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u}getData(e){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=st(n.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!no(s,r))return null;const o=n.pixelRatio,a=n.viewState.projection,l=n.viewState,u=i.getRenderSource(),c=u.getTileGridForProjection(l.projection),h=u.getTilePixelRatio(n.pixelRatio);for(let d=c.getZForResolution(l.resolution);d>=c.getMinZoom();--d){const f=c.getTileCoordForCoordAndZ(r,d),p=u.getTile(d,f[1],f[2],o,a);if(!(p instanceof qv||p instanceof pf)||p instanceof pf&&p.getState()===G.EMPTY)return null;if(p.getState()!==G.LOADED)continue;const y=c.getOrigin(d),v=Ot(c.getTileSize(d)),m=c.getResolution(d),g=Math.floor(h*((r[0]-y[0])/m-f[1]*v[0])),_=Math.floor(h*((y[1]-r[1])/m-f[2]*v[1])),x=Math.round(h*u.getGutterForProjection(l.projection));return this.getImageData(p.getImage(),g+x,_+x)}return null}loadedTileCallback(e,n,i){return this.isDrawableTile(i)?super.loadedTileCallback(e,n,i):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,n){const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,u=e.pixelRatio,c=this.getLayer(),h=c.getSource(),d=h.getRevision(),f=h.getTileGridForProjection(s),p=f.getZForResolution(o,h.zDirection),y=f.getResolution(p);let v=e.extent;const m=e.viewState.resolution,g=h.getTilePixelRatio(u);this.prepareContainer(e,n);const _=this.context.canvas.width,x=this.context.canvas.height,w=i.extent&&Or(i.extent,s);w&&(v=Vr(v,Or(i.extent,s)));const S=y*_/2/g,E=y*x/2/g,C=[a[0]-S,a[1]-E,a[0]+S,a[1]+E],R=f.getTileRangeForExtentAndZ(v,p),L={};L[p]={};const D=this.createLoadedTileFinder(h,s,L),I=this.tmpExtent,W=this.tmpTileRange_;this.newTiles_=!1;const A=l?Hd(r.center,m,l,e.size):void 0;for(let X=R.minX;X<=R.maxX;++X)for(let B=R.minY;B<=R.maxY;++B){if(l&&!f.tileCoordIntersectsViewport([p,X,B],A))continue;const ae=this.getTile(p,X,B,e);if(this.isDrawableTile(ae)){const ue=ee(this);if(ae.getState()==G.LOADED){L[p][ae.tileCoord.toString()]=ae;let we=ae.inTransition(ue);we&&i.opacity!==1&&(ae.endTransition(ue),we=!1),!this.newTiles_&&(we||!this.renderedTiles.includes(ae))&&(this.newTiles_=!0)}if(ae.getAlpha(ue,e.time)===1)continue}const b=f.getTileCoordChildTileRange(ae.tileCoord,W,I);let me=!1;b&&(me=D(p+1,b)),me||f.forEachTileCoordParentTileRange(ae.tileCoord,D,W,I)}const k=y/o*u/g,P=this.getRenderContext(e);Mi(this.tempTransform,_/2,x/2,k,k,0,-_/2,-x/2),w&&this.clipUnrotated(P,e,w),h.getInterpolate()||(P.imageSmoothingEnabled=!1),this.preRender(P,e),this.renderedTiles.length=0;let U=Object.keys(L).map(Number);U.sort(Hn);let F,j,T;i.opacity===1&&(!this.containerReused||h.getOpaque(e.viewState.projection))?U=U.reverse():(F=[],j=[]);for(let X=U.length-1;X>=0;--X){const B=U[X],ae=h.getTilePixelSize(B,u,s),me=f.getResolution(B)/y,ue=ae[0]*me*k,we=ae[1]*me*k,je=f.getTileCoordForCoordAndZ(Li(C),B),ut=f.getTileCoordExtent(je),N=st(this.tempTransform,[g*(ut[0]-C[0])/y,g*(C[3]-ut[3])/y]),En=g*h.getGutterForProjection(s),Dn=L[B];for(const he in Dn){const Cn=Dn[he],Sn=Cn.tileCoord,Le=je[1]-Sn[1],ii=Math.round(N[0]-(Le-1)*ue),We=je[2]-Sn[2],ri=Math.round(N[1]-(We-1)*we),ct=Math.round(N[0]-Le*ue),Ye=Math.round(N[1]-We*we),Mt=ii-ct,Tn=ri-Ye,_e=p===B,ye=_e&&Cn.getAlpha(ee(this),e.time)!==1;let de=!1;if(!ye)if(F){T=[ct,Ye,ct+Mt,Ye,ct+Mt,Ye+Tn,ct,Ye+Tn];for(let ve=0,ie=F.length;ve<ie;++ve)if(p!==B&&B<j[ve]){const K=F[ve];He([ct,Ye,ct+Mt,Ye+Tn],[K[0],K[3],K[4],K[7]])&&(de||(P.save(),de=!0),P.beginPath(),P.moveTo(T[0],T[1]),P.lineTo(T[2],T[3]),P.lineTo(T[4],T[5]),P.lineTo(T[6],T[7]),P.moveTo(K[6],K[7]),P.lineTo(K[4],K[5]),P.lineTo(K[2],K[3]),P.lineTo(K[0],K[1]),P.clip())}F.push(T),j.push(B)}else P.clearRect(ct,Ye,Mt,Tn);this.drawTileImage(Cn,e,ct,Ye,Mt,Tn,En,_e),F&&!ye?(de&&P.restore(),this.renderedTiles.unshift(Cn)):this.renderedTiles.push(Cn),this.updateUsedTiles(e.usedTiles,h,Cn)}}return this.renderedRevision=d,this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!io(this.renderedExtent_,C),this.renderedExtent_=C,this.renderedPixelRatio=u,this.renderedProjection=s,this.manageTilePyramid(e,h,f,u,s,v,p,c.getPreload()),this.scheduleExpireCache(e,h),this.postRender(this.context,e),i.extent&&P.restore(),P.imageSmoothingEnabled=!0,this.container}drawTileImage(e,n,i,r,s,o,a,l){const u=this.getTileImage(e);if(!u)return;const c=this.getRenderContext(n),h=ee(this),d=n.layerStatesArray[n.layerIndex],f=d.opacity*(l?e.getAlpha(h,n.time):1),p=f!==c.globalAlpha;p&&(c.save(),c.globalAlpha=f),c.drawImage(u,a,a,u.width-2*a,u.height-2*a,i,r,s,o),p&&c.restore(),f!==d.opacity?n.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,n){if(n.canExpireCache()){const i=(function(r,s,o){const a=ee(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,n);e.postRenderFunctions.push(i)}}updateUsedTiles(e,n,i){const r=ee(n);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,n,i,r,s,o,a,l,u){const c=ee(n);c in e.wantedTiles||(e.wantedTiles[c]={});const h=e.wantedTiles[c],d=e.tileQueue,f=i.getMinZoom(),p=e.viewState.rotation,y=p?Hd(e.viewState.center,e.viewState.resolution,p,e.size):void 0;let v=0,m,g,_,x,w,S;for(S=f;S<=a;++S)for(g=i.getTileRangeForExtentAndZ(o,S,g),_=i.getResolution(S),x=g.minX;x<=g.maxX;++x)for(w=g.minY;w<=g.maxY;++w)p&&!i.tileCoordIntersectsViewport([S,x,w],y)||(a-S<=l?(++v,m=n.getTile(S,x,w,r,s),m.getState()==G.IDLE&&(h[m.getKey()]=!0,d.isKeyQueued(m.getKey())||d.enqueue([m,c,i.getTileCoordCenter(m.tileCoord),_])),u!==void 0&&u(m)):n.useTile(S,x,w,s));n.updateCacheSize(v,s)}}const hs=[0,0,0],Gi=5;class Oc{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ce(TC(this.resolutions_,(r,s)=>s-r),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!n)n=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ce(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Li(i)),ce(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ce(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Ep,ce(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const o=new og(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,n,i){const r=this.getTileRangeForExtentAndZ(e,n);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([n,s,a])}forEachTileCoordParentTileRange(e,n,i,r){let s,o,a,l=null,u=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);u>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=ls(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,u,i),n(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return ls(s,s+1,o,o+1,n)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(n===r)return ls(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-r),u=Math.floor(s*l),c=Math.floor(o*l);if(n<r)return ls(u,u,c,c,i);const h=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return ls(u,h,c,d,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,i)}getTileRangeForExtentAndZ(e,n,i){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,hs);const r=hs[1],s=hs[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,hs);const o=hs[1],a=hs[2];return ls(r,o,s,a,i)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=Ot(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*r[0]*i,n[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,n){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=Ot(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,u=a+s[1]*r;return ki(o,a,l,u,n)}getTileCoordForCoordAndResolution(e,n,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,i)}getTileCoordForXYAndResolution_(e,n,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),u=Ot(this.getTileSize(o),this.tmpSize_);let c=a*(e-l[0])/i/u[0],h=a*(l[1]-n)/i/u[1];return r?(c=Cl(c,Gi)-1,h=Cl(h,Gi)-1):(c=El(c,Gi),h=El(h,Gi)),Ny(o,c,h,s)}getTileCoordForXYAndZ_(e,n,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=Ot(this.getTileSize(i),this.tmpSize_);let u=(e-o[0])/a/l[0],c=(o[1]-n)/a/l[1];return r?(u=Cl(u,Gi)-1,c=Cl(c,Gi)-1):(u=El(u,Gi),c=El(c,Gi)),Ny(i,u,c,s)}getTileCoordForCoordAndZ(e,n,i){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const i=xp(this.resolutions_,e,n||0);return Qe(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return nv(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,i=new Array(n);for(let r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function sx(t){let e=t.getDefaultTileGrid();return e||(e=cI(t),t.setDefaultTileGrid(e)),e}function lI(t,e,n){const i=e[0],r=t.getTileCoordCenter(e),s=Dc(n);if(!no(s,r)){const o=Ce(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,t.getTileCoordForCoordAndZ(r,i)}return e}function uI(t,e,n,i){i=i!==void 0?i:"top-left";const r=ox(t,e,n);return new Oc({extent:t,origin:WC(t,i),resolutions:r,tileSize:n})}function lg(t){const e=t||{},n=e.extent||Re("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:ox(n,e.maxZoom,e.tileSize,e.maxResolution)};return new Oc(i)}function ox(t,e,n,i){e=e!==void 0?e:L1,n=Ot(n!==void 0?n:Ep);const r=Rt(t),s=Ce(t);i=i>0?i:Math.max(s/n[0],r/n[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function cI(t,e,n,i){const r=Dc(t);return uI(r,e,n,i)}function Dc(t){t=Re(t);let e=t.getExtent();if(!e){const n=180*yc.degrees/t.getMetersPerUnit();e=ki(-n,-n,n,n)}return e}class hI extends ng{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&Ot(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new sg(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,n){const i=this.getTileCacheForProjection(e);i&&i.expireCache(n)}forEachLoadedTile(e,n,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,a,l,u;for(let c=i.minX;c<=i.maxX;++c)for(let h=i.minY;h<=i.maxY;++h)l=yo(n,c,h),u=!1,s.containsKey(l)&&(a=s.get(l),u=a.getState()===G.LOADED,u&&(u=r(a)!==!1)),u||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,i,r,s){return H()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:sx(e)}getTileCacheForProjection(e){const n=this.getProjection();return ce(n===null||Zi(n,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(n),o=Ot(r.getTileSize(e),this.tmpSize);return s==1?o:z2(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){n=n!==void 0?n:this.getProjection();const i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=lI(i,e,n)),IR(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,n){const i=this.getTileCacheForProjection(n);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,n,i,r){}}class dI extends ti{constructor(e,n){super(e),this.tile=n}}const Dh={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class zc extends hI{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===zc.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,i=ee(n),r=n.getState();let s;r==G.LOADING?(this.tileLoadingKeys_[i]=!0,s=Dh.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==G.ERROR?Dh.TILELOADERROR:r==G.LOADED?Dh.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new dI(s,n))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=nx(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(tx(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,i){}useTile(e,n,i){const r=yo(e,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}class fI extends zc{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:pI,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:qv,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,n){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?n:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?n:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Zi(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!Zi(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||Zi(n,e)))return this.tileGrid;const i=ee(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=sx(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const n=this.getProjection();if(!n||Zi(n,e))return this.tileCache;const i=ee(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new sg(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,n,i,r,s,o){const a=[e,n,i],l=this.getTileCoordForTileUrlFunction(a,s),u=l?this.tileUrlFunction(l,r,s):void 0,c=new this.tileClass(a,u!==void 0?G.IDLE:G.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(q.CHANGE,this.handleTileChange.bind(this)),c}getTile(e,n,i,r,s){const o=this.getProjection();if(!o||!s||Zi(o,s))return this.getTileInternal(e,n,i,r,o||s);const a=this.getTileCacheForProjection(s),l=[e,n,i];let u;const c=Jv(l);a.containsKey(c)&&(u=a.get(c));const h=this.getKey();if(u&&u.key==h)return u;const d=this.getTileGridForProjection(o),f=this.getTileGridForProjection(s),p=this.getTileCoordForTileUrlFunction(l,s),y=new pf(o,d,s,f,l,p,this.getTilePixelRatio(r),this.getGutter(),(v,m,g,_)=>this.getTileInternal(v,m,g,_,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=h,u?(y.interimTile=u,y.refreshInterimChain(),a.replace(c,y)):a.set(c,y),y}getTileInternal(e,n,i,r,s){let o=null;const a=yo(e,n,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,n,i,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const u=o;o=this.createTile_(e,n,i,r,s,l),u.getState()==G.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(e,n){const i=Re(e);if(i){const r=ee(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function pI(t,e){t.getImage().src=e}function gI(t,e,n,i){const r=document.createElement("script"),s="olc_"+ee(e);function o(){delete window[s],r.parentNode.removeChild(r)}r.async=!0,r.src=t+(t.includes("?")?"&":"?")+"callback="+s;const a=setTimeout(function(){o(),n&&n()},1e4);window[s]=function(l){clearTimeout(a),o(),e(l)},document.head.appendChild(r)}class mI extends fI{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Re("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)gI(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const n=new XMLHttpRequest;n.addEventListener("load",this.onXHRLoad_.bind(this)),n.addEventListener("error",this.onXHRError_.bind(this)),n.open("GET",e.url),n.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const n=e.target;if(!n.status||n.status>=200&&n.status<300){let i;try{i=JSON.parse(n.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const n=Re("EPSG:4326"),i=this.getProjection();let r;if(e.bounds!==void 0){const u=po(n,i);r=N1(e.bounds,u)}const s=Dc(i),o=e.minzoom||0,a=e.maxzoom||22,l=lg({extent:s,maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=tx(e.tiles,l),e.attribution&&!this.getAttributions()){const u=r!==void 0?r:s;this.setAttributions(function(c){return He(u,c.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const yI={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},$y={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class _I extends aI{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=yn(),this.tileClipContexts_=null}prepareTile(e,n,i){let r;const s=e.getState();return(s===G.LOADED||s===G.ERROR)&&(this.updateExecutorGroup_(e,n,i),this.tileImageNeedsRender_(e)&&(r=!0)),r}getTile(e,n,i,r){const s=r.pixelRatio,o=r.viewState,a=o.resolution,l=o.projection,u=this.getLayer(),c=u.getSource().getTile(e,n,i,s,l),h=r.viewHints,d=!(h[$e.ANIMATING]||h[$e.INTERACTING]);return(d||!c.wantedResolution)&&(c.wantedResolution=a),this.prepareTile(c,s,l)&&(d||Date.now()-r.time<8)&&u.getRenderMode()!=="vector"&&this.renderTileImage_(c,r),super.getTile(e,n,i,r)}isDrawableTile(e){const n=this.getLayer();return super.isDrawableTile(e)&&(n.getRenderMode()==="vector"?ee(n)in e.executorGroups:e.hasContext(n))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const n=this.getLayer().getRevision();return this.renderedLayerRevision_!==n&&(this.renderedLayerRevision_=n,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,n,i){const r=this.getLayer(),s=r.getRevision(),o=r.getRenderOrder()||null,a=e.wantedResolution,l=e.getReplayState(r);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==s&&l.renderedRenderOrder==o)return;const u=r.getSource(),c=!!r.getDeclutter(),h=u.getTileGrid(),f=u.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),p=u.getSourceTiles(n,i,e),y=ee(r);delete e.hitDetectionImageData[y],e.executorGroups[y]=[],l.dirty=!1;for(let v=0,m=p.length;v<m;++v){const g=p[v];if(g.getState()!=G.LOADED)continue;const _=g.tileCoord,x=h.getTileCoordExtent(_),w=Vr(f,x),S=lr(w,r.getRenderBuffer()*a,this.tmpExtent),E=io(x,w)?null:S,C=new zv(0,w,a,n),R=uf(a,n),L=function(k,P){let U;const F=k.getStyleFunction()||r.getStyleFunction();if(F&&(U=F(k,a)),U){const j=this.renderFeature(k,R,U,C,c,P);l.dirty=l.dirty||j}},D=g.getFeatures();o&&o!==l.renderedRenderOrder&&D.sort(o);for(let k=0,P=D.length;k<P;++k){const U=D[k];(!E||He(E,U.getGeometry().getExtent()))&&L.call(this,U,k)}const I=C.finish(),W=r.getRenderMode()!=="vector"&&c&&p.length===1?null:w,A=new jv(W,a,n,u.getOverlaps(),I,r.getRenderBuffer(),!0);e.executorGroups[y].push(A)}l.renderedRevision=s,l.renderedRenderOrder=o,l.renderedResolution=a}forEachFeatureAtCoordinate(e,n,i,r,s){const o=n.viewState.resolution,a=n.viewState.rotation;i=i??0;const l=this.getLayer(),c=l.getSource().getTileGridForProjection(n.viewState.projection),h=$d([e]);lr(h,o*i,h);const d={},f=function(v,m,g){let _=v.getId();_===void 0&&(_=ee(v));const x=d[_];if(x){if(x!==!0&&g<x.distanceSq){if(g===0)return d[_]=!0,s.splice(s.lastIndexOf(x),1),r(v,l,m);x.geometry=m,x.distanceSq=g}}else{if(g===0)return d[_]=!0,r(v,l,m);s.push(d[_]={feature:v,layer:l,geometry:m,distanceSq:g,callback:r})}},p=this.renderedTiles;let y;for(let v=0,m=p.length;!y&&v<m;++v){const g=p[v],_=c.getTileCoordExtent(g.wrappedTileCoord);if(!He(_,h))continue;const x=ee(l),w=[g.executorGroups[x]],S=l.getDeclutter();w.some(E=>{const C=S?n.declutter[S].all().map(R=>R.value):null;for(let R=0,L=E.length;R<L;++R)if(y=E[R].forEachFeatureAtCoordinate(e,o,a,i,f,C),y)return!0})}return y}getFeatures(e){return new Promise((n,i)=>{const r=this.getLayer(),s=ee(r),o=r.getSource(),a=this.renderedProjection,l=a.getExtent(),u=this.renderedResolution,c=o.getTileGridForProjection(a),h=st(this.renderedPixelToCoordinateTransform_,e.slice()),d=c.getTileCoordForCoordAndResolution(h,u);let f;for(let _=0,x=this.renderedTiles.length;_<x;++_)if(d.toString()===this.renderedTiles[_].tileCoord.toString()){if(f=this.renderedTiles[_],f.getState()===G.LOADED){const w=c.getTileCoordExtent(f.tileCoord);o.getWrapX()&&a.canWrapX()&&!br(l,w)&&Ip(h,a);break}f=void 0}if(!f||f.loadingSourceTiles>0){n([]);return}const p=c.getTileCoordExtent(f.wrappedTileCoord),y=Li(p),v=[(h[0]-y[0])/u,(y[1]-h[1])/u],m=f.getSourceTiles().reduce(function(_,x){return _.concat(x.getFeatures())},[]);let g=f.hitDetectionImageData[s];if(!g){const _=Ot(c.getTileSize(c.getZForResolution(u,o.zDirection))),x=this.renderedRotation_,w=[this.getRenderTransform(c.getTileCoordCenter(f.wrappedTileCoord),u,0,Jt,_[0]*Jt,_[1]*Jt,0)];g=Wv(_,w,m,r.getStyleFunction(),c.getTileCoordExtent(f.wrappedTileCoord),f.getReplayState(r).renderedResolution,x),f.hitDetectionImageData[s]=g}n(Vv(v,m,g))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,n){const i=this.context,r=i.globalAlpha;i.globalAlpha=n.opacity;const s=e.viewHints,o=!(s[$e.ANIMATING]||s[$e.INTERACTING]),a=this.renderedTiles;for(let l=0,u=a.length;l<u;++l){const c=a[l],h=c.executorGroups[ee(this.getLayer())],d=this.getLayer().getDeclutter();if(h)for(let f=h.length-1;f>=0;--f)h[f].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(c,e),e.viewState.rotation,o,ju,d?e.declutter[d]:void 0)}i.globalAlpha=r}renderDeferredInternal(e){const i=this.renderedTiles.reduce((a,l,u)=>(l.executorGroups[ee(this.getLayer())].forEach(c=>a.push({executorGroup:c,index:u})),a),[]),r=i.map(({executorGroup:a})=>a.getDeferredZIndexContexts()),s={};for(let a=0,l=i.length;a<l;++a){const u=i[a].executorGroup.getDeferredZIndexContexts();for(const c in u)s[c]=!0}Object.keys(s).sort(Hn).map(Number).forEach(a=>{r.forEach((l,u)=>{l[a]&&(l[a].forEach(c=>{const{executorGroup:h,index:d}=i[u],f=h.getRenderedContext(),p=f.globalAlpha;f.globalAlpha=this.renderedOpacity_;const y=this.tileClipContexts_[d];y&&y.draw(f),c.draw(f),y&&f.restore(),f.globalAlpha=p,c.clear()}),l[a].length=0)})})}getTileRenderTransform(e,n){const i=n.pixelRatio,r=n.viewState,s=r.center,o=r.resolution,a=r.rotation,l=n.size,u=Math.round(l[0]*i),c=Math.round(l[1]*i),d=this.getLayer().getSource().getTileGridForProjection(n.viewState.projection),f=e.tileCoord,p=d.getTileCoordExtent(e.wrappedTileCoord),y=d.getTileCoordExtent(f,this.tmpExtent)[0]-p[0];return Ap(vh(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(s,o,a,i,u,c,y))}postRender(e,n){var x;const i=n.viewHints,r=!(i[$e.ANIMATING]||i[$e.INTERACTING]);this.renderedPixelToCoordinateTransform_=n.pixelToCoordinateTransform.slice(),this.renderedRotation_=n.viewState.rotation,this.renderedOpacity_=n.layerStatesArray[n.layerIndex].opacity;const s=this.getLayer(),o=s.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const l=s.getDeclutter(),u=l?$y[o].filter(w=>!ju.includes(w)):$y[o],c=n.viewState,h=c.rotation,d=s.getSource(),p=d.getTileGridForProjection(c.projection).getZForResolution(c.resolution,d.zDirection),y=this.renderedTiles,v=[],m=[],g=[];let _=!0;for(let w=y.length-1;w>=0;--w){const S=y[w];_=_&&!S.getReplayState(s).dirty;const E=S.executorGroups[ee(s)].filter(A=>A.hasExecutors(u));if(E.length===0)continue;const C=this.getTileRenderTransform(S,n),R=S.tileCoord[0];let L=!1;const D=E[0].getClipCoords(C);let I=e,W;if(D){W=new tg,I=W.getContext();for(let A=0,k=v.length;A<k;++A)if(p!==R&&R<m[A]){const P=v[A];He([D[0],D[3],D[4],D[7]],[P[0],P[3],P[4],P[7]])&&(L||(I.save(),L=!0),I.beginPath(),I.moveTo(D[0],D[1]),I.lineTo(D[2],D[3]),I.lineTo(D[4],D[5]),I.lineTo(D[6],D[7]),I.moveTo(P[6],P[7]),I.lineTo(P[4],P[5]),I.lineTo(P[2],P[3]),I.lineTo(P[0],P[1]),I.clip())}v.push(D),m.push(R)}for(let A=0,k=E.length;A<k;++A)E[A].execute(e,[e.canvas.width,e.canvas.height],C,h,r,u,(x=n.declutter)==null?void 0:x[l]);L&&(I===e?I.restore():g[w]=W)}e.globalAlpha=a,this.ready=_,this.tileClipContexts_=g,n.declutter||this.renderDeferredInternal(n),super.postRender(e,n)}renderFeature(e,n,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,u=i.length;l<u;++l)a=Wu(r,e,i[l],n,this.boundHandleStyleImageChange_,void 0,s,o)||a;else a=Wu(r,e,i,n,this.boundHandleStyleImageChange_,void 0,s,o);return a}tileImageNeedsRender_(e){const n=this.getLayer();if(n.getRenderMode()==="vector")return!1;const i=e.getReplayState(n),r=n.getRevision(),s=e.wantedResolution;return i.renderedTileResolution!==s||i.renderedTileRevision!==r}renderTileImage_(e,n){const i=this.getLayer(),r=e.getReplayState(i),s=i.getRevision(),o=e.executorGroups[ee(i)];r.renderedTileRevision=s;const a=e.wrappedTileCoord,l=a[0],u=i.getSource();let c=n.pixelRatio;const d=n.viewState.projection,f=u.getTileGridForProjection(d),p=f.getResolution(e.tileCoord[0]),y=n.pixelRatio/e.wantedResolution*p,v=f.getResolution(l),m=e.getContext(i);c=Math.round(Math.max(c,y/c));const g=u.getTilePixelSize(l,c,d);m.canvas.width=g[0],m.canvas.height=g[1];const _=c/y;if(_!==1){const E=sy(this.tmpTransform_);vh(E,_,_),m.setTransform.apply(m,E)}const x=f.getTileCoordExtent(a,this.tmpExtent),w=y/v,S=sy(this.tmpTransform_);vh(S,w,-w),u2(S,-x[0],-x[3]);for(let E=0,C=o.length;E<C;++E)o[E].execute(m,[m.canvas.width*_,m.canvas.height*_],S,0,!0,yI[i.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}class tu extends qp{constructor(e){e=e||{};const n=Object.assign({},e);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un;const i=e.renderMode||"hybrid";ce(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new _I(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(bl.PRELOAD)}getUseInterimTilesOnError(){return this.get(bl.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(bl.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(bl.USE_INTERIM_TILES_ON_ERROR,e)}}class ax extends zc{constructor(e){const n=e.projection||"EPSG:3857",i=e.extent||Dc(n),r=e.tileGrid||lg({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:n,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:lx,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new sg(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:ex,this.tileGrids_={}}getFeaturesInExtent(e){const n=[],i=this.tileCache;if(i.getCount()===0)return n;const r=Qv(i.peekFirstKey())[0],s=this.tileGrid;return i.forEach(function(o){if(o.tileCoord[0]!==r||o.getState()!==G.LOADED)return;const a=o.getSourceTiles();for(let l=0,u=a.length;l<u;++l){const c=a[l],h=c.tileCoord;if(He(e,s.getTileCoordExtent(h))){const d=c.getFeatures();if(d)for(let f=0,p=d.length;f<p;++f){const y=d[f],v=y.getGeometry();He(e,v.getExtent())&&n.push(y)}}}}),n}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,n){const i=this.getTileCacheForProjection(e),r=Object.keys(n).reduce((s,o)=>{const a=TR(o),l=i.peek(a);if(l){const u=l.sourceTiles;for(let c=0,h=u.length;c<h;++c)s[u[c].getKey()]=!0}return s},{});super.expireCache(e,n),this.sourceTileCache.expireCache(r)}getSourceTiles(e,n,i){if(i.getState()===G.IDLE){i.setState(G.LOADING);const r=i.wrappedTileCoord,s=this.getTileGridForProjection(n),o=s.getTileCoordExtent(r),a=r[0],l=s.getResolution(a);lr(o,-l,o);const u=this.tileGrid,c=u.getExtent();c&&Vr(o,c,o);const h=u.getZForResolution(l,this.zDirection);u.forEachTileCoord(o,h,d=>{const f=this.tileUrlFunction(d,e,n),p=this.sourceTileCache.containsKey(f)?this.sourceTileCache.get(f):new this.tileClass(d,f?G.IDLE:G.EMPTY,f,this.format_,this.tileLoadFunction);i.sourceTiles.push(p);const y=p.getState();if(y<G.LOADED){const v=m=>{this.handleTileChange(m);const g=p.getState();if(g===G.LOADED||g===G.ERROR){const _=p.getKey();_ in i.errorTileKeys?p.getState()===G.LOADED&&delete i.errorTileKeys[_]:i.loadingSourceTiles--,g===G.ERROR?i.errorTileKeys[_]=!0:p.removeEventListener(q.CHANGE,v),i.loadingSourceTiles===0&&i.setState(fr(i.errorTileKeys)?G.LOADED:G.ERROR)}};p.addEventListener(q.CHANGE,v),i.loadingSourceTiles++}y===G.IDLE&&(p.extent=u.getTileCoordExtent(d),p.projection=n,p.resolution=u.getResolution(d[0]),this.sourceTileCache.set(f,p),p.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(d=>d.getState()===G.ERROR)?G.ERROR:G.LOADED)}return i.sourceTiles}getTile(e,n,i,r,s){const o=yo(e,n,i),a=this.getKey();let l;if(this.tileCache.containsKey(o)&&(l=this.tileCache.get(o),l.key===a))return l;const u=[e,n,i];let c=this.getTileCoordForTileUrlFunction(u,s);const h=this.getTileGrid().getExtent(),d=this.getTileGridForProjection(s);if(c&&h){const y=d.getTileCoordExtent(c);lr(y,-d.getResolution(e),y),He(h,y)||(c=null)}let f=!0;if(c!==null){const y=this.tileGrid,v=d.getResolution(e),m=y.getZForResolution(v,1),g=d.getTileCoordExtent(c);lr(g,-v,g),y.forEachTileCoord(g,m,_=>{f=f&&!this.tileUrlFunction(_,r,s)})}const p=new kR(u,f?G.EMPTY:G.IDLE,c,this.getSourceTiles.bind(this,r,s));return p.key=a,l?(p.interimTile=l,p.refreshInterimChain(),this.tileCache.replace(o,p)):this.tileCache.set(o,p),p}getTileGridForProjection(e){const n=e.getCode();let i=this.tileGrids_[n];if(!i){const r=this.tileGrid,s=r.getResolutions().slice(),o=s.map(function(u,c){return r.getOrigin(c)}),a=s.map(function(u,c){return r.getTileSize(c)}),l=L1+1;for(let u=s.length;u<l;++u)s.push(s[u-1]/2),o.push(o[u-1]),a.push(a[u-1]);i=new Oc({extent:r.getExtent(),origins:o,resolutions:s,tileSizes:a}),this.tileGrids_[n]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,n,i){const r=this.getTileGridForProjection(i),s=Ot(r.getTileSize(e),this.tmpSize);return[Math.round(s[0]*n),Math.round(s[1]*n)]}updateCacheSize(e,n){super.updateCacheSize(e*2,n),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(n).highWaterMark}}function lx(t,e){t.setLoader(function(n,i,r){Zv(e,t.getFormat(),n,i,r,t.onLoad.bind(t),t.onError.bind(t))})}function ux(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vI={},cx,Yy={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Qo(t){return t=Math.round(t),t<0?0:t>255?255:t}function Zy(t){return t<0?0:t>1?1:t}function zh(t){return t[t.length-1]==="%"?Qo(parseFloat(t)/100*255):Qo(parseInt(t))}function Ol(t){return t[t.length-1]==="%"?Zy(parseFloat(t)/100):Zy(parseFloat(t))}function Nh(t,e,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?t+(e-t)*n*6:n*2<1?e:n*3<2?t+(e-t)*(2/3-n)*6:t}function xI(t){var e=t.replace(/ /g,"").toLowerCase();if(e in Yy)return Yy[e].slice();if(e[0]==="#"){if(e.length===4){var n=parseInt(e.substr(1),16);return n>=0&&n<=4095?[(n&3840)>>4|(n&3840)>>8,n&240|(n&240)>>4,n&15|(n&15)<<4,1]:null}else if(e.length===7){var n=parseInt(e.substr(1),16);return n>=0&&n<=16777215?[(n&16711680)>>16,(n&65280)>>8,n&255,1]:null}return null}var i=e.indexOf("("),r=e.indexOf(")");if(i!==-1&&r+1===e.length){var s=e.substr(0,i),o=e.substr(i+1,r-(i+1)).split(","),a=1;switch(s){case"rgba":if(o.length!==4)return null;a=Ol(o.pop());case"rgb":return o.length!==3?null:[zh(o[0]),zh(o[1]),zh(o[2]),a];case"hsla":if(o.length!==4)return null;a=Ol(o.pop());case"hsl":if(o.length!==3)return null;var l=(parseFloat(o[0])%360+360)%360/360,u=Ol(o[1]),c=Ol(o[2]),h=c<=.5?c*(u+1):c+u-c*u,d=c*2-h;return[Qo(Nh(d,h,l+1/3)*255),Qo(Nh(d,h,l)*255),Qo(Nh(d,h,l-1/3)*255),a];default:return null}}return null}try{cx=vI.parseCSSColor=xI}catch{}class Zt{constructor(e,n,i,r=1){this.r=e,this.g=n,this.b=i,this.a=r}static parse(e){if(!e)return;if(e instanceof Zt)return e;if(typeof e!="string")return;const n=cx(e);if(n)return new Zt(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3])}toString(){const[e,n,i,r]=this.toArray();return`rgba(${Math.round(e)},${Math.round(n)},${Math.round(i)},${r})`}toArray(){const{r:e,g:n,b:i,a:r}=this;return r===0?[0,0,0,0]:[e*255/r,n*255/r,i*255/r,r]}toArray01(){const{r:e,g:n,b:i,a:r}=this;return r===0?[0,0,0,0]:[e/r,n/r,i/r,r]}toArray01PremultipliedAlpha(){const{r:e,g:n,b:i,a:r}=this;return[e,n,i,r]}}Zt.black=new Zt(0,0,0,1);Zt.white=new Zt(1,1,1,1);Zt.transparent=new Zt(0,0,0,0);Zt.red=new Zt(1,0,0,1);Zt.blue=new Zt(0,0,1,1);var rn=Zt;function Oa(t){return typeof t=="object"?["literal",t]:t}function wI(t,e){let n=t.stops;if(!n)return EI(t,e);const i=n&&typeof n[0][0]=="object",r=i||t.property!==void 0,s=i||!r;return n=n.map(o=>!r&&e.tokens&&typeof o[1]=="string"?[o[0],RI(o[1])]:[o[0],Oa(o[1])]),i?CI(t,e,n):s?TI(t,e,n):gf(t,e,n)}function EI(t,e){const n=["get",t.property];if(t.default===void 0)return e.type==="string"?["string",n]:n;if(e.type==="enum")return["match",n,Object.keys(e.values),n,t.default];{const i=[e.type==="color"?"to-color":e.type,n,Oa(t.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function ug(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function CI(t,e,n){const i={},r={},s=[];for(let a=0;a<n.length;a++){const l=n[a],u=l[0].zoom;i[u]===void 0&&(i[u]={zoom:u,type:t.type,property:t.property,default:t.default},r[u]=[],s.push(u)),r[u].push([l[0].value,l[1]])}if(hg({},e)==="exponential"){const a=[ug(t),["linear"],["zoom"]];for(const l of s){const u=gf(i[l],e,r[l]);Us(a,l,u,!1)}return a}else{const a=["step",["zoom"]];for(const l of s){const u=gf(i[l],e,r[l]);Us(a,l,u,!0)}return cg(a),a}}function SI(t,e){if(t!==void 0)return t;if(e!==void 0)return e}function Ky(t,e){const n=Oa(SI(t.default,e.default));return n===void 0&&e.type==="resolvedImage"?"":n}function gf(t,e,n){const i=hg(t,e),r=["get",t.property];if(i==="categorical"&&typeof n[0][0]=="boolean"){const s=["case"];for(const o of n)s.push(["==",r,o[0]],o[1]);return s.push(Ky(t,e)),s}else if(i==="categorical"){const s=["match",r];for(const o of n)Us(s,o[0],o[1],!1);return s.push(Ky(t,e)),s}else if(i==="interval"){const s=["step",["number",r]];for(const o of n)Us(s,o[0],o[1],!0);return cg(s),t.default===void 0?s:["case",["==",["typeof",r],"number"],s,Oa(t.default)]}else if(i==="exponential"){const s=t.base!==void 0?t.base:1,o=[ug(t),s===1?["linear"]:["exponential",s],["number",r]];for(const a of n)Us(o,a[0],a[1],!1);return t.default===void 0?o:["case",["==",["typeof",r],"number"],o,Oa(t.default)]}else throw new Error(`Unknown property function type ${i}`)}function TI(t,e,n,i=["zoom"]){const r=hg(t,e);let s,o=!1;if(r==="interval")s=["step",i],o=!0;else if(r==="exponential"){const a=t.base!==void 0?t.base:1;s=[ug(t),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of n)Us(s,a[0],a[1],o);return cg(s),s}function cg(t){t[0]==="step"&&t.length===3&&(t.push(0),t.push(t[3]))}function Us(t,e,n,i){t.length>3&&e===t[t.length-2]||(i&&t.length===2||t.push(e),t.push(n))}function hg(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function RI(t){const e=["concat"],n=/{([^{}]+)}/g;let i=0;for(let r=n.exec(t);r!==null;r=n.exec(t)){const s=t.slice(i,n.lastIndex-r[0].length);i=n.lastIndex,s.length>0&&e.push(s),e.push(["get",r[1]])}if(e.length===1)return t;if(i<t.length)e.push(t.slice(i));else if(e.length===2)return["to-string",e[1]];return e}class II extends Error{constructor(e,n){super(n),this.message=n,this.key=e}}var Un=II;class dg{constructor(e,n=[]){this.parent=e,this.bindings={};for(const[i,r]of n)this.bindings[i]=r}concat(e){return new dg(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var kI=dg;const Nc={kind:"null"},z={kind:"number"},se={kind:"string"},te={kind:"boolean"},Ci={kind:"color"},Xs={kind:"object"},ne={kind:"value"},MI={kind:"error"},Gc={kind:"collator"},jc={kind:"formatted"},nl={kind:"resolvedImage"};function fn(t,e){return{kind:"array",itemType:t,N:e}}function Oe(t){if(t.kind==="array"){const e=Oe(t.itemType);return typeof t.N=="number"?`array<${e}, ${t.N}>`:t.itemType.kind==="value"?"array":`array<${e}>`}else return t.kind}const FI=[Nc,z,se,te,Ci,jc,Xs,fn(ne),nl];function Da(t,e){if(e.kind==="error")return null;if(t.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Da(t.itemType,e.itemType))&&(typeof t.N!="number"||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if(t.kind==="value"){for(const n of FI)if(!Da(n,e))return null}}return`Expected ${Oe(t)} but found ${Oe(e)} instead.`}function fg(t,e){return e.some(n=>n.kind===t.kind)}function za(t,e){return e.some(n=>n==="null"?t===null:n==="array"?Array.isArray(t):n==="object"?t&&!Array.isArray(t)&&typeof t=="object":n===typeof t)}class pg{constructor(e,n,i){e?this.sensitivity=n?"variant":"case":this.sensitivity=n?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,n){return this.collator.compare(e,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class mf{constructor(e,n,i,r,s){this.text=e.normalize?e.normalize():e,this.image=n,this.scale=i,this.fontStack=r,this.textColor=s}}class ei{constructor(e){this.sections=e}static fromString(e){return new ei([new mf(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof ei?e:ei.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const n of this.sections){if(n.image){e.push(["image",n.image.name]);continue}e.push(n.text);const i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(i["font-scale"]=n.scale),n.textColor&&(i["text-color"]=["rgba"].concat(n.textColor.toArray())),e.push(i)}return e}}class xr{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new xr({name:e,available:!1}):null}serialize(){return["image",this.name]}}function hx(t,e,n,i){return typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof n=="number"&&n>=0&&n<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[t,e,n,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[t,e,n,i]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Xu(t){if(t===null)return!0;if(typeof t=="string")return!0;if(typeof t=="boolean")return!0;if(typeof t=="number")return!0;if(t instanceof rn)return!0;if(t instanceof pg)return!0;if(t instanceof ei)return!0;if(t instanceof xr)return!0;if(Array.isArray(t)){for(const e of t)if(!Xu(e))return!1;return!0}else if(typeof t=="object"){for(const e in t)if(!Xu(t[e]))return!1;return!0}else return!1}function nt(t){if(t===null)return Nc;if(typeof t=="string")return se;if(typeof t=="boolean")return te;if(typeof t=="number")return z;if(t instanceof rn)return Ci;if(t instanceof pg)return Gc;if(t instanceof ei)return jc;if(t instanceof xr)return nl;if(Array.isArray(t)){const e=t.length;let n;for(const i of t){const r=nt(i);if(!n)n=r;else{if(n===r)continue;n=ne;break}}return fn(n||ne,e)}else return Xs}function ea(t){const e=typeof t;return t===null?"":e==="string"||e==="number"||e==="boolean"?String(t):t instanceof rn||t instanceof ei||t instanceof xr?t.toString():JSON.stringify(t)}class gg{constructor(e,n){this.type=e,this.value=n}static parse(e,n){if(e.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Xu(e[1]))return n.error("invalid value");const i=e[1];let r=nt(i);const s=n.expectedType;return r.kind==="array"&&r.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(r=s),new gg(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof rn?["rgba"].concat(this.value.toArray()):this.value instanceof ei?this.value.serialize():this.value}}var Bu=gg;class PI{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var yt=PI;const Gh={string:se,number:z,boolean:te,object:Xs};class mg{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let i=1,r;const s=e[0];if(s==="array"){let a;if(e.length>2){const u=e[1];if(typeof u!="string"||!(u in Gh)||u==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);a=Gh[u],i++}else a=ne;let l;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);l=e[2],i++}r=fn(a,l)}else r=Gh[s];const o=[];for(;i<e.length;i++){const a=n.parse(e[i],i,ne);if(!a)return null;o.push(a)}return new mg(r,o)}evaluate(e){for(let n=0;n<this.args.length;n++){const i=this.args[n].evaluate(e);if(Da(this.type,nt(i))){if(n===this.args.length-1)throw new yt(`Expected value to be of type ${Oe(this.type)}, but found ${Oe(nt(i))} instead.`)}else return i}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,n=[e.kind];if(e.kind==="array"){const i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){n.push(i.kind);const r=e.N;(typeof r=="number"||this.args.length>1)&&n.push(r)}}return n.concat(this.args.map(i=>i.serialize()))}}var mi=mg;class Wc{constructor(e){this.type=jc,this.sections=e}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return n.error("First argument must be an image or text section.");const r=[];let s=!1;for(let o=1;o<=e.length-1;++o){const a=e[o];if(s&&typeof a=="object"&&!Array.isArray(a)){s=!1;let l=null;if(a["font-scale"]&&(l=n.parse(a["font-scale"],1,z),!l))return null;let u=null;if(a["text-font"]&&(u=n.parse(a["text-font"],1,fn(se)),!u))return null;let c=null;if(a["text-color"]&&(c=n.parse(a["text-color"],1,Ci),!c))return null;const h=r[r.length-1];h.scale=l,h.font=u,h.textColor=c}else{const l=n.parse(e[o],1,ne);if(!l)return null;const u=l.type.kind;if(u!=="string"&&u!=="value"&&u!=="null"&&u!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,r.push({content:l,scale:null,font:null,textColor:null})}}return new Wc(r)}evaluate(e){const n=i=>{const r=i.content.evaluate(e);return nt(r)===nl?new mf("",r,null,null,null):new mf(ea(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null)};return new ei(this.sections.map(n))}eachChild(e){for(const n of this.sections)e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const n of this.sections){e.push(n.content.serialize());const i={};n.scale&&(i["font-scale"]=n.scale.serialize()),n.font&&(i["text-font"]=n.font.serialize()),n.textColor&&(i["text-color"]=n.textColor.serialize()),e.push(i)}return e}}class Vc{constructor(e){this.type=nl,this.input=e}static parse(e,n){if(e.length!==2)return n.error("Expected two arguments.");const i=n.parse(e[1],1,se);return i?new Vc(i):n.error("No image name provided.")}evaluate(e){const n=this.input.evaluate(e),i=xr.fromString(n);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(n)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const LI={"to-boolean":te,"to-color":Ci,"to-number":z,"to-string":se};class yg{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return n.error("Expected one argument.");const r=LI[i],s=[];for(let o=1;o<e.length;o++){const a=n.parse(e[o],o,ne);if(!a)return null;s.push(a)}return new yg(r,s)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let n,i;for(const r of this.args){if(n=r.evaluate(e),i=null,n instanceof rn)return n;if(typeof n=="string"){const s=e.parseColor(n);if(s)return s}else if(Array.isArray(n)&&(n.length<3||n.length>4?i=`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:i=hx(n[0],n[1],n[2],n[3]),!i))return new rn(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new yt(i||`Could not parse color from value '${typeof n=="string"?n:String(JSON.stringify(n))}'`)}else if(this.type.kind==="number"){let n=null;for(const i of this.args){if(n=i.evaluate(e),n===null)return 0;const r=Number(n);if(!isNaN(r))return r}throw new yt(`Could not convert ${JSON.stringify(n)} to number.`)}else return this.type.kind==="formatted"?ei.fromString(ea(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?xr.fromString(ea(this.args[0].evaluate(e))):ea(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Wc([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Vc(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(n=>{e.push(n.serialize())}),e}}var Ls=yg;const AI=["Unknown","Point","LineString","Polygon"];class bI{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?AI[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:i,y:r}=this.featureTileCoord,s=i*n-e[0],o=r*n-e[1],a=this.featureDistanceData.bearing[0],l=this.featureDistanceData.bearing[1];return a*s+l*o}return 0}parseColor(e){let n=this._parseColorCache[e];return n||(n=this._parseColorCache[e]=rn.parse(e)),n}}var dx=bI;class As{constructor(e,n,i,r){this.name=e,this.type=n,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,n){const i=e[0],r=As.definitions[i];if(!r)return n.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter(([u])=>!Array.isArray(u)||u.length===e.length-1);let l=null;for(const[u,c]of a){l=new yx(n.registry,n.path,null,n.scope);const h=[];let d=!1;for(let f=1;f<e.length;f++){const p=e[f],y=Array.isArray(u)?u[f-1]:u.type,v=l.parse(p,1+h.length,y);if(!v){d=!0;break}h.push(v)}if(!d){if(Array.isArray(u)&&u.length!==h.length){l.error(`Expected ${u.length} arguments, but found ${h.length} instead.`);continue}for(let f=0;f<h.length;f++){const p=Array.isArray(u)?u[f]:u.type,y=h[f];l.concat(f+1).checkSubtype(p,y.type)}if(l.errors.length===0)return new As(i,s,c,h)}}if(a.length===1)n.errors.push(...l.errors);else{const c=(a.length?a:o).map(([d])=>OI(d)).join(" | "),h=[];for(let d=1;d<e.length;d++){const f=n.parse(e[d],1+h.length);if(!f)return null;h.push(Oe(f.type))}n.error(`Expected arguments of type ${c}, but found (${h.join(", ")}) instead.`)}return null}static register(e,n){As.definitions=n;for(const i in n)e[i]=As}}function OI(t){return Array.isArray(t)?`(${t.map(Oe).join(", ")})`:`(${Oe(t.type)}...)`}var _o=As;class Uc{constructor(e,n,i){this.type=Gc,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=n}static parse(e,n){if(e.length!==2)return n.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return n.error("Collator options argument must be an object.");const r=n.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,te);if(!r)return null;const s=n.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,te);if(!s)return null;let o=null;return i.locale&&(o=n.parse(i.locale,1,se),!o)?null:new Uc(r,s,o)}evaluate(e){return new pg(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const cr=8192;function _g(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function DI(t){return(180+t)/360}function zI(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function $u(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function NI(t,e){const n=DI(t[0]),i=zI(t[1]),r=Math.pow(2,e.z);return[Math.round(n*r*cr),Math.round(i*r*cr)]}function GI(t,e,n){const i=t[0]-e[0],r=t[1]-e[1],s=t[0]-n[0],o=t[1]-n[1];return i*o-s*r===0&&i*s<=0&&r*o<=0}function jI(t,e,n){return e[1]>t[1]!=n[1]>t[1]&&t[0]<(n[0]-e[0])*(t[1]-e[1])/(n[1]-e[1])+e[0]}function vg(t,e){let n=!1;for(let i=0,r=e.length;i<r;i++){const s=e[i];for(let o=0,a=s.length;o<a-1;o++){if(GI(t,s[o],s[o+1]))return!1;jI(t,s[o],s[o+1])&&(n=!n)}}return n}function WI(t,e){for(let n=0;n<e.length;n++)if(vg(t,e[n]))return!0;return!1}function VI(t,e){return t[0]*e[1]-t[1]*e[0]}function Hy(t,e,n,i){const r=t[0]-n[0],s=t[1]-n[1],o=e[0]-n[0],a=e[1]-n[1],l=i[0]-n[0],u=i[1]-n[1],c=r*u-l*s,h=o*u-l*a;return c>0&&h<0||c<0&&h>0}function UI(t,e,n,i){const r=[e[0]-t[0],e[1]-t[1]],s=[i[0]-n[0],i[1]-n[1]];return VI(s,r)===0?!1:!!(Hy(t,e,n,i)&&Hy(n,i,t,e))}function XI(t,e,n){for(const i of n)for(let r=0;r<i.length-1;++r)if(UI(t,e,i[r],i[r+1]))return!0;return!1}function fx(t,e){for(let n=0;n<t.length;++n)if(!vg(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(XI(t[n],t[n+1],e))return!1;return!0}function BI(t,e){for(let n=0;n<e.length;n++)if(fx(t,e[n]))return!0;return!1}function xg(t,e,n){const i=[];for(let r=0;r<t.length;r++){const s=[];for(let o=0;o<t[r].length;o++){const a=NI(t[r][o],n);_g(e,a),s.push(a)}i.push(s)}return i}function px(t,e,n){const i=[];for(let r=0;r<t.length;r++){const s=xg(t[r],e,n);i.push(s)}return i}function gx(t,e,n,i){if(t[0]<n[0]||t[0]>n[2]){const r=i*.5;let s=t[0]-n[0]>r?-i:n[0]-t[0]>r?i:0;s===0&&(s=t[0]-n[2]>r?-i:n[2]-t[0]>r?i:0),t[0]+=s}_g(e,t)}function $I(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}function qy(t,e,n,i){const r=Math.pow(2,i.z)*cr,s=[i.x*cr,i.y*cr],o=[];if(!t)return o;for(const a of t)for(const l of a){const u=[l.x+s[0],l.y+s[1]];gx(u,e,n,r),o.push(u)}return o}function Jy(t,e,n,i){const r=Math.pow(2,i.z)*cr,s=[i.x*cr,i.y*cr],o=[];if(!t)return o;for(const a of t){const l=[];for(const u of a){const c=[u.x+s[0],u.y+s[1]];_g(e,c),l.push(c)}o.push(l)}if(e[2]-e[0]<=r/2){$I(e);for(const a of o)for(const l of a)gx(l,e,n,r)}return o}function YI(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if(!r)return!1;if(e.type==="Polygon"){const s=xg(e.coordinates,i,r),o=qy(t.geometry(),n,i,r);if(!$u(n,i))return!1;for(const a of o)if(!vg(a,s))return!1}if(e.type==="MultiPolygon"){const s=px(e.coordinates,i,r),o=qy(t.geometry(),n,i,r);if(!$u(n,i))return!1;for(const a of o)if(!WI(a,s))return!1}return!0}function ZI(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if(!r)return!1;if(e.type==="Polygon"){const s=xg(e.coordinates,i,r),o=Jy(t.geometry(),n,i,r);if(!$u(n,i))return!1;for(const a of o)if(!fx(a,s))return!1}if(e.type==="MultiPolygon"){const s=px(e.coordinates,i,r),o=Jy(t.geometry(),n,i,r);if(!$u(n,i))return!1;for(const a of o)if(!BI(a,s))return!1}return!0}class ta{constructor(e,n){this.type=te,this.geojson=e,this.geometries=n}static parse(e,n){if(e.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Xu(e[1])){const i=e[1];if(i.type==="FeatureCollection")for(let r=0;r<i.features.length;++r){const s=i.features[r].geometry.type;if(s==="Polygon"||s==="MultiPolygon")return new ta(i,i.features[r].geometry)}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new ta(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new ta(i,i)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return YI(e,this.geometries);if(e.geometryType()==="LineString")return ZI(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var wg=ta;function Xc(t){if(t instanceof _o){if(t.name==="get"&&t.args.length===1)return!1;if(t.name==="feature-state")return!1;if(t.name==="has"&&t.args.length===1)return!1;if(t.name==="properties"||t.name==="geometry-type"||t.name==="id")return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof wg)return!1;let e=!0;return t.eachChild(n=>{e&&!Xc(n)&&(e=!1)}),e}function Eg(t){if(t instanceof _o&&t.name==="feature-state")return!1;let e=!0;return t.eachChild(n=>{e&&!Eg(n)&&(e=!1)}),e}function Cg(t,e){if(t instanceof _o&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild(i=>{n&&!Cg(i,e)&&(n=!1)}),n}class Sg{constructor(e,n){this.type=n.type,this.name=e,this.boundExpression=n}static parse(e,n){if(e.length!==2||typeof e[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const i=e[1];return n.scope.has(i)?new Sg(i,n.scope.get(i)):n.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var mx=Sg;class Tg{constructor(e,n=[],i,r=new kI,s=[]){this.registry=e,this.path=n,this.key=n.map(o=>`[${o}]`).join(""),this.scope=r,this.errors=s,this.expectedType=i}parse(e,n,i,r,s={}){return n?this.concat(n,i,r)._parse(e,s):this._parse(e,s)}_parse(e,n){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,s,o){return o==="assert"?new mi(s,[r]):o==="coerce"?new Ls(s,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[r];if(s){let o=s.parse(e,this);if(!o)return null;if(this.expectedType){const a=this.expectedType,l=o.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&l.kind==="value")o=i(o,a,n.typeAnnotation||"assert");else if((a.kind==="color"||a.kind==="formatted"||a.kind==="resolvedImage")&&(l.kind==="value"||l.kind==="string"))o=i(o,a,n.typeAnnotation||"coerce");else if(this.checkSubtype(a,l))return null}if(!(o instanceof Bu)&&o.type.kind!=="resolvedImage"&&yf(o)){const a=new dx;try{o=new Bu(o.type,o.evaluate(a))}catch(l){return this.error(l.message),null}}return o}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,n,i){const r=typeof e=="number"?this.path.concat(e):this.path,s=i?this.scope.concat(i):this.scope;return new Tg(this.registry,r,n||null,s,this.errors)}error(e,...n){const i=`${this.key}${n.map(r=>`[${r}]`).join("")}`;this.errors.push(new Un(i,e))}checkSubtype(e,n){const i=Da(e,n);return i&&this.error(i),i}}var yx=Tg;function yf(t){if(t instanceof mx)return yf(t.boundExpression);if(t instanceof _o&&t.name==="error")return!1;if(t instanceof Uc)return!1;if(t instanceof wg)return!1;const e=t instanceof Ls||t instanceof mi;let n=!0;return t.eachChild(i=>{e?n=n&&yf(i):n=n&&i instanceof Bu}),n?Xc(t)&&Cg(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function _x(t,e){const n=t.length-1;let i=0,r=n,s=0,o,a;for(;i<=r;)if(s=Math.floor((i+r)/2),o=t[s],a=t[s+1],o<=e){if(s===n||e<a)return s;i=s+1}else if(o>e)r=s-1;else throw new yt("Input is not a number.");return 0}class Rg{constructor(e,n,i){this.type=e,this.input=n,this.labels=[],this.outputs=[];for(const[r,s]of i)this.labels.push(r),this.outputs.push(s)}static parse(e,n){if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return n.error("Expected an even number of arguments.");const i=n.parse(e[1],1,z);if(!i)return null;const r=[];let s=null;n.expectedType&&n.expectedType.kind!=="value"&&(s=n.expectedType);for(let o=1;o<e.length;o+=2){const a=o===1?-1/0:e[o],l=e[o+1],u=o,c=o+1;if(typeof a!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=a)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);const h=n.parse(l,c,s);if(!h)return null;s=s||h.type,r.push([a,h])}return new Rg(s,i,r)}evaluate(e){const n=this.labels,i=this.outputs;if(n.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=n[0])return i[0].evaluate(e);const s=n.length;if(r>=n[s-1])return i[s-1].evaluate(e);const o=_x(n,r);return i[o].evaluate(e)}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let n=0;n<this.labels.length;n++)n>0&&e.push(this.labels[n]),e.push(this.outputs[n].serialize());return e}}var vx=Rg,KI=vo;function vo(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=n,this.p2y=i}vo.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t};vo.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t};vo.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx};vo.prototype.solveCurveX=function(t,e){typeof e>"u"&&(e=1e-6);var n,i,r,s,o;for(r=t,o=0;o<8;o++){if(s=this.sampleCurveX(r)-t,Math.abs(s)<e)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r=r-s/a}if(n=0,i=1,r=t,r<n)return n;if(r>i)return i;for(;n<i;){if(s=this.sampleCurveX(r),Math.abs(s-t)<e)return r;t>s?n=r:i=r,r=(i-n)*.5+n}return r};vo.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var HI=ux(KI);function en(t,e,n){return t*(1-n)+e*n}function qI(t,e,n){return new rn(en(t.r,e.r,n),en(t.g,e.g,n),en(t.b,e.b,n),en(t.a,e.a,n))}function JI(t,e,n){return t.map((i,r)=>en(i,e[r],n))}var QI=Object.freeze({__proto__:null,number:en,color:qI,array:JI});const xx=.95047,wx=1,Ex=1.08883,Cx=4/29,Bs=6/29,Sx=3*Bs*Bs,ek=Bs*Bs*Bs,tk=Math.PI/180,nk=180/Math.PI;function jh(t){return t>ek?Math.pow(t,1/3):t/Sx+Cx}function Wh(t){return t>Bs?t*t*t:Sx*(t-Cx)}function Vh(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Uh(t){return t/=255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Tx(t){const e=Uh(t.r),n=Uh(t.g),i=Uh(t.b),r=jh((.4124564*e+.3575761*n+.1804375*i)/xx),s=jh((.2126729*e+.7151522*n+.072175*i)/wx),o=jh((.0193339*e+.119192*n+.9503041*i)/Ex);return{l:116*s-16,a:500*(r-s),b:200*(s-o),alpha:t.a}}function Rx(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=wx*Wh(e),n=xx*Wh(n),i=Ex*Wh(i),new rn(Vh(3.2404542*n-1.5371385*e-.4985314*i),Vh(-.969266*n+1.8760108*e+.041556*i),Vh(.0556434*n-.2040259*e+1.0572252*i),t.alpha)}function ik(t,e,n){return{l:en(t.l,e.l,n),a:en(t.a,e.a,n),b:en(t.b,e.b,n),alpha:en(t.alpha,e.alpha,n)}}function rk(t){const{l:e,a:n,b:i}=Tx(t),r=Math.atan2(i,n)*nk;return{h:r<0?r+360:r,c:Math.sqrt(n*n+i*i),l:e,alpha:t.a}}function sk(t){const e=t.h*tk,n=t.c,i=t.l;return Rx({l:i,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})}function ok(t,e,n){const i=e-t;return t+n*(i>180||i<-180?i-360*Math.round(i/360):i)}function ak(t,e,n){return{h:ok(t.h,e.h,n),c:en(t.c,e.c,n),l:en(t.l,e.l,n),alpha:en(t.alpha,e.alpha,n)}}const Dl={forward:Tx,reverse:Rx,interpolate:ik},zl={forward:rk,reverse:sk,interpolate:ak};class Yu{constructor(e,n,i,r,s){this.type=e,this.operator=n,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of s)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(e,n,i,r){let s=0;if(e.name==="exponential")s=Xh(n,e.base,i,r);else if(e.name==="linear")s=Xh(n,1,i,r);else if(e.name==="cubic-bezier"){const o=e.controlPoints;s=new HI(o[0],o[1],o[2],o[3]).solve(Xh(n,1,i,r))}return s}static parse(e,n){let[i,r,s,...o]=e;if(!Array.isArray(r)||r.length===0)return n.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const u=r[1];if(typeof u!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:u}}else if(r[0]==="cubic-bezier"){const u=r.slice(1);if(u.length!==4||u.some(c=>typeof c!="number"||c<0||c>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:u}}else return n.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return n.error("Expected an even number of arguments.");if(s=n.parse(s,2,z),!s)return null;const a=[];let l=null;i==="interpolate-hcl"||i==="interpolate-lab"?l=Ci:n.expectedType&&n.expectedType.kind!=="value"&&(l=n.expectedType);for(let u=0;u<o.length;u+=2){const c=o[u],h=o[u+1],d=u+3,f=u+4;if(typeof c!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(a.length&&a[a.length-1][0]>=c)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);const p=n.parse(h,f,l);if(!p)return null;l=l||p.type,a.push([c,p])}return l.kind!=="number"&&l.kind!=="color"&&!(l.kind==="array"&&l.itemType.kind==="number"&&typeof l.N=="number")?n.error(`Type ${Oe(l)} is not interpolatable.`):new Yu(l,i,r,s,a)}evaluate(e){const n=this.labels,i=this.outputs;if(n.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=n[0])return i[0].evaluate(e);const s=n.length;if(r>=n[s-1])return i[s-1].evaluate(e);const o=_x(n,r),a=n[o],l=n[o+1],u=Yu.interpolationFactor(this.interpolation,r,a,l),c=i[o].evaluate(e),h=i[o+1].evaluate(e);return this.operator==="interpolate"?QI[this.type.kind.toLowerCase()](c,h,u):this.operator==="interpolate-hcl"?zl.reverse(zl.interpolate(zl.forward(c),zl.forward(h),u)):Dl.reverse(Dl.interpolate(Dl.forward(c),Dl.forward(h),u))}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const n=[this.operator,e,this.input.serialize()];for(let i=0;i<this.labels.length;i++)n.push(this.labels[i],this.outputs[i].serialize());return n}}function Xh(t,e,n,i){const r=i-n,s=t-n;return r===0?0:e===1?s/r:(Math.pow(e,s)-1)/(Math.pow(e,r)-1)}var Ur=Yu;class Zu{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expectected at least one argument.");let i=null;const r=n.expectedType;r&&r.kind!=="value"&&(i=r);const s=[];for(const a of e.slice(1)){const l=n.parse(a,1+s.length,i,void 0,{typeAnnotation:"omit"});if(!l)return null;i=i||l.type,s.push(l)}return r&&s.some(a=>Da(r,a.type))?new Zu(ne,s):new Zu(i,s)}evaluate(e){let n=null,i=0,r;for(const s of this.args){if(i++,n=s.evaluate(e),n&&n instanceof xr&&!n.available&&(r||(r=n),n=null,i===this.args.length))return r;if(n!==null)break}return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(n=>{e.push(n.serialize())}),e}}var Ix=Zu;class Ig{constructor(e,n){this.type=n.type,this.bindings=[].concat(e),this.result=n}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const n of this.bindings)e(n[1]);e(this.result)}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let s=1;s<e.length-1;s+=2){const o=e[s];if(typeof o!="string")return n.error(`Expected string, but found ${typeof o} instead.`,s);if(/[^a-zA-Z0-9_]/.test(o))return n.error("Variable names must contain only alphanumeric characters or '_'.",s);const a=n.parse(e[s+1],s+1);if(!a)return null;i.push([o,a])}const r=n.parse(e[e.length-1],e.length-1,n.expectedType,i);return r?new Ig(i,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[n,i]of this.bindings)e.push(n,i.serialize());return e.push(this.result.serialize()),e}}var kx=Ig;class kg{constructor(e,n,i){this.type=e,this.index=n,this.input=i}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=n.parse(e[1],1,z),r=n.parse(e[2],2,fn(n.expectedType||ne));if(!i||!r)return null;const s=r.type;return new kg(s.itemType,i,r)}evaluate(e){const n=this.index.evaluate(e),i=this.input.evaluate(e);if(n<0)throw new yt(`Array index out of bounds: ${n} < 0.`);if(n>=i.length)throw new yt(`Array index out of bounds: ${n} > ${i.length-1}.`);if(n!==Math.floor(n))throw new yt(`Array index must be an integer, but found ${n} instead.`);return i[n]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var lk=kg;class Mg{constructor(e,n){this.type=te,this.needle=e,this.haystack=n}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=n.parse(e[1],1,ne),r=n.parse(e[2],2,ne);return!i||!r?null:fg(i.type,[te,se,z,Nc,ne])?new Mg(i,r):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Oe(i.type)} instead`)}evaluate(e){const n=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(i==null)return!1;if(!za(n,["boolean","string","number","null"]))throw new yt(`Expected first argument to be of type boolean, string, number or null, but found ${Oe(nt(n))} instead.`);if(!za(i,["string","array"]))throw new yt(`Expected second argument to be of type array or string, but found ${Oe(nt(i))} instead.`);return i.indexOf(n)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var uk=Mg;class Ku{constructor(e,n,i){this.type=z,this.needle=e,this.haystack=n,this.fromIndex=i}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=n.parse(e[1],1,ne),r=n.parse(e[2],2,ne);if(!i||!r)return null;if(!fg(i.type,[te,se,z,Nc,ne]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Oe(i.type)} instead`);if(e.length===4){const s=n.parse(e[3],3,z);return s?new Ku(i,r,s):null}else return new Ku(i,r)}evaluate(e){const n=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!za(n,["boolean","string","number","null"]))throw new yt(`Expected first argument to be of type boolean, string, number or null, but found ${Oe(nt(n))} instead.`);if(!za(i,["string","array"]))throw new yt(`Expected second argument to be of type array or string, but found ${Oe(nt(i))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return i.indexOf(n,r)}return i.indexOf(n)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var ck=Ku;class Fg{constructor(e,n,i,r,s,o){this.inputType=e,this.type=n,this.input=i,this.cases=r,this.outputs=s,this.otherwise=o}static parse(e,n){if(e.length<5)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return n.error("Expected an even number of arguments.");let i,r;n.expectedType&&n.expectedType.kind!=="value"&&(r=n.expectedType);const s={},o=[];for(let u=2;u<e.length-1;u+=2){let c=e[u];const h=e[u+1];Array.isArray(c)||(c=[c]);const d=n.concat(u);if(c.length===0)return d.error("Expected at least one branch label.");for(const p of c){if(typeof p!="number"&&typeof p!="string")return d.error("Branch labels must be numbers or strings.");if(typeof p=="number"&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return d.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof p=="number"&&Math.floor(p)!==p)return d.error("Numeric branch labels must be integer values.");if(!i)i=nt(p);else if(d.checkSubtype(i,nt(p)))return null;if(typeof s[String(p)]<"u")return d.error("Branch labels must be unique.");s[String(p)]=o.length}const f=n.parse(h,u,r);if(!f)return null;r=r||f.type,o.push(f)}const a=n.parse(e[1],1,ne);if(!a)return null;const l=n.parse(e[e.length-1],e.length-1,r);return!l||a.type.kind!=="value"&&n.concat(1).checkSubtype(i,a.type)?null:new Fg(i,r,a,s,o,l)}evaluate(e){const n=this.input.evaluate(e);return(nt(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),i=[],r={};for(const o of n){const a=r[this.cases[o]];a===void 0?(r[this.cases[o]]=i.length,i.push([this.cases[o],[o]])):i[a][1].push(o)}const s=o=>this.inputType.kind==="number"?Number(o):o;for(const[o,a]of i)a.length===1?e.push(s(a[0])):e.push(a.map(s)),e.push(this.outputs[o].serialize());return e.push(this.otherwise.serialize()),e}}var hk=Fg;class Pg{constructor(e,n,i){this.type=e,this.branches=n,this.otherwise=i}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return n.error("Expected an odd number of arguments.");let i;n.expectedType&&n.expectedType.kind!=="value"&&(i=n.expectedType);const r=[];for(let o=1;o<e.length-1;o+=2){const a=n.parse(e[o],o,te);if(!a)return null;const l=n.parse(e[o+1],o+1,i);if(!l)return null;r.push([a,l]),i=i||l.type}const s=n.parse(e[e.length-1],e.length-1,i);return s?new Pg(i,r,s):null}evaluate(e){for(const[n,i]of this.branches)if(n.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[n,i]of this.branches)e(n),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,n])=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(n=>{e.push(n.serialize())}),e}}var dk=Pg;class Hu{constructor(e,n,i,r){this.type=e,this.input=n,this.beginIndex=i,this.endIndex=r}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=n.parse(e[1],1,ne),r=n.parse(e[2],2,z);if(!i||!r)return null;if(!fg(i.type,[fn(ne),se,ne]))return n.error(`Expected first argument to be of type array or string, but found ${Oe(i.type)} instead`);if(e.length===4){const s=n.parse(e[3],3,z);return s?new Hu(i.type,i,r,s):null}else return new Hu(i.type,i,r)}evaluate(e){const n=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!za(n,["string","array"]))throw new yt(`Expected first argument to be of type array or string, but found ${Oe(nt(n))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return n.slice(i,r)}return n.slice(i)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var fk=Hu;function Qy(t,e){return t==="=="||t==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function pk(t,e,n){return e===n}function gk(t,e,n){return e!==n}function mk(t,e,n){return e<n}function yk(t,e,n){return e>n}function _k(t,e,n){return e<=n}function vk(t,e,n){return e>=n}function Mx(t,e,n,i){return i.compare(e,n)===0}function xk(t,e,n,i){return!Mx(t,e,n,i)}function wk(t,e,n,i){return i.compare(e,n)<0}function Ek(t,e,n,i){return i.compare(e,n)>0}function Ck(t,e,n,i){return i.compare(e,n)<=0}function Sk(t,e,n,i){return i.compare(e,n)>=0}function xo(t,e,n){const i=t!=="=="&&t!=="!=";return class Fx{constructor(s,o,a){this.type=te,this.lhs=s,this.rhs=o,this.collator=a,this.hasUntypedArgument=s.type.kind==="value"||o.type.kind==="value"}static parse(s,o){if(s.length!==3&&s.length!==4)return o.error("Expected two or three arguments.");const a=s[0];let l=o.parse(s[1],1,ne);if(!l)return null;if(!Qy(a,l.type))return o.concat(1).error(`"${a}" comparisons are not supported for type '${Oe(l.type)}'.`);let u=o.parse(s[2],2,ne);if(!u)return null;if(!Qy(a,u.type))return o.concat(2).error(`"${a}" comparisons are not supported for type '${Oe(u.type)}'.`);if(l.type.kind!==u.type.kind&&l.type.kind!=="value"&&u.type.kind!=="value")return o.error(`Cannot compare types '${Oe(l.type)}' and '${Oe(u.type)}'.`);i&&(l.type.kind==="value"&&u.type.kind!=="value"?l=new mi(u.type,[l]):l.type.kind!=="value"&&u.type.kind==="value"&&(u=new mi(l.type,[u])));let c=null;if(s.length===4){if(l.type.kind!=="string"&&u.type.kind!=="string"&&l.type.kind!=="value"&&u.type.kind!=="value")return o.error("Cannot use collator to compare non-string types.");if(c=o.parse(s[3],3,Gc),!c)return null}return new Fx(l,u,c)}evaluate(s){const o=this.lhs.evaluate(s),a=this.rhs.evaluate(s);if(i&&this.hasUntypedArgument){const l=nt(o),u=nt(a);if(l.kind!==u.kind||!(l.kind==="string"||l.kind==="number"))throw new yt(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${l.kind}, ${u.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const l=nt(o),u=nt(a);if(l.kind!=="string"||u.kind!=="string")return e(s,o,a)}return this.collator?n(s,o,a,this.collator.evaluate(s)):e(s,o,a)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}serialize(){const s=[t];return this.eachChild(o=>{s.push(o.serialize())}),s}}}const Tk=xo("==",pk,Mx),Rk=xo("!=",gk,xk),Ik=xo("<",mk,wk),kk=xo(">",yk,Ek),Mk=xo("<=",_k,Ck),Fk=xo(">=",vk,Sk);class Lg{constructor(e,n,i,r,s,o){this.type=se,this.number=e,this.locale=n,this.currency=i,this.unit=r,this.minFractionDigits=s,this.maxFractionDigits=o}static parse(e,n){if(e.length!==3)return n.error("Expected two arguments.");const i=n.parse(e[1],1,z);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return n.error("NumberFormat options argument must be an object.");let s=null;if(r.locale&&(s=n.parse(r.locale,1,se),!s))return null;let o=null;if(r.currency&&(o=n.parse(r.currency,1,se),!o))return null;let a=null;if(r.unit&&(a=n.parse(r.unit,1,se),!a))return null;let l=null;if(r["min-fraction-digits"]&&(l=n.parse(r["min-fraction-digits"],1,z),!l))return null;let u=null;return r["max-fraction-digits"]&&(u=n.parse(r["max-fraction-digits"],1,z),!u)?null:new Lg(i,s,o,a,l,u)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Ag{constructor(e){this.type=z,this.input=e}static parse(e,n){if(e.length!==2)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=n.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${Oe(i.type)} instead.`):new Ag(i):null}evaluate(e){const n=this.input.evaluate(e);if(typeof n=="string")return n.length;if(Array.isArray(n))return n.length;throw new yt(`Expected value to be of type string or array, but found ${Oe(nt(n))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(n=>{e.push(n.serialize())}),e}}var Pk=Ag;const Px={"==":Tk,"!=":Rk,">":kk,"<":Ik,">=":Fk,"<=":Mk,array:mi,at:lk,boolean:mi,case:dk,coalesce:Ix,collator:Uc,format:Wc,image:Vc,in:uk,"index-of":ck,interpolate:Ur,"interpolate-hcl":Ur,"interpolate-lab":Ur,length:Pk,let:kx,literal:Bu,match:hk,number:mi,"number-format":Lg,object:mi,slice:fk,step:vx,string:mi,"to-boolean":Ls,"to-color":Ls,"to-number":Ls,"to-string":Ls,var:mx,within:wg};function e0(t,[e,n,i,r]){e=e.evaluate(t),n=n.evaluate(t),i=i.evaluate(t);const s=r?r.evaluate(t):1,o=hx(e,n,i,s);if(o)throw new yt(o);return new rn(e/255*s,n/255*s,i/255*s,s)}function t0(t,e){return t in e}function Bh(t,e){const n=e[t];return typeof n>"u"?null:n}function Lk(t,e,n,i){for(;n<=i;){const r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=r+1}return!1}function Rr(t){return{type:t}}_o.register(Px,{error:[MI,[se],(t,[e])=>{throw new yt(e.evaluate(t))}],typeof:[se,[ne],(t,[e])=>Oe(nt(e.evaluate(t)))],"to-rgba":[fn(z,4),[Ci],(t,[e])=>e.evaluate(t).toArray()],rgb:[Ci,[z,z,z],e0],rgba:[Ci,[z,z,z,z],e0],has:{type:te,overloads:[[[se],(t,[e])=>t0(e.evaluate(t),t.properties())],[[se,Xs],(t,[e,n])=>t0(e.evaluate(t),n.evaluate(t))]]},get:{type:ne,overloads:[[[se],(t,[e])=>Bh(e.evaluate(t),t.properties())],[[se,Xs],(t,[e,n])=>Bh(e.evaluate(t),n.evaluate(t))]]},"feature-state":[ne,[se],(t,[e])=>Bh(e.evaluate(t),t.featureState||{})],properties:[Xs,[],t=>t.properties()],"geometry-type":[se,[],t=>t.geometryType()],id:[ne,[],t=>t.id()],zoom:[z,[],t=>t.globals.zoom],pitch:[z,[],t=>t.globals.pitch||0],"distance-from-center":[z,[],t=>t.distanceFromCenter()],"heatmap-density":[z,[],t=>t.globals.heatmapDensity||0],"line-progress":[z,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[z,[],t=>t.globals.skyRadialProgress||0],accumulated:[ne,[],t=>t.globals.accumulated===void 0?null:t.globals.accumulated],"+":[z,Rr(z),(t,e)=>{let n=0;for(const i of e)n+=i.evaluate(t);return n}],"*":[z,Rr(z),(t,e)=>{let n=1;for(const i of e)n*=i.evaluate(t);return n}],"-":{type:z,overloads:[[[z,z],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[z],(t,[e])=>-e.evaluate(t)]]},"/":[z,[z,z],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[z,[z,z],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[z,[],()=>Math.LN2],pi:[z,[],()=>Math.PI],e:[z,[],()=>Math.E],"^":[z,[z,z],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[z,[z],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[z,[z],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[z,[z],(t,[e])=>Math.log(e.evaluate(t))],log2:[z,[z],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[z,[z],(t,[e])=>Math.sin(e.evaluate(t))],cos:[z,[z],(t,[e])=>Math.cos(e.evaluate(t))],tan:[z,[z],(t,[e])=>Math.tan(e.evaluate(t))],asin:[z,[z],(t,[e])=>Math.asin(e.evaluate(t))],acos:[z,[z],(t,[e])=>Math.acos(e.evaluate(t))],atan:[z,[z],(t,[e])=>Math.atan(e.evaluate(t))],min:[z,Rr(z),(t,e)=>Math.min(...e.map(n=>n.evaluate(t)))],max:[z,Rr(z),(t,e)=>Math.max(...e.map(n=>n.evaluate(t)))],abs:[z,[z],(t,[e])=>Math.abs(e.evaluate(t))],round:[z,[z],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[z,[z],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[z,[z],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[te,[se,ne],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[te,[ne],(t,[e])=>t.id()===e.value],"filter-type-==":[te,[se],(t,[e])=>t.geometryType()===e.value],"filter-<":[te,[se,ne],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i<r}],"filter-id-<":[te,[ne],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n<i}],"filter->":[te,[se,ne],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i>r}],"filter-id->":[te,[ne],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n>i}],"filter-<=":[te,[se,ne],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[te,[ne],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n<=i}],"filter->=":[te,[se,ne],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[te,[ne],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n>=i}],"filter-has":[te,[ne],(t,[e])=>e.value in t.properties()],"filter-has-id":[te,[],t=>t.id()!==null&&t.id()!==void 0],"filter-type-in":[te,[fn(se)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[te,[fn(ne)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[te,[se,fn(ne)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[te,[se,fn(ne)],(t,[e,n])=>Lk(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:te,overloads:[[[te,te],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[Rr(te),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:te,overloads:[[[te,te],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[Rr(te),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[te,[te],(t,[e])=>!e.evaluate(t)],"is-supported-script":[te,[se],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return n?n(e.evaluate(t)):!0}],upcase:[se,[se],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[se,[se],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[se,Rr(ne),(t,e)=>e.map(n=>ea(n.evaluate(t))).join("")],"resolved-locale":[se,[Gc],(t,[e])=>e.evaluate(t).resolvedLocale()]});var Lx=Px;function _f(t){return{result:"success",value:t}}function ys(t){return{result:"error",value:t}}function Ak(t){return t["property-type"]==="data-driven"}function bk(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Ok(t){return!!t.expression&&t.expression.interpolated}function Ax(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}class Dk{constructor(e,n){this.expression=e,this._warningHistory={},this._evaluator=new dx,this._defaultValue=n?jk(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(e,n,i,r,s,o,a,l){return this._evaluator.globals=e,this._evaluator.feature=n,this._evaluator.featureState=i,this._evaluator.canonical=r||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=l||null,this.expression.evaluate(this._evaluator)}evaluate(e,n,i,r,s,o,a,l){this._evaluator.globals=e,this._evaluator.feature=n||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=l||null;try{const u=this.expression.evaluate(this._evaluator);if(u==null||typeof u=="number"&&u!==u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new yt(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(u)} instead.`);return u}catch(u){return this._warningHistory[u.message]||(this._warningHistory[u.message]=!0,typeof console<"u"&&console.warn(u.message)),this._defaultValue}}}function zk(t){return Array.isArray(t)&&t.length>0&&typeof t[0]=="string"&&t[0]in Lx}function vf(t,e){const n=new yx(Lx,[],e?Gk(e):void 0),i=n.parse(t,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?_f(new Dk(i,e)):ys(n.errors)}class n0{constructor(e,n){this.kind=e,this._styleExpression=n,this.isStateDependent=e!=="constant"&&!Eg(n.expression)}evaluateWithoutErrorHandling(e,n,i,r,s,o){return this._styleExpression.evaluateWithoutErrorHandling(e,n,i,r,s,o)}evaluate(e,n,i,r,s,o){return this._styleExpression.evaluate(e,n,i,r,s,o)}}class i0{constructor(e,n,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=n,this.isStateDependent=e!=="camera"&&!Eg(n.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,n,i,r,s,o){return this._styleExpression.evaluateWithoutErrorHandling(e,n,i,r,s,o)}evaluate(e,n,i,r,s,o){return this._styleExpression.evaluate(e,n,i,r,s,o)}interpolationFactor(e,n,i){return this.interpolationType?Ur.interpolationFactor(this.interpolationType,e,n,i):0}}function Nk(t,e){if(t=vf(t,e),t.result==="error")return t;const n=t.value.expression,i=Xc(n);if(!i&&!Ak(e))return ys([new Un("","data expressions not supported")]);const r=Cg(n,["zoom","pitch","distance-from-center"]);if(!r&&!bk(e))return ys([new Un("","zoom expressions not supported")]);const s=nu(n);if(!s&&!r)return ys([new Un("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof Un)return ys([s]);if(s instanceof Ur&&!Ok(e))return ys([new Un("",'"interpolate" expressions cannot be used with this property')]);if(!s)return _f(i?new n0("constant",t.value):new n0("source",t.value));const o=s instanceof Ur?s.interpolation:void 0;return _f(i?new i0("camera",t.value,s.labels,o):new i0("composite",t.value,s.labels,o))}function nu(t){let e=null;if(t instanceof kx)e=nu(t.result);else if(t instanceof Ix){for(const n of t.args)if(e=nu(n),e)break}else(t instanceof vx||t instanceof Ur)&&t.input instanceof _o&&t.input.name==="zoom"&&(e=t);return e instanceof Un||t.eachChild(n=>{const i=nu(n);i instanceof Un?e=i:!e&&i?e=new Un("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Un("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Gk(t){const e={color:Ci,string:se,number:z,enum:se,boolean:te,formatted:jc,resolvedImage:nl};return t.type==="array"?fn(e[t.value]||ne,t.length):e[t.type]}function jk(t){return t.type==="color"&&(Ax(t.default)||Array.isArray(t.default))?new rn(0,0,0,0):t.type==="color"?rn.parse(t.default)||null:t.default===void 0?null:t.default}function Wk(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function xf(t){if(Array.isArray(t))return t.map(xf);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=xf(t[n]);return e}return Wk(t)}var bx={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function Ox(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Ox(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function Vk(t,e="fill"){if(t==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Ox(t)||(t=qu(t));const n=t;let i=!0;try{i=Uk(n)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(n,null,2)}
        `)}const r=bx[`filter_${e}`],s=vf(i,r);let o=null;if(s.result==="error")throw new Error(s.value.map(c=>`${c.key}: ${c.message}`).join(", "));o=(c,h,d)=>s.value.evaluate(c,h,{},d);let a=null,l=null;if(i!==n){const c=vf(n,r);if(c.result==="error")throw new Error(c.value.map(h=>`${h.key}: ${h.message}`).join(", "));a=(h,d,f,p,y)=>c.value.evaluate(h,d,{},f,void 0,void 0,p,y),l=!Xc(c.value.expression)}o=o;const u=Nx(i);return{filter:o,dynamicFilter:a||void 0,needGeometry:u,needFeature:!!l}}function Uk(t){if(!$s(t))return t;let e=xf(t);return zx(e),e=Dx(e),e}function Dx(t){if(!Array.isArray(t))return t;const e=$k(t);return e===!0?e:e.map(n=>Dx(n))}function zx(t){let e=!1;const n=[];if(t[0]==="case"){for(let i=1;i<t.length-1;i+=2)e=e||$s(t[i]),n.push(t[i+1]);n.push(t[t.length-1])}else if(t[0]==="match"){e=e||$s(t[1]);for(let i=2;i<t.length-1;i+=2)n.push(t[i+1]);n.push(t[t.length-1])}else if(t[0]==="step"){e=e||$s(t[1]);for(let i=1;i<t.length-1;i+=2)n.push(t[i+1])}e&&(t.length=0,t.push("any",...n));for(let i=1;i<t.length;i++)zx(t[i])}function $s(t){if(!Array.isArray(t))return!1;if(Xk(t[0]))return!0;for(let e=1;e<t.length;e++){const n=t[e];if($s(n))return!0}return!1}function Xk(t){return t==="pitch"||t==="distance-from-center"}const Bk=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function $k(t){if(Bk.has(t[0]))for(let e=1;e<t.length;e++){const n=t[e];if($s(n))return!0}return t}function Yk(t,e){return t<e?-1:t>e?1:0}function Nx(t){if(!Array.isArray(t))return!1;if(t[0]==="within")return!0;for(let e=1;e<t.length;e++)if(Nx(t[e]))return!0;return!1}function qu(t){if(!t)return!0;const e=t[0];return t.length<=1?e!=="any":e==="=="?$h(t[1],t[2],"=="):e==="!="?Nl($h(t[1],t[2],"==")):e==="<"||e===">"||e==="<="||e===">="?$h(t[1],t[2],e):e==="any"?Zk(t.slice(1)):e==="all"?["all"].concat(t.slice(1).map(qu)):e==="none"?["all"].concat(t.slice(1).map(qu).map(Nl)):e==="in"?r0(t[1],t.slice(2)):e==="!in"?Nl(r0(t[1],t.slice(2))):e==="has"?s0(t[1]):e==="!has"?Nl(s0(t[1])):e==="within"?t:!0}function $h(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function Zk(t){return["any"].concat(t.map(qu))}function r0(t,e){if(e.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(n=>typeof n!=typeof e[0])?["filter-in-large",t,["literal",e.sort(Yk)]]:["filter-in-small",t,["literal",e]]}}function s0(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Nl(t){return["!",t]}var Kk=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Hk(t,e){const n={};for(const i in t)i!=="ref"&&(n[i]=t[i]);return Kk.forEach(i=>{i in e&&(n[i]=e[i])}),n}function qk(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=Hk(t[n],e[t[n].ref]));return t}var o0={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},bo=" ",a0=/(italic|oblique)$/i,l0={},Jk=function(t,e,n){var i=l0[t];if(!i){Array.isArray(t)||(t=[t]);for(var r=400,s="normal",o=[],a,l,u=0,c=t.length;u<c;++u){var h=t[u],d=h.split(" "),f=d[d.length-1].toLowerCase();f=="normal"||f=="italic"||f=="oblique"?(s=l?s:f,l=!0,d.pop(),f=d[d.length-1].toLowerCase()):a0.test(f)&&(f=f.replace(a0,""),s=l?s:d[d.length-1].replace(f,""),l=!0);for(var p in o0){var y=d.length>1?d[d.length-2].toLowerCase():"";if(f==p||f==p.replace("-","")||y+"-"+f==p){r=a?r:o0[p],d.pop(),y&&p.startsWith(y)&&d.pop();break}}!a&&typeof f=="number"&&(r=f,a=!0);var v=d.join(bo).replace("Klokantech Noto Sans","Noto Sans");v.indexOf(bo)!==-1&&(v='"'+v+'"'),o.push(v)}i=l0[t]=[s,r,o]}return i[0]+bo+i[1]+bo+e+"px"+(n?"/"+n:"")+bo+i[2]},wf=ux(Jk);const Gx="https://api.mapbox.com";function bg(t){const e="mapbox://";return t.indexOf(e)!==0?"":t.slice(e.length)}function Qk(t,e,n){const i=bg(t);if(!i)return decodeURI(new URL(t,n).href);const r="sprites/";if(i.indexOf(r)!==0)throw new Error(`unexpected sprites url: ${t}`);const s=i.slice(r.length);return`${Gx}/styles/v1/${s}/sprite?access_token=${e}`}function jx(t,e){const n=bg(t);if(!n)return decodeURI(new URL(t,location.href).href);const i="styles/";if(n.indexOf(i)!==0)throw new Error(`unexpected style url: ${t}`);const r=n.slice(i.length);return`${Gx}/styles/v1/${r}?&access_token=${e}`}function iu(t,e,n,i){const r=new URL(t,i),s=bg(t);if(!s)return e&&(r.searchParams.has(n)||r.searchParams.set(n,e)),decodeURI(r.href);if(s==="mapbox.satellite"){const o=window.devicePixelRatio>=1.5?"@2x":"";return`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${o}.webp?access_token=${e}`}return`https://{a-d}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`}const u0={},c0={};let eM=0;function Og(t){return t.id||(t.id=eM++),t.id}function tM(t,e){return Og(t)+"."+ee(e)}function nM(t){let e=u0[t.id];return e||(e={},u0[Og(t)]=e),e}function iM(t){let e=c0[t.id];return e||(e={},c0[Og(t)]=e),e}function Yh(t){return t*Math.PI/180}const Bc=function(){const t=[];for(let e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function $c(t,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(t,e);const n=document.createElement("canvas");return n.width=t,n.height=e,n}function Wx(t,e){let n=0;const i=e.length;for(;n<i;++n)if(e[n]<t&&n+1<i){const s=e[n]/e[n+1];return n+Math.log(e[n]/t)/Math.log(s)}return i-1}function rM(t,e){const n=Math.floor(t),i=Math.pow(2,t-n);return e[n]/i}const ds={};function lo(t,e,n={},i){if(e in ds)return i&&(i.request=ds[e][0]),ds[e][1];const r=n.transformRequest&&n.transformRequest(e,t)||e,s=xa(()=>r).then(o=>(o instanceof Request||(o=new Request(o)),o.headers.get("Accept")||o.headers.set("Accept","application/json"),i&&(i.request=o),fetch(o).then(function(a){return delete ds[e],a.ok?a.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(a){return delete ds[e],Promise.reject(new Error("Error fetching source "+e))})));return ds[e]=[r,s],s}function Vx(t,e){if(typeof t=="string")if(t.trim().startsWith("{"))try{const n=JSON.parse(t);return Promise.resolve(n)}catch(n){return Promise.reject(n)}else return t=jx(t,e.accessToken),lo("Style",t,e);else return Promise.resolve(t)}const h0={};function sM(t,e,n={}){const i=[e,JSON.stringify(t)].toString();let r=h0[i];if(!r||n.transformRequest){let s;n.transformRequest&&(s=(a,l)=>{const u=n.transformRequest&&n.transformRequest(l,"Tiles")||l;if(a instanceof ex)a.setLoader((c,h,d)=>{xa(()=>u).then(f=>{fetch(f).then(p=>p.arrayBuffer()).then(p=>{const v=a.getFormat().readFeatures(p,{extent:c,featureProjection:d});a.setFeatures(v)}).catch(p=>a.setState(G.ERROR))})});else{const c=a.getImage();xa(()=>u).then(h=>{h instanceof Request?fetch(h).then(d=>d.blob()).then(d=>{const f=URL.createObjectURL(d);c.addEventListener("load",()=>URL.revokeObjectURL(f)),c.addEventListener("error",()=>URL.revokeObjectURL(f)),c.src=f}).catch(d=>a.setState(G.ERROR)):c.src=h})}});const o=t.url;if(o&&!t.tiles){const a=iu(o,n.accessToken,n.accessTokenParam||"access_token",e||location.href);if(o.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},t,{url:void 0,tiles:nx(a)}),tileLoadFunction:s});else{const l={};r=lo("Source",a,n,l).then(function(u){return u.tiles=u.tiles.map(function(c){return u.scheme==="tms"&&(c=c.replace("{y}","{-y}")),iu(c,n.accessToken,n.accessTokenParam||"access_token",l.request.url)}),Promise.resolve({tileJson:u,tileLoadFunction:s})})}}else t=Object.assign({},t,{tiles:t.tiles.map(function(a){return t.scheme==="tms"&&(a=a.replace("{y}","{-y}")),iu(a,n.accessToken,n.accessTokenParam||"access_token",e||location.href)})}),r=Promise.resolve({tileJson:Object.assign({},t),tileLoadFunction:s});h0[i]=r}return r}function d0(t,e,n,i){const r=[2*n*e.pixelRatio+e.width,2*n*e.pixelRatio+e.height],s=$c(r[0],r[1]),o=s.getContext("2d");o.drawImage(t,e.x,e.y,e.width,e.height,n*e.pixelRatio,n*e.pixelRatio,e.width,e.height);const a=o.getImageData(0,0,r[0],r[1]);o.globalCompositeOperation="destination-over",o.fillStyle=`rgba(${i.r*255},${i.g*255},${i.b*255},${i.a})`;const l=a.data;for(let u=0,c=a.width;u<c;++u)for(let h=0,d=a.height;h<d;++h){const f=(h*c+u)*4;l[f+3]>0&&o.arc(u,h,n*e.pixelRatio,0,2*Math.PI)}return o.fill(),s}function oM(t,e,n){const i=Math.max(0,Math.min(1,(n-t)/(e-t)));return i*i*(3-2*i)}function f0(t,e,n){const i=$c(e.width,e.height),r=i.getContext("2d");r.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),o=s.data;for(let a=0,l=s.width;a<l;++a)for(let u=0,c=s.height;u<c;++u){const h=(u*l+a)*4,d=o[h+3]/255,f=.75,p=.1,y=oM(f-p,f+p,d);y>0?(o[h+0]=Math.round(255*n.r*y),o[h+1]=Math.round(255*n.g*y),o[h+2]=Math.round(255*n.b*y),o[h+3]=Math.round(255*y)):o[h+3]=0}return r.putImageData(s,0,0),i}const aM=Array(256).join(" ");function Ef(t,e){if(e>=.05){let n="";const i=t.split(`
`),r=aM.slice(0,Math.round(e/.1));for(let s=0,o=i.length;s<o;++s)s>0&&(n+=`
`),n+=i[s].split("").join(r);return n}return t}let Zh;function Ux(){return Zh||(Zh=$c(1,1).getContext("2d")),Zh}function Ir(t,e){return Ux().measureText(t).width+(t.length-1)*e}const p0={};function Cf(t,e,n,i){if(t.indexOf(`
`)!==-1){const o=t.split(`
`),a=[];for(let l=0,u=o.length;l<u;++l)a.push(Cf(o[l],e,n,i));return a.join(`
`)}const r=n+","+e+","+t+","+i;let s=p0[r];if(!s){const o=t.split(" ");if(o.length>1){const a=Ux();a.font=e;const u=a.measureText("M").width*n;let c="";const h=[];for(let d=0,f=o.length;d<f;++d){const p=o[d],y=c+(c?" ":"")+p;Ir(y,i)<=u?c=y:(c&&h.push(c),c=p)}c&&h.push(c);for(let d=0,f=h.length;d<f&&f>1;++d){const p=h[d];if(Ir(p,i)<u*.35){const y=d>0?Ir(h[d-1],i):1/0,v=d<f-1?Ir(h[d+1],i):1/0;h.splice(d,1),f-=1,y<v?(h[d-1]+=" "+p,d-=1):h[d]=p+" "+h[d]}}for(let d=0,f=h.length-1;d<f;++d){const p=h[d],y=h[d+1];if(Ir(p,i)>u*.7&&Ir(y,i)<u*.6){const v=p.split(" "),m=v.pop();Ir(m,i)<u*.2&&(h[d]=v.join(" "),h[d+1]=m+" "+y),f-=1}}s=h.join(`
`)}else s=t;s=Ef(s,i),p0[r]=s}return s}const lM=/font-family: ?([^;]*);/,uM=/("|')/g;let Gl;function cM(t){if(!Gl){Gl={};const e=document.styleSheets;for(let n=0,i=e.length;n<i;++n){const r=e[n];try{const s=r.rules||r.cssRules;if(s)for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.type==5){const u=l.cssText.match(lM);Gl[u[1].replace(uM,"")]=!0}}}catch{}}}return t in Gl}const Kh={};function hM(t,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const n=t.toString();if(n in Kh)return Kh[n];const i=[];for(let r=0,s=t.length;r<s;++r){t[r]=t[r].replace("Arial Unicode MS","Arial");const o=t[r],a=wf(o,1);yv(a);const l=a.split(" ");i.push([l.slice(3).join(" ").replace(/"/g,""),l[1],l[0]])}for(let r=0,s=i.length;r<s;++r){const o=i[r],a=o[0];if(!cM(a)&&jn.get(`${o[2]}
${o[1]} 
${a}`)!==100){const l=e.replace("{font-family}",a.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",a.replace(/ /g,"+")).replace("{fontweight}",o[1]).replace("{-fontstyle}",o[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",o[2]);if(!document.querySelector('link[href="'+l+'"]')){const u=document.createElement("link");u.href=l,u.rel="stylesheet",document.head.appendChild(u)}}}return Kh[n]=t,t}const dM={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},fM={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},pM=function(t,e){const n=Nk(t,e);if(n.result==="error")throw new Error(n.value.map(i=>`${i.key}: ${i.message}`).join(", "));return n.value},Sf={},Ju={zoom:0};let jl,Hh;function Y(t,e,n,i,r,s,o){const a=t.id;s||(s={},console.warn("No functionCache provided to getValue()")),s[a]||(s[a]={});const l=s[a];if(!l[n]){let u=(t[e]||Sf)[n];const c=bx[`${e}_${t.type}`][n];u===void 0&&(u=c.default);let h=zk(u);if(!h&&Ax(u)&&(u=wI(u,c),h=!0),h){const d=pM(u,c);l[n]=d.evaluate.bind(d)}else c.type=="color"&&(u=rn.parse(u)),l[n]=function(){return u}}return Ju.zoom=i,l[n](Ju,r,o)}function g0(t,e,n,i,r){return Y(t,"layout",`${i}-allow-overlap`,e,n,r)?Y(t,"layout",`${i}-ignore-placement`,e,n,r)?"none":"obstacle":"declutter"}function gM(t,e,n,i,r){return r||console.warn("No filterCache provided to evaluateFilter()"),t in r||(r[t]=Vk(e).filter),Ju.zoom=i,r[t](Ju,n)}function Vi(t,e){if(t){if(t.a===0||e===0)return;const n=t.a;return e=e===void 0?1:e,n===0?"transparent":"rgba("+Math.round(t.r*255/n)+","+Math.round(t.g*255/n)+","+Math.round(t.b*255/n)+","+n*e+")"}return t}const mM=/\{[^{}}]*\}/g;function qh(t,e){return t.replace(mM,function(n){return e[n.slice(1,-1)]||""})}const yM={};function _M(t,e,n,i=Bc,r=void 0,s=void 0,o=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");yM[tM(e,t)]=Array.from(arguments);let l,u,c;if(s){if(typeof Image<"u"){const E=new Image;let C;xa(()=>s).then(R=>{R instanceof Request?fetch(R).then(L=>L.blob()).then(L=>{C=URL.createObjectURL(L),E.src=C}).catch(()=>{}):(E.crossOrigin="anonymous",E.src=R,C&&URL.revokeObjectURL(C))}),E.onload=function(){l=E,u=[E.width,E.height],t.changed(),E.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const E=self;E.postMessage({action:"loadImage",src:s}),E.addEventListener("message",function(R){R.data.action==="imageLoaded"&&R.data.src===s&&(l=R.data.image,u=[l.width,l.height])})}}const h=qk(e.layers),d={},f=[],p={},y={},v=nM(e),m=iM(e);let g;for(let E=0,C=h.length;E<C;++E){const R=h[E],L=R.id;if(typeof n=="string"&&R.source==n||Array.isArray(n)&&n.indexOf(L)!==-1){const D=R["source-layer"];if(g){if(R.source!==g)throw new Error(`Layer "${L}" does not use source "${g}`)}else{g=R.source;const W=e.sources[g];if(!W)throw new Error(`Source "${g}" is not defined`);const A=W.type;if(A!=="vector"&&A!=="geojson")throw new Error(`Source "${g}" is not of type "vector" or "geojson", but "${A}"`)}let I=d[D];I||(I=[],d[D]=I),I.push({layer:R,index:E}),f.push(L)}}const _=new vi,x=new Yn,w=[],S=function(E,C,R){const L=E.getProperties(),D=d[L.layer];if(!D)return;let I=i.indexOf(C);I==-1&&(I=Wx(C,i));const W=dM[E.getGeometry().getType()],A={id:E.getId(),properties:L,type:W},k=t.get("mapbox-featurestate")[E.getId()];let P=-1;for(let U=0,F=D.length;U<F;++U){const j=D[U],T=j.layer,X=T.id;if(R!==void 0&&R!==X)continue;const B=T.layout||Sf,ae=T.paint||Sf;if(B.visibility==="none"||"minzoom"in T&&I<T.minzoom||"maxzoom"in T&&I>=T.maxzoom)continue;const b=T.filter;if(!b||gM(X,b,A,I,m)){let me,ue,we,je,ut,N;const En=j.index;if(W==3&&(T.type=="fill"||T.type=="fill-extrusion"))if(ue=Y(T,"paint",T.type+"-opacity",I,A,v,k),T.type+"-pattern"in ae){const _e=Y(T,"paint",T.type+"-pattern",I,A,v,k);if(_e){const ye=typeof _e=="string"?qh(_e,L):_e.toString();if(l&&r&&r[ye]){++P,N=w[P],(!N||!N.getFill()||N.getStroke()||N.getText())&&(N=new Vt({fill:new Yn}),w[P]=N),we=N.getFill(),N.setZIndex(En);const de=ye+"."+ue;let ve=y[de];if(!ve){const ie=r[ye],K=$c(ie.width,ie.height),De=K.getContext("2d");De.globalAlpha=ue,De.drawImage(l,ie.x,ie.y,ie.width,ie.height,0,0,ie.width,ie.height),ve=De.createPattern(K,"repeat"),y[de]=ve}we.setColor(ve)}}}else me=Vi(Y(T,"paint",T.type+"-color",I,A,v,k),ue),T.type+"-outline-color"in ae&&(ut=Vi(Y(T,"paint",T.type+"-outline-color",I,A,v,k),ue)),ut||(ut=me),(me||ut)&&(++P,N=w[P],(!N||me&&!N.getFill()||!me&&N.getFill()||ut&&!N.getStroke()||!ut&&N.getStroke()||N.getText())&&(N=new Vt({fill:me?new Yn:void 0,stroke:ut?new vi:void 0}),w[P]=N),me&&(we=N.getFill(),we.setColor(me)),ut&&(je=N.getStroke(),je.setColor(ut),je.setWidth(.5)),N.setZIndex(En));if(W!=1&&T.type=="line"){"line-pattern"in ae?me=void 0:me=Vi(Y(T,"paint","line-color",I,A,v,k),Y(T,"paint","line-opacity",I,A,v,k));const _e=Y(T,"paint","line-width",I,A,v,k);me&&_e>0&&(++P,N=w[P],(!N||!N.getStroke()||N.getFill()||N.getText())&&(N=new Vt({stroke:new vi}),w[P]=N),je=N.getStroke(),je.setLineCap(Y(T,"layout","line-cap",I,A,v,k)),je.setLineJoin(Y(T,"layout","line-join",I,A,v,k)),je.setMiterLimit(Y(T,"layout","line-miter-limit",I,A,v,k)),je.setColor(me),je.setWidth(_e),je.setLineDash(ae["line-dasharray"]?Y(T,"paint","line-dasharray",I,A,v,k).map(function(ye){return ye*_e}):null),N.setZIndex(En))}let Dn=!1,he=null,Cn=0,Sn,Le,ii;if((W==1||W==2)&&"icon-image"in B){const _e=Y(T,"layout","icon-image",I,A,v,k);if(_e){Sn=typeof _e=="string"?qh(_e,L):_e.toString();let ye;const de=a?a(t,Sn):void 0;if(l&&r&&r[Sn]||de){const ve=Y(T,"layout","icon-rotation-alignment",I,A,v,k);if(W==2){const ie=E.getGeometry();if(ie.getFlatMidpoint||ie.getFlatMidpoints){const K=ie.getExtent();if(Math.sqrt(Math.max(Math.pow((K[2]-K[0])/C,2),Math.pow((K[3]-K[1])/C,2)))>150){const Ae=ie.getType()==="MultiLineString"?ie.getFlatMidpoints():ie.getFlatMidpoint();if(Hh||(jl=[NaN,NaN],Hh=new pt("Point",jl,[],2,{},void 0)),ye=Hh,jl[0]=Ae[0],jl[1]=Ae[1],Y(T,"layout","symbol-placement",I,A,v,k)==="line"&&ve==="map"){const ht=ie.getStride(),dt=ie.getFlatCoordinates();for(let vt=0,ke=dt.length-ht;vt<ke;vt+=ht){const Pt=dt[vt],xt=dt[vt+1],Lt=dt[vt+ht],qe=dt[vt+ht+1],Rn=Math.min(Pt,Lt),wr=Math.min(xt,qe),Er=Math.max(Pt,Lt),il=Math.max(xt,qe);if(Ae[0]>=Rn&&Ae[0]<=Er&&Ae[1]>=wr&&Ae[1]<=il){Cn=Math.atan2(xt-qe,Lt-Pt);break}}}}}}if(W!==2||ye){const ie=Y(T,"layout","icon-size",I,A,v,k),K=ae["icon-color"]!==void 0?Y(T,"paint","icon-color",I,A,v,k):null;if(!K||K.a!==0){const De=Y(T,"paint","icon-halo-color",I,A,v,k),Ae=Y(T,"paint","icon-halo-width",I,A,v,k);let Ft=`${Sn}.${ie}.${Ae}.${De}`;if(K!==null&&(Ft+=`.${K}`),Le=p[Ft],!Le){const ht=g0(T,I,A,"icon",v);let dt;"icon-offset"in B&&(dt=Y(T,"layout","icon-offset",I,A,v,k).slice(0),dt[0]*=ie,dt[1]*=-ie);let vt=K?[K.r*255,K.g*255,K.b*255,K.a]:void 0;if(de){const ke={color:vt,rotateWithView:ve==="map",displacement:dt,declutterMode:ht,scale:ie};typeof de=="string"?ke.src=de:(ke.img=de,ke.imgSize=[de.width,de.height]),Le=new ao(ke)}else{const ke=r[Sn];let Pt,xt,Lt;Ae?ke.sdf?(Pt=d0(f0(l,ke,K||[0,0,0,1]),{x:0,y:0,width:ke.width,height:ke.height,pixelRatio:ke.pixelRatio},Ae,De),vt=void 0):Pt=d0(l,ke,Ae,De):(ke.sdf?(c||(c=f0(l,{x:0,y:0,width:u[0],height:u[1]},{r:1,g:1,b:1,a:1})),Pt=c):Pt=l,xt=[ke.width,ke.height],Lt=[ke.x,ke.y]),Le=new ao({color:vt,img:Pt,imgSize:u,size:xt,offset:Lt,rotateWithView:ve==="map",scale:ie/ke.pixelRatio,displacement:dt,declutterMode:ht})}p[Ft]=Le}}Le&&(++P,N=w[P],(!N||!N.getImage()||N.getFill()||N.getStroke())&&(N=new Vt,w[P]=N),N.setGeometry(ye),Le.setRotation(Cn+Yh(Y(T,"layout","icon-rotate",I,A,v,k))),Le.setOpacity(Y(T,"paint","icon-opacity",I,A,v,k)),Le.setAnchor(fM[Y(T,"layout","icon-anchor",I,A,v,k)]),N.setImage(Le),he=N.getText(),N.setText(void 0),N.setZIndex(En),Dn=!0,ii=!1)}else ii=!0}}}if(W==1&&T.type==="circle"){++P,N=w[P],(!N||!N.getImage()||N.getFill()||N.getStroke())&&(N=new Vt,w[P]=N);const _e="circle-radius"in ae?Y(T,"paint","circle-radius",I,A,v,k):5,ye=Vi(Y(T,"paint","circle-stroke-color",I,A,v,k),Y(T,"paint","circle-stroke-opacity",I,A,v,k)),de=Y(T,"paint","circle-translate",I,A,v,k),ve=Vi(Y(T,"paint","circle-color",I,A,v,k),Y(T,"paint","circle-opacity",I,A,v,k)),ie=Y(T,"paint","circle-stroke-width",I,A,v,k),K=_e+"."+ye+"."+ve+"."+ie+"."+de[0]+"."+de[1];Le=p[K],Le||(Le=new Ha({radius:_e,displacement:[de[0],-de[1]],stroke:ye&&ie>0?new vi({width:ie,color:ye}):void 0,fill:ve?new Yn({color:ve}):void 0,declutterMode:"none"}),p[K]=Le),N.setImage(Le),he=N.getText(),N.setText(void 0),N.setGeometry(void 0),N.setZIndex(En),Dn=!0}let We,ri,ct,Ye,Mt,Tn;if("text-field"in B){Ye=Math.round(Y(T,"layout","text-size",I,A,v,k));const _e=Y(T,"layout","text-font",I,A,v,k);ct=Y(T,"layout","text-line-height",I,A,v,k),ri=wf(o?o(_e,e.metadata?e.metadata["ol:webfonts"]:void 0):_e,Ye,ct),ri.includes("sans-serif")||(ri+=",sans-serif"),Mt=Y(T,"layout","text-letter-spacing",I,A,v,k),Tn=Y(T,"layout","text-max-width",I,A,v,k);const ye=Y(T,"layout","text-field",I,A,v,k);typeof ye=="object"&&ye.sections?ye.sections.length===1?We=ye.toString():We=ye.sections.reduce((de,ve,ie)=>{const K=ve.fontStack?ve.fontStack.split(","):_e,De=wf(o?o(K):K,Ye*(ve.scale||1),ct);let Ae=ve.text;if(Ae===`
`)return de.push(`
`,""),de;if(W==2){de.push(Ef(Ae,Mt),De);return}Ae=Cf(Ae,De,Tn,Mt).split(`
`);for(let Ft=0,ht=Ae.length;Ft<ht;++Ft)Ft>0&&de.push(`
`,""),de.push(Ae[Ft],De);return de},[]):We=qh(ye,L).trim(),ue=Y(T,"paint","text-opacity",I,A,v,k)}if(We&&ue&&!ii){Dn||(++P,N=w[P],(!N||!N.getText()||N.getFill()||N.getStroke())&&(N=new Vt,w[P]=N),N.setImage(void 0),N.setGeometry(void 0));const _e=g0(T,I,A,"text",v);N.getText()||N.setText(he),he=N.getText(),(!he||"getDeclutterMode"in he&&he.getDeclutterMode()!==_e)&&(he=new kc({padding:[2,2,2,2],declutterMode:_e}),N.setText(he));const ye=Y(T,"layout","text-transform",I,A,v,k);ye=="uppercase"?We=Array.isArray(We)?We.map((qe,Rn)=>Rn%2?qe:qe.toUpperCase()):We.toUpperCase():ye=="lowercase"&&(We=Array.isArray(We)?We.map((qe,Rn)=>Rn%2?qe:qe.toLowerCase()):We.toLowerCase());const de=Array.isArray(We)?We:W==2?Ef(We,Mt):Cf(We,ri,Tn,Mt);he.setText(de),he.setFont(ri),he.setRotation(Yh(Y(T,"layout","text-rotate",I,A,v,k)));const ve=Y(T,"layout","text-anchor",I,A,v,k),ie=Dn||W==1?"point":Y(T,"layout","symbol-placement",I,A,v,k);let K;if(ie==="line-center"?(he.setPlacement("line"),K="center"):he.setPlacement(ie),ie==="line"&&typeof he.setRepeat=="function"){const qe=Y(T,"layout","symbol-spacing",I,A,v,k);he.setRepeat(qe*2)}he.setOverflow(ie==="point");let De=Y(T,"paint","text-halo-width",I,A,v,k);const Ae=Y(T,"layout","text-offset",I,A,v,k),Ft=Y(T,"paint","text-translate",I,A,v,k);let ht=0,dt=0;if(ie=="point"){K="center",ve.indexOf("left")!==-1?(K="left",dt=De):ve.indexOf("right")!==-1&&(K="right",dt=-De);const qe=Y(T,"layout","text-rotation-alignment",I,A,v,k);he.setRotateWithView(qe=="map")}else he.setMaxAngle(Yh(Y(T,"layout","text-max-angle",I,A,v,k))*We.length/de.length),he.setRotateWithView(!1);he.setTextAlign(K);let vt="middle";ve.indexOf("bottom")==0?(vt="bottom",ht=-De-.5*(ct-1)*Ye):ve.indexOf("top")==0&&(vt="top",ht=De+.5*(ct-1)*Ye),he.setTextBaseline(vt);const ke=Y(T,"layout","text-justify",I,A,v,k);he.setJustify(ke==="auto"?void 0:ke),he.setOffsetX(Ae[0]*Ye+dt+Ft[0]),he.setOffsetY(Ae[1]*Ye+ht+Ft[1]),x.setColor(Vi(Y(T,"paint","text-color",I,A,v,k),ue)),he.setFill(x);const Pt=Vi(Y(T,"paint","text-halo-color",I,A,v,k),ue);if(Pt&&De>0){_.setColor(Pt),De*=2;const qe=.5*Ye;_.setWidth(De<=qe?De:qe),he.setStroke(_)}else he.setStroke(void 0);const xt=Y(T,"layout","text-padding",I,A,v,k),Lt=he.getPadding();xt!==Lt[0]&&(Lt[0]=xt,Lt[1]=xt,Lt[2]=xt,Lt[3]=xt),N.setZIndex(En)}}}if(P>-1)return w.length=P+1,w};return t.setStyle(S),t.set("mapbox-source",g),t.set("mapbox-layers",f),t.set("mapbox-featurestate",t.get("mapbox-featurestate")||{}),S}function vM(t,e=512){return t.getExtent()?lg({extent:t.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Bc}function xM(t,e){return e.accessToken||(e=Object.assign({},e),new URL(t).searchParams.forEach((i,r)=>{e.accessToken=i,e.accessTokenParam=r})),e}function wM(t,e,n="",i={},r=void 0){let s,o,a,l,u=!0;return typeof n!="string"&&!Array.isArray(n)?(a=n,l=a.source||a.layers,i=a):l=n,typeof i=="string"?(s=i,a={}):(s=i.styleUrl,a=i),a.updateSource===!1&&(u=!1),r||(r=a.resolutions),!s&&typeof e=="string"&&!e.trim().startsWith("{")&&(s=e),s&&(s=s.startsWith("data:")?location.href:jx(s,a.accessToken),a=xM(s,a)),new Promise(function(c,h){Vx(e,a).then(function(d){if(d.version!=8)return h(new Error("glStyle version 8 required."));if(!(t instanceof $v||t instanceof tu))return h(new Error("Can only apply to VectorLayer or VectorTileLayer"));const f=t instanceof tu?"vector":"geojson";if(l?Array.isArray(l)?o=d.layers.find(function(x){return x.id===l[0]}).source:o=l:(o=Object.keys(d.sources).find(function(x){return d.sources[x].type===f}),l=o),!o)return h(new Error(`No ${f} source found in the glStyle.`));function p(){if(!u)return Promise.resolve();if(t instanceof tu)return IM(d.sources[o],s,a).then(function(E){const C=t.getSource();C?E!==C&&(C.setTileUrlFunction(E.getTileUrlFunction()),typeof C.setUrls=="function"&&typeof E.getUrls=="function"&&C.setUrls(E.getUrls()),C.format_||(C.format_=E.format_),C.getAttributions()||C.setAttributions(E.getAttributions()),C.getTileLoadFunction()===lx&&C.setTileLoadFunction(E.getTileLoadFunction()),Zi(C.getProjection(),E.getProjection())&&(C.tileGrid=E.getTileGrid())):t.setSource(E);const R=t.getSource().getTileGrid();!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())&&R.getMinZoom()>0&&t.setMaxResolution(rM(Math.max(0,R.getMinZoom()-1e-12),R.getResolutions()))});const x=d.sources[o];let w=t.getSource();(!w||w.get("mapbox-source")!==x)&&(w=MM(x,s,a));const S=t.getSource();return S?w!==S&&(S.getAttributions()||S.setAttributions(w.getAttributions()),S.format_||(S.format_=w.getFormat()),S.url_=w.getUrl()):t.setSource(w),Promise.resolve()}let y,v,m,g;function _(){if(!g&&(!d.sprite||v)){if(a.projection&&!r){const w=Re(a.projection).getUnits();w!=="m"&&(r=Bc.map(S=>S/yc[w]))}g=_M(t,d,l,r,v,m,(x,w=a.webfonts)=>hM(x,w),a.getImage),t.getStyle()?p().then(c).catch(h):h(new Error(`Nothing to show for source [${o}]`))}else g?(t.setStyle(g),p().then(c).catch(h)):h(new Error("Something went wrong trying to apply style."))}if(d.sprite){const x=new URL(Qk(d.sprite,a.accessToken,s||location.href));y=window.devicePixelRatio>=1.5?.5:1;const w=y==.5?"@2x":"";let S=x.origin+x.pathname+w+".json"+x.search;new Promise(function(E,C){lo("Sprite",S,a).then(E).catch(function(R){S=x.origin+x.pathname+".json"+x.search,lo("Sprite",S,a).then(E).catch(C)})}).then(function(E){if(E===void 0&&h(new Error("No sprites found.")),v=E,m=x.origin+x.pathname+w+".png"+x.search,a.transformRequest){const C=a.transformRequest(m,"SpriteImage")||m;(C instanceof Request||C instanceof Promise)&&(m=C)}_()}).catch(function(E){h(new Error(`Sprites cannot be loaded: ${S}: ${E.message}`))})}else _()}).catch(h)})}const m0={};function EM(t,e,n){e.layers.some(function(i){if(i.type==="background"){if(t instanceof Za)return t.setBackground(function(r){return Xx(i,r,n,{})}),!0;if(t instanceof Ov||t instanceof is)return t.getLayers().insertAt(0,RM(i,n,{})),!0}})}function CM(t,e,n={}){return Vx(e,n).then(function(i){EM(t,i,n)})}function SM(t,e){const n=t.bounds;if(n){const i=ty([n[0],n[1]],e),r=ty([n[2],n[3]],e);return[i[0],i[1],r[0],r[1]]}return Re(e).getExtent()}function TM(t,e,n){const i=new mI({tileJSON:e,tileSize:t.tileSize||e.tileSize||512}),r=i.getTileJSON(),s=i.getTileGrid(),o=Re(n.projection||"EPSG:3857"),a=SM(r,o),l=o.getExtent(),u=r.minzoom||0,c=r.maxzoom||22,h={attributions:i.getAttributions(),projection:o,tileGrid:new Oc({origin:l?Li(l):s.getOrigin(0),extent:a||s.getExtent(),minZoom:u,resolutions:vM(o,e.tileSize).slice(0,c+1),tileSize:s.getTileSize(0)})};return Array.isArray(r.tiles)?h.urls=r.tiles:h.url=r.tiles,h}function Xx(t,e,n,i){const r={id:t.id,type:t.type},s=t.layout||{},o=t.paint||{};r.paint=o;const a=Wx(e,n.resolutions||Bc);let l;const u=Y(r,"paint","background-color",a,m0,i);return o["background-opacity"]!==void 0&&(l=Y(r,"paint","background-opacity",a,m0,i)),s.visibility=="none"?void 0:Vi(u,l)}function RM(t,e,n){const i=document.createElement("div");return i.className="ol-mapbox-style-background",i.style.position="absolute",i.style.width="100%",i.style.height="100%",new Za({source:new ng({}),render(r){const s=Xx(t,r.viewState.resolution,e,n);return i.style.backgroundColor=s,i}})}function IM(t,e,n){return new Promise(function(i,r){sM(t,e,n).then(function({tileJson:s,tileLoadFunction:o}){const a=TM(t,s,n);a.tileLoadFunction=o,a.format=new rx,i(new ax(a))}).catch(r)})}function kM(t){return`{bbox-${(t?t.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function MM(t,e,n){const i=n.projection?new hf({dataProjection:n.projection}):new hf,r=t.data,s={};if(typeof r=="string"){const a=iu(r,n.accessToken,n.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const u=(h,d,f)=>{const p=kM(f);return a.replace(p,`${h.join(",")}`)},c=new eu({attributions:t.attribution,format:i,loader:(h,d,f,p,y)=>{const v=typeof u=="function"?u(h,d,f):u;lo("GeoJSON",v,n).then(m=>{const g=c.getFormat().readFeatures(m,{featureProjection:f});c.addFeatures(g),p(g)}).catch(m=>{c.removeLoadedExtent(h),y()})},strategy:iR});return c.set("mapbox-source",t),c}const l=new eu({attributions:t.attribution,format:i,url:a,loader:(u,c,h,d,f)=>{lo("GeoJSON",a,n).then(p=>{const y=l.getFormat().readFeatures(p,{featureProjection:h});l.addFeatures(y),d(y)}).catch(p=>{l.removeLoadedExtent(u),f()})}});return l}s.features=i.readFeatures(r,{featureProjection:wa()||"EPSG:3857"});const o=new eu(Object.assign({attributions:t.attribution,format:i},s));return o.set("mapbox-source",t),o}class FM extends ti{constructor(e){super(q.ERROR),this.error=e}}class PM extends tu{constructor(e){const n="declutter"in e?e.declutter:!0,i=new ax({state:"loading",format:new rx});super({source:i,background:e.background===!1?null:e.background,declutter:n,className:e.className,opacity:e.opacity,visible:e.visible,zIndex:e.zIndex,minResolution:e.minResolution,maxResolution:e.maxResolution,minZoom:e.minZoom,maxZoom:e.maxZoom,renderOrder:e.renderOrder,renderBuffer:e.renderBuffer,renderMode:e.renderMode,map:e.map,updateWhileAnimating:e.updateWhileAnimating,updateWhileInteracting:e.updateWhileInteracting,preload:e.preload,useInterimTilesOnError:e.useInterimTilesOnError,properties:e.properties}),e.accessToken&&(this.accessToken=e.accessToken);const r=e.styleUrl,s=[wM(this,r,e.layers||e.source,{accessToken:this.accessToken})];this.getBackground()===void 0&&s.push(CM(this,e.styleUrl,{accessToken:this.accessToken})),Promise.all(s).then(()=>{i.setState("ready")}).catch(o=>{this.dispatchEvent(new FM(o)),this.getSource().setState("error")})}}const LM="pk.eyJ1IjoiY2xvdWRsdW4iLCJhIjoiY2s3ZWl4b3V1MDlkejNkb2JpZmtmbHp4ZiJ9.MbJU7PCa2LWBk9mENFkgxw",AM=()=>{const t=Ke.useRef(null),[e,n]=Ke.useState(null),[i,r]=Ke.useState(null);return Ke.useEffect(()=>{JC();const s=new Ov({target:t.current||void 0,layers:[new PM({styleUrl:"mapbox://styles/cloudlun/clxa8cwsd09ly01nx62o9fjyo",accessToken:LM})],view:new Vn({center:[-73.84200928305255,40.76043006443475],zoom:12})});return n(s),fetch("https://vcadeeaimofyayyevakl.supabase.co/rest/v1/cd_coolroofs?select=*&apikey=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZjYWRlZWFpbW9meWF5eWV2YWtsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTcwNzQzNzgsImV4cCI6MjAzMjY1MDM3OH0.clu7Zh0jdJWJVxbwyoyeILH33pew1QSpxeYHzAq4Auo").then(o=>o.json()).then(o=>{const a={type:"FeatureCollection",features:o.map(l=>{const u=JSON.parse(JSON.stringify(l.geometry.coordinates));return delete l.geometry,{type:"Feature",properties:{...l},geometry:{coordinates:u,type:"MultiPolygon"}}})};r(a)}),fetch("https://vcadeeaimofyayyevakl.supabase.co/rest/v1/stations_point?select=*&apikey=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZjYWRlZWFpbW9meWF5eWV2YWtsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTcwNzQzNzgsImV4cCI6MjAzMjY1MDM3OH0.clu7Zh0jdJWJVxbwyoyeILH33pew1QSpxeYHzAq4Auo").then(o=>o.json()).then(o=>{const a={type:"FeatureCollection",features:o.map(l=>{const u=JSON.parse(JSON.stringify(l.geometry.coordinates));return delete l.geometry,{type:"Feature",properties:{...l},geometry:{coordinates:u,type:"Point"}}})};console.log(a)}),()=>s.setTarget(void 0)},[]),Ke.useEffect(()=>{if(i&&e)try{if(i.features.length){const s=new hf().readFeatures(i),o=new eu({features:s}),a={MultiPolygon:new Vt({stroke:new vi({color:"red",width:1}),fill:new Yn({color:"rgba(255, 0, 0, 0.1)"})})},l=function(c){return a[c.getGeometry().getType()]},u=new $v({source:o,style:l});e.addLayer(u)}else console.error("No features found in the GeoJSON data.")}catch(s){console.error("Error reading features from GeoJSON:",s)}},[i,e]),Q.jsx("div",{ref:t,className:"h-full w-full"})};function bM({title:t,titleId:e,...n},i){return Ke.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),t?Ke.createElement("title",{id:e},t):null,Ke.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const OM=Ke.forwardRef(bM),hi=({title:t,img:e})=>Q.jsxs("div",{className:"flex justify-between items-center px-6 py-3 hover:bg-[#828282] hover:text-white cursor-pointer",children:[Q.jsxs("div",{className:"flex items-center gap-3",children:[Q.jsx("div",{className:"flex justify-center items-center w-10 h-10 bg-[#F2F2F2] rounded-full",children:Q.jsx("img",{src:e,alt:"",className:"w-6 h-6"})}),Q.jsx("h3",{className:"text-[1rem]",children:t})]}),Q.jsx(OM,{width:24,height:24,className:""})]}),DM="/nyc-urban-heat/icons/bar_chart.svg",zM="/nyc-urban-heat/icons/sick.svg",NM="/nyc-urban-heat/icons/thermostat_auto.svg",GM="/nyc-urban-heat/icons/air.svg",jM="/nyc-urban-heat/icons/device_thermostat.svg",WM="/nyc-urban-heat/icons/settings_input_antenna.svg",VM="/nyc-urban-heat/icons/park.svg",UM="/nyc-urban-heat/icons/wb_shade.svg",XM="/nyc-urban-heat/icons/wind_power.svg";function BM({title:t,titleId:e,...n},i){return Ke.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),t?Ke.createElement("title",{id:e},t):null,Ke.createElement("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const $M=Ke.forwardRef(BM);function YM({title:t,titleId:e,...n},i){return Ke.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),t?Ke.createElement("title",{id:e},t):null,Ke.createElement("path",{fillRule:"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z",clipRule:"evenodd"}))}const ZM=Ke.forwardRef(YM),KM=()=>{const[t,e]=Ke.useState(!1);return Q.jsxs("div",{className:`absolute left-6 top-20  py-5 w-[24rem] ${!t&&"h-[4.25rem] overflow-hidden"} bg-white rounded-lg`,children:[Q.jsxs("div",{className:"flex justify-between mb-3 px-6 py-1",children:[Q.jsx("h2",{className:"font-medium",children:"Urban Heat Data Layers"}),t?Q.jsx(ZM,{width:24,height:24,className:"cursor-pointer",onClick:()=>e(!1)}):Q.jsx($M,{width:24,height:24,className:"cursor-pointer",onClick:()=>e(!0)})]}),Q.jsxs("div",{children:[Q.jsxs("div",{className:"",children:[Q.jsx("h3",{className:"px-6 text-[0.75rem] text-[#4F4F4F]",children:"Heat Vulnerability"}),Q.jsx("div",{className:"my-3 w-full h-[1px] bg-[#828282]"}),Q.jsx(hi,{title:"Heat Vulnerability Index",img:DM}),Q.jsx(hi,{title:"Disadvantages Communities",img:zM})]}),Q.jsxs("div",{children:[Q.jsx("h3",{className:"px-6 text-[0.75rem] text-[#4F4F4F]",children:"Temperature"}),Q.jsx("div",{className:"my-3 w-full h-[1px] bg-[#828282]"}),Q.jsx(hi,{title:"Air Temperature",img:NM}),Q.jsx(hi,{title:"Air Heat Index",img:GM}),Q.jsx(hi,{title:"Surface Temperature",img:jM}),Q.jsx(hi,{title:"Weather Stations",img:WM})]}),Q.jsxs("div",{children:[Q.jsx("h3",{className:"px-6 text-[0.75rem] text-[#4F4F4F]",children:"Heat Mitigation"}),Q.jsx("div",{className:"my-3 w-full h-[1px] bg-[#828282]"}),Q.jsx(hi,{title:"Tree Canopy",img:VM}),Q.jsx(hi,{title:"Cool Roofs",img:UM}),Q.jsx(hi,{title:"Cooling Centers",img:XM})]})]}),Q.jsx("div",{})]})};function HM(){return Q.jsxs("main",{className:"relative w-[100vw] h-[100vh]",children:[Q.jsx(EC,{}),Q.jsx(AM,{}),Q.jsx(KM,{})]})}Jh.createRoot(document.getElementById("root")).render(Q.jsx(uw.StrictMode,{children:Q.jsx(HM,{})}));
